parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QwpB":[function(require,module,exports) {
"use strict";function e(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){t(r,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.camelToDash=o,exports.pascalToDash=c,exports.dispatch=i,exports.shadyCSS=a,exports.stringifyElement=s,exports.deferred=exports.IS_IE=void 0;var n=new Map;function o(e){var r=n.get(e);return void 0===r&&(r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n.set(e,r)),r}function c(e){return o(e.replace(/((?!([A-Z]{2}|^))[A-Z])/g,"-$1"))}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.dispatchEvent(new CustomEvent(t,r({bubbles:!1},n)))}function a(e,r){var t=window.ShadyCSS;return t&&!t.nativeShadow?e(t):r}function s(e){return"<".concat(String(e.tagName).toLowerCase(),">")}var p="ActiveXObject"in window;exports.IS_IE=p;var u=Promise.resolve();exports.deferred=u;
},{}],"n6bg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("./utils.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){return e},n=function(e){if("object"!==t(e))throw TypeError("Assigned value must be an object: ".concat(t(e)));return e&&Object.freeze(e)};function o(o,u){var c=t(o),i=r;switch(c){case"string":i=String;break;case"number":i=Number;break;case"boolean":i=Boolean;break;case"function":o=(i=o)();break;case"object":o&&Object.freeze(o),i=n}return{get:function(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:o},set:function(e,t,r){return i(t,r)},connect:"object"!==c&&"undefined"!==c?function(t,r,n){if(t[r]===o){var c=(0,e.camelToDash)(r);if(t.hasAttribute(c)){var a=t.getAttribute(c);t[r]=""===a&&i===Boolean||a}}return u&&u(t,r,n)}:u}}
},{"./utils.js":"QwpB"}],"hTkU":[function(require,module,exports) {
"use strict";function t(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function e(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof t)throw TypeError("The first argument must be a function: ".concat(r(t)));var n=e({shadowRoot:!0},o),c={mode:"open"};return"object"===r(n.shadowRoot)&&Object.assign(c,n.shadowRoot),{get:function(e){var o=t(e),r=e;return n.shadowRoot&&(e.shadowRoot||e.attachShadow(c),r=e.shadowRoot),function(){return o(e,r),r}},observe:function(t,e){e()}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"hf5k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dispatch=n,exports.subscribe=c;var e=new WeakMap,t=new Set;function r(){try{t.forEach(function(r){try{e.get(r)(),t.delete(r)}catch(n){throw t.delete(r),n}})}catch(n){throw t.size&&r(),n}}function n(e){t.size||requestAnimationFrame(r),t.add(e)}function c(r,c){return e.set(r,c),n(r),function(){t.delete(r),e.delete(r)}}
},{}],"DQRN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEntry=o,exports.get=i,exports.set=u,exports.invalidate=f,exports.observe=p;var e=r(require("./emitter.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var c=o?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}var n=new WeakMap;function o(e,t){var r=n.get(e);r||(r=new Map,n.set(e,r));var o=r.get(t);return o||(o={target:e,key:t,value:void 0,contexts:void 0,deps:void 0,state:0,checksum:0,observed:!1},r.set(t,o)),o}function s(e){var t=e.state;return e.deps&&e.deps.forEach(function(e){t+=e.state}),t}function c(t){t.observed&&e.dispatch(t),t.contexts&&t.contexts.forEach(c)}function a(e,t){t&&t.forEach(function(t){e.deps.add(t),e.observed&&(t.contexts||(t.contexts=new Set),t.contexts.add(e)),a(e,t.deps)})}var d=new Set;function i(e,t,r){var n=o(e,t);if(d.size&&d.has(n))throw Error("Circular get invocation is forbidden: '".concat(t,"'"));if(d.forEach(function(e){e.deps||(e.deps=new Set),e.deps.add(n),e.observed&&(n.contexts||(n.contexts=new Set),n.contexts.add(e))}),n.checksum&&n.checksum===s(n))return n.value;try{d.add(n),n.observed&&n.deps&&n.deps.size&&n.deps.forEach(function(e){e.contexts&&e.contexts.delete(n)}),n.deps=void 0;var i=r(e,n.value);n.deps&&n.deps.forEach(function(e){a(n,e.deps)}),i!==n.value&&(n.state+=1,n.value=i,c(n)),n.checksum=s(n),d.delete(n)}catch(u){throw n.checksum=0,d.delete(n),d.forEach(function(e){e.deps.delete(n),e.observed&&n.contexts.delete(e)}),u}return n.value}function u(e,t,r,n){var s=o(e,t),a=r(e,n,s.value);a!==s.value&&(s.checksum=0,s.state+=1,s.value=a,c(s))}function f(e,t,r){if(d.size)throw Error("Invalidating property in chain of get calls is forbidden: '".concat(t,"'"));var n=o(e,t);n.checksum=0,n.state+=1,c(n),r&&(n.value=void 0)}function p(t,r,n,s){var c,a=o(t,r);a.observed=!0;var d=e.subscribe(a,function(){var e=i(t,r,n);e!==c&&(s(t,e,c),c=e)});return a.deps&&a.deps.forEach(function(e){e.contexts||(e.contexts=new Set),e.contexts.add(a)}),function(){d(),a.observed=!1,a.deps&&a.deps.size&&a.deps.forEach(function(e){e.contexts&&e.contexts.delete(a)})}}
},{"./emitter.js":"hf5k"}],"yLIw":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=D;var e,t=i(require("./property.js")),n=i(require("./render.js")),r=c(require("./cache.js")),o=require("./utils.js");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function i(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function p(e){var t=h();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){if(null===e||!g(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return d(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),j(n,e)})(e)}function d(e,t,n){return(d=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&j(o,n.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m,P,_,k=function(e,t){return t},E=new WeakMap,M=new WeakMap;function S(e,o){e.hybrids=o;var u=[],c=Object.keys(o);E.set(e,u),M.set(e,c),c.forEach(function(c){var i,f=o[c],a=O(f);i="function"===a?"render"===c?(0,n.default)(f):{get:f}:"object"!==a||null===f||Array.isArray(f)?(0,t.default)(f):{get:f.get||k,set:f.set||!f.get&&k||void 0,connect:f.connect,observe:f.observe},Object.defineProperty(e.prototype,c,{get:function(){return r.get(this,c,i.get)},set:i.set&&function(e){r.set(this,c,i.set,e)},enumerable:!0,configurable:!1}),i.observe&&u.unshift(function(e){return r.observe(e,c,i.get,i.observe)}),i.connect&&u.push(function(e){return i.connect(e,c,function(){r.invalidate(e,c)})})})}var R=new WeakMap;function x(e,t){var n=O(t);if("object"!==n&&"function"!==n)throw TypeError("Second argument must be an object or a function: ".concat(n));var r=window.customElements.get(e);if("function"===n)return r!==t?window.customElements.define(e,t):r;if(r){if(r.hybrids===t)return r;throw Error("Element '".concat(e,"' already defined"))}var o=function(t){s(r,v(HTMLElement));var n=p(r);function r(){var e;f(this,r),e=n.call(this);for(var t=M.get(r),o=0;o<t.length;o+=1){var u=t[o];if(Object.prototype.hasOwnProperty.call(b(e),u)){var c=e[u];delete e[u],e[u]=c}}return e}return l(r,null,[{key:"name",get:function(){return e}}]),l(r,[{key:"connectedCallback",value:function(){for(var e=E.get(r),t=[],n=0;n<e.length;n+=1){var o=e[n](this);o&&t.push(o)}R.set(this,t)}},{key:"disconnectedCallback",value:function(){for(var e=R.get(this),t=0;t<e.length;t+=1)e[t]()}}]),r}();return S(o,t),customElements.define(e,o),o}function T(e){return Object.keys(e).reduce(function(t,n){var r=(0,o.pascalToDash)(n);return t[n]=x(r,e[n]),t},{})}function D(){return"object"===O(arguments.length<=0?void 0:arguments[0])?T(arguments.length<=0?void 0:arguments[0]):x.apply(void 0,arguments)}
},{"./property.js":"n6bg","./render.js":"hTkU","./cache.js":"DQRN","./utils.js":"QwpB"}],"J9Is":[function(require,module,exports) {
"use strict";function t(t,e){for(var n=t.parentElement||t.parentNode.host;n;){var r=n.constructor.hybrids;if(r&&e(r))return n;n=n.parentElement||n.parentNode&&n.parentNode.host}return n||null}function e(e){var n="function"==typeof e?e:function(t){return t===e};return{get:function(e){return t(e,n)},connect:function(t,e,n){return!!t[e]&&n}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LyoD":[function(require,module,exports) {
"use strict";function e(n,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Array.from(n.children).forEach(function(n){var u=n.constructor.hybrids;u&&t(u)?(o.push(n),r.deep&&r.nested&&e(n,t,r,o)):r.deep&&e(n,t,r,o)}),o}function n(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{deep:!1,nested:!1},r="function"==typeof n?n:function(e){return e===n};return{get:function(n){return e(n,r,t)},connect:function(e,n,r){var o=new MutationObserver(r);return o.observe(e,{childList:!0,subtree:!!t.deep}),function(){o.disconnect()}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"O1kU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTemplateEnd=r,exports.removeTemplate=o,exports.dataMap=void 0;var e=new WeakMap,t={get:function(t,r){var o=e.get(t);return o||(r&&e.set(t,r),r)},set:function(t,r){return e.set(t,r),r}};function r(e){for(var r;e&&(r=t.get(e))&&r.endNode;)e=r.endNode;return e}function o(e){if(e.nodeType!==Node.TEXT_NODE)for(var o=e.childNodes[0];o;)e.removeChild(o),o=e.childNodes[0];else{var d=t.get(e);if(d.startNode)for(var n=r(d.endNode),a=d.startNode,i=n.nextSibling;a;){var s=a.nextSibling;a.parentNode.removeChild(a),a=s!==i&&s}}}exports.dataMap=t;
},{}],"xLyZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.arrayMap=void 0;var e=require("../utils.js"),a=new WeakMap;function r(a,r){var t=e.dataMap.get(a),l=t.startNode,o=(0,e.getTemplateEnd)(t.endNode);r.parentNode.insertBefore(a,r.nextSibling);for(var n=a,d=l;d;){var i=d.nextSibling;n.parentNode.insertBefore(d,n.nextSibling),n=d,d=i!==o.nextSibling&&i}}function t(t,l,o,n){var d=a.get(l),i=o.map(function(e,a){return{id:Object.prototype.hasOwnProperty.call(e,"id")?e.id:a,value:e,placeholder:null,available:!0}});if(a.set(l,i),d){var p=new Set;i.forEach(function(e){return p.add(e.id)}),d=d.filter(function(a){return!!p.has(a.id)||((0,e.removeTemplate)(a.placeholder),a.placeholder.parentNode.removeChild(a.placeholder),!1)})}for(var v=l,c=o.length-1,u=e.dataMap.get(l),f=0;f<i.length;f+=1){var h=i[f],s=void 0;if(d)for(var g=0;g<d.length;g+=1)if(d[g].available&&d[g].id===h.id){s=d[g];break}var b=void 0;s?(s.available=!1,(b=s.placeholder).previousSibling!==v&&r(b,v),s.value!==h.value&&n(t,b,h.value)):(b=document.createTextNode(""),v.parentNode.insertBefore(b,v.nextSibling),n(t,b,h.value)),v=(0,e.getTemplateEnd)(e.dataMap.get(b).endNode||b),0===f&&(u.startNode=b),f===c&&(u.endNode=v),h.placeholder=b}d&&d.forEach(function(a){a.available&&((0,e.removeTemplate)(a.placeholder),a.placeholder.parentNode.removeChild(a.placeholder))})}exports.arrayMap=a;
},{"../utils.js":"O1kU"}],"rHSR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../utils.js"),t=n(require("./array.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(r,n,u){var f=Array.isArray(u)?"array":o(u),y=e.dataMap.get(n,{});switch(y.type!==f&&((0,e.removeTemplate)(n),"array"===f&&t.arrayMap.delete(n),y=e.dataMap.set(n,{type:f}),""!==n.textContent&&(n.textContent="")),f){case"function":u(r,n);break;case"array":(0,t.default)(r,n,u,a);break;default:n.textContent="number"===f||u?u:""}}
},{"../utils.js":"O1kU","./array.js":"xLyZ"}],"EpD9":[function(require,module,exports) {
"use strict";function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var o=new WeakMap;function e(e){return function(n,r,i,f){if(f){var u=o.get(r);u&&r.removeEventListener(e,u.get(f),void 0!==f.options&&f.options)}if(i){if("function"!=typeof i)throw Error("Event listener must be a function: ".concat(t(i)));var s=o.get(r);s||(s=new WeakMap,o.set(r,s));var p=i.bind(null,n);s.set(i,p),r.addEventListener(e,p,void 0!==i.options&&i.options)}}}
},{}],"Ow5s":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return Array.isArray(e)?e.forEach(function(t){return o.add(t)}):null!==e&&"object"===t(e)?Object.keys(e).forEach(function(t){return e[t]&&o.add(t)}):o.add(e),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var o=new WeakMap;function n(t,n,r){var c=o.get(n)||new Set,u=e(r);o.set(n,u),u.forEach(function(t){n.classList.add(t),c.delete(t)}),c.forEach(function(t){n.classList.remove(t)})}
},{}],"gbXB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../../utils.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=new WeakMap;function r(r,n,u){if(null===u||"object"!==t(u))throw TypeError("Style value must be an object in ".concat((0,e.stringifyElement)(n),":"),u);var y=o.get(n)||new Map,l=Object.keys(u).reduce(function(t,o){var r=(0,e.camelToDash)(o),l=u[o];return l||0===l?n.style.setProperty(r,l):n.style.removeProperty(r),t.set(r,l),y.delete(r),t},new Map);y.forEach(function(e,t){n.style[t]=""}),o.set(n,l)}
},{"../../utils.js":"QwpB"}],"y8A3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=s(require("./event.js")),t=s(require("./class.js")),r=s(require("./style.js"));function s(e){return e&&e.__esModule?e:{default:e}}function u(s,u,n){if("on"===u.substr(0,2)){var l=u.substr(2);return(0,e.default)(l)}switch(s){case"class":return t.default;case"style":return r.default;default:return function(e,t,r){if(n||t instanceof SVGElement||!(u in t))if(!1===r||null==r)t.removeAttribute(s);else{var l=!0===r?"":String(r);t.setAttribute(s,l)}else t[u]!==r&&(t[u]=r)}}}
},{"./event.js":"EpD9","./class.js":"Ow5s","./style.js":"gbXB"}],"akGz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInternalWalker=C,exports.compileTemplate=M,exports.getPlaceholder=void 0;var e,t=require("../utils.js"),n=require("./utils.js"),r=a(require("./resolvers/value.js")),o=a(require("./resolvers/property.js"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return s(e)||u(e,t)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}function s(e){if(Array.isArray(e))return e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=Date.now(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"{{h-".concat(p,"-").concat(e,"}}")};exports.getPlaceholder=h;var v=h("(\\d+)"),m=new RegExp("^".concat(v,"$")),y=new RegExp(v,"g"),N="--".concat(p,"--"),S=new RegExp(N,"g"),g=new WeakMap;function E(e,n){return n?(0,t.shadyCSS)(function(t){var r=g.get(e);r||(r=new Map,g.set(e,r));var o=r.get(n);if(!o){(o=document.createElement("template")).content.appendChild(e.content.cloneNode(!0)),r.set(n,o);var a=o.content.querySelectorAll("style");Array.from(a).forEach(function(e){for(var t=e.childNodes.length+1,n=0;n<t;n+=1)e.parentNode.insertBefore(document.createTextNode(h()),e)}),t.prepareTemplate(o,n.toLowerCase())}return o},e):e}function b(e,n){var r=e.reduce(function(t,n,r){return 0===r?n:e.slice(r).join("").match(/^\s*<\/\s*(table|tr|thead|tbody|tfoot|colgroup)>/)?"".concat(t,"\x3c!--").concat(h(r-1),"--\x3e").concat(n):t+h(r-1)+n},"");return n&&(r+="<style>\n".concat(n.join("\n/*------*/\n"),"\n</style>")),t.IS_IE?r.replace(/style\s*=\s*(["][^"]+["]|['][^']+[']|[^\s"'<>/]+)/g,function(e){return"".concat(N).concat(e)}):r}function x(e){return e.replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop()}function T(e){for(var t,n=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1);t=n.nextNode();)m.test(t.textContent)&&(t.parentNode.insertBefore(document.createTextNode(t.textContent),t),t.parentNode.removeChild(t))}function C(e){var t;return{get currentNode(){return t},nextNode:function(){if(void 0===t)t=e.childNodes[0];else if(t.childNodes.length)t=t.childNodes[0];else if(t.nextSibling)t=t.nextSibling;else{var n=t.parentNode;for(t=n.nextSibling;!t&&n!==e;)n=n.parentNode,t=n.nextSibling}return!!t}}}function _(e){return document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1)}var w="object"===f(window.ShadyDOM)&&window.ShadyDOM.inUse?C:_,A=document.createElement("div"),I=new Map;function M(e,a,i){var l=document.createElement("template"),d=[],u=b(e,i);if(a&&(u="<svg>".concat(u,"</svg>")),t.IS_IE?l.innerHTML=u:(A.innerHTML="<template>".concat(u,"</template>"),l.content.appendChild(A.children[0].content)),a){var s=l.content.firstChild;l.content.removeChild(s),Array.from(s.childNodes).forEach(function(e){return l.content.appendChild(e)})}T(l.content);for(var f=w(l.content),p=0,h=function(){var i=f.currentNode;if(i.nodeType===Node.TEXT_NODE){var l=i.textContent;if(!l.match(m)){var u=l.match(y);if(u){var s=i;u.reduce(function(e,t){var n=c(e.pop().split(t),2),r=n[0],o=n[1];return r&&e.push(r),e.push(t),o&&e.push(o),e},[l]).forEach(function(e,t){0===t?s.textContent=e:s=s.parentNode.insertBefore(document.createTextNode(e),s.nextSibling)})}}var h=i.textContent.match(m);h&&(t.IS_IE||(i.textContent=""),d[h[1]]=[p,r.default])}else i.nodeType===Node.ELEMENT_NODE&&Array.from(i.attributes).forEach(function(r){var l=r.value.trim(),u=t.IS_IE?r.name.replace(N,""):r.name,s=l.match(m);if(s){var f=x(e[s[1]]);d[s[1]]=[p,(0,o.default)(u,f,a)],i.removeAttribute(r.name)}else{var h=l.match(y);if(h){var v="attr__".concat(u);h.forEach(function(e,t){var r=c(e.match(m),2)[1];d[r]=[p,function(r,o,a){var c=n.dataMap.get(o,{});c[v]=(c[v]||l).replace(e,null==a?"":a),1!==h.length&&t+1!==h.length||(o.setAttribute(u,c[v]),c[v]=void 0)}]}),r.value="",t.IS_IE&&u!==r.name&&(i.removeAttribute(r.name),i.setAttribute(u,""))}}});p+=1};f.nextNode();)h();return function(e,r,o,a){var i=n.dataMap.get(r,{type:"function"});if(l!==i.template){(i.template||r.nodeType===Node.ELEMENT_NODE)&&(0,n.removeTemplate)(r),i.prevArgs=null;var u=document.importNode(E(l,e.tagName).content,!0),s=w(u),f=d.slice(0),p=0,h=f.shift(),v=[];for(i.template=l,i.markers=v;s.nextNode();){var y=s.currentNode;for(y.nodeType===Node.TEXT_NODE&&(m.test(y.textContent)?y.textContent="":t.IS_IE&&(y.textContent=y.textContent.replace(S,"")));h&&h[0]===p;)v.push([y,h[1]]),h=f.shift();p+=1}if(r.nodeType===Node.TEXT_NODE){i.startNode=u.childNodes[0],i.endNode=u.childNodes[u.childNodes.length-1];for(var N=r,g=u.childNodes[0];g;)r.parentNode.insertBefore(g,N.nextSibling),N=g,g=u.childNodes[0]}else r.appendChild(u)}var b=r.adoptedStyleSheets;if(a){var x=!1;if((a=a.map(function(e){if(e instanceof CSSStyleSheet)return e;var t=I.get(e);return t||((t=new CSSStyleSheet).replaceSync(e),I.set(e,t)),t})).length===b.length){x=!0;for(var T=0;T<a.length;T+=1)if(a[T]!==b[T]){x=!1;break}}x||(r.adoptedStyleSheets=a)}else b&&b.length&&(r.adoptedStyleSheets=[]);var C=i.prevArgs;i.prevArgs=o;for(var _=0;_<i.markers.length;_+=1){var A=c(i.markers[_],2),M=A[0],O=A[1];C&&C[_]===o[_]||O(e,M,o[_],C?C[_]:void 0)}r.nodeType!==Node.TEXT_NODE&&(0,t.shadyCSS)(function(t){e.shadowRoot&&(C?t.styleSubtree(e):t.styleElement(e))})}}
},{"../utils.js":"QwpB","./utils.js":"O1kU","./resolvers/value.js":"rHSR","./resolvers/property.js":"y8A3"}],"yigp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=t,exports.resolve=r;var e=new Map;function t(t,n){if(!t)throw Error("Target property name missing: ".concat(t));if(2===arguments.length)return function(e){e[t]=n};var r=e.get(t);return r||(r=function(e,n){var r=n.target;e[t]=r.value},e.set(t,r)),r}var n=new WeakMap;function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return function(o,i){var u;t&&(u=setTimeout(function(){u=void 0,requestAnimationFrame(function(){t(o,i)})},r)),n.set(i,e),e.then(function(t){u&&clearTimeout(u),n.get(i)===e&&(t(o,i),n.set(i,null))})}}
},{}],"gpz5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.html=d,exports.svg=g;var e=o(require("../define.js")),t=require("./core.js"),r=i(require("./helpers.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}var u=(0,t.getPlaceholder)(),a=(0,t.getPlaceholder)("svg"),f=/@import/,s=new Map,c=new WeakMap,l={define:function(t){return(0,e.default)(t),this},key:function(e){return this.id=e,this},style:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return c.set(this,t.filter(function(e){return e})),this}};function p(e,r,n){return Object.assign(function i(o){var l,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,d=c.get(i),g=e.join(u);if(d){var v=d.join(u);(l=!!p.adoptedStyleSheets&&!f.test(v))||(g+=v)}n&&(g+=a);var h=s.get(g);h||(h=(0,t.compileTemplate)(e,n,!l&&d),s.set(g,h)),h(o,p,r,l&&d)},l)}function d(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return p(e,r)}function g(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return p(e,r,!0)}Object.assign(d,r),Object.assign(g,r);
},{"../define.js":"yLIw","./core.js":"akGz","./helpers.js":"yigp"}],"C9y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"define",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"property",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"parent",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"children",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"render",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"dispatch",{enumerable:!0,get:function(){return i.dispatch}}),Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return o.html}}),Object.defineProperty(exports,"svg",{enumerable:!0,get:function(){return o.svg}});var e=p(require("./define.js")),r=p(require("./property.js")),t=p(require("./parent.js")),n=p(require("./children.js")),u=p(require("./render.js")),i=require("./utils.js"),o=require("./template/index.js");function p(e){return e&&e.__esModule?e:{default:e}}
},{"./define.js":"yLIw","./property.js":"n6bg","./parent.js":"J9Is","./children.js":"LyoD","./render.js":"hTkU","./utils.js":"QwpB","./template/index.js":"gpz5"}],"tZuy":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BabySharkDoDoDoDo=void 0;var e=require("hybrids");function o(){const e=t(['\n                <tileos-desktop></tileos-desktop>\n                <div id="dock-and-start-menu">\n                    <tileos-start-menu\n                        class=',"\n                    ></tileos-start-menu>\n                    <tileos-dock></tileos-dock>\n                </div>\n            "]);return o=function(){return e},e}function t(e,o){return o||(o=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(o)}}))}const n=[{name:"tileos-ferb",icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fcdn.freebiesupply.com%2Flogos%2Fthumbs%2F2x%2Fterminal-1-logo.png&f=1&nofb=1"},{name:"love-handle",icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fopengameart.org%2Fsites%2Fdefault%2Ffiles%2Fheart%2520pixel%2520art%2520254x254.png&f=1&nofb=1"},{name:"doof-pad",icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2Ff%2Ff0%2FIcon-notepad.svg%2F480px-Icon-notepad.svg.png&f=1&nofb=1"},{name:"photo-view",icon:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Media_Viewer_Icon_-_Open_Control.svg/512px-Media_Viewer_Icon_-_Open_Control.svg.png"},{name:"candace-menace",icon:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fpixelartmaker.com%2Fart%2F70489b4658e1add.png&f=1&nofb=1"}];localStorage.setItem("base64: two","OC84LzVyMi84LzgvNG4zLzVLMi8ycTUgYiAtIC0gMCAx"),window.cincoDeMayo="8/8/8/8/8/5n2/7r/3q1K2 b - - 0 1";const i={registered:n,open:[],focus:{observe:(e,o,t)=>{const n=e.querySelector('[id="'.concat(o,'"]')),i=e.querySelector('[id="'.concat(t,'"]'));i&&(i.focus=!1),n&&(n.focus=!0,n.style.display="block")}},showStartMenu:!1,render:(0,e.render)(t=>{let{showStartMenu:n}=t;return(0,e.html)(o(),!n&&"hide")},{shadowRoot:!1})};exports.BabySharkDoDoDoDo=i,(0,e.define)("tileos-is-the-best",i);
},{"hybrids":"C9y0"}],"g7ZD":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dock=void 0;var t=require("hybrids"),e=require("../tileos");function n(){const t=o(['\n            <button aria-label="Start button" onclick=','>\n                <div class="start-icon"></div>\n                <span class="start-text">start</span>\n            </button>\n            <div class="divider"></div>\n            ','\n            <div class="datetime">',"</div>\n        "]);return n=function(){return t},t}function r(){const t=o(["\n                <button\n                    class=","\n                    onclick=","\n                >\n                    <img src=",' class="icon"></img>\n                    <span class="icon-text">',"</span>\n                </button>\n            "]);return r=function(){return t},t}function o(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function s(t){return e=>{e.store.focus=t}}function c(){return t=>{t.store.showStartMenu=!t.store.showStartMenu}}const i=(e,n)=>e.map(e=>{let{id:o,name:c,icon:i}=e;return(0,t.html)(r(),o===n&&"focus",s(o),i,c)}),a=()=>new Date(Date.now()).toLocaleTimeString(),u={store:(0,t.parent)(e.BabySharkDoDoDoDo),render:(0,t.render)(e=>{let{store:{open:r,focus:o}}=e;return(0,t.html)(n(),c(),i(r,o),a())},{shadowRoot:!1})};exports.Dock=u,setInterval(()=>{for(let t of document.querySelectorAll(".datetime"))t.textContent=a()},1e3),(0,t.define)("tileos-dock",u);
},{"hybrids":"C9y0","../tileos":"tZuy"}],"gKk3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);function o(){if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}
},{}],"jqeo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;for(var e=[],r=0;r<256;++r)e.push((r+256).toString(16).substr(1));function t(r,t){var o=t||0;return(e[r[o+0]]+e[r[o+1]]+e[r[o+2]]+e[r[o+3]]+"-"+e[r[o+4]]+e[r[o+5]]+"-"+e[r[o+6]]+e[r[o+7]]+"-"+e[r[o+8]]+e[r[o+9]]+"-"+e[r[o+10]]+e[r[o+11]]+e[r[o+12]]+e[r[o+13]]+e[r[o+14]]+e[r[o+15]]).toLowerCase()}var o=t;exports.default=o;
},{}],"qgnI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,o=u(require("./rng.js")),s=u(require("./bytesToUuid.js"));function u(e){return e&&e.__esModule?e:{default:e}}var n=0,t=0;function a(u,a,d){var l=a&&d||0,c=a||new Array(16),i=(u=u||{}).node||e,v=void 0!==u.clockseq?u.clockseq:r;if(null==i||null==v){var f=u.random||(u.rng||o.default)();null==i&&(i=e=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==v&&(v=r=16383&(f[6]<<8|f[7]))}var q=void 0!==u.msecs?u.msecs:Date.now(),m=void 0!==u.nsecs?u.nsecs:t+1,p=q-n+(m-t)/1e4;if(p<0&&void 0===u.clockseq&&(v=v+1&16383),(p<0||q>n)&&void 0===u.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");n=q,t=m,r=v;var w=(1e4*(268435455&(q+=122192928e5))+m)%4294967296;c[l++]=w>>>24&255,c[l++]=w>>>16&255,c[l++]=w>>>8&255,c[l++]=255&w;var _=q/4294967296*1e4&268435455;c[l++]=_>>>8&255,c[l++]=255&_,c[l++]=_>>>24&15|16,c[l++]=_>>>16&255,c[l++]=v>>>8|128,c[l++]=255&v;for(var j=0;j<6;++j)c[l+j]=i[j];return a||(0,s.default)(c)}var d=a;exports.default=d;
},{"./rng.js":"gKk3","./bytesToUuid.js":"jqeo"}],"Y6ie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.URL=exports.DNS=void 0;var r=e(require("./bytesToUuid.js"));function e(r){return r&&r.__esModule?r:{default:r}}function t(r){var e=[];return r.replace(/[a-fA-F0-9]{2}/g,function(r){e.push(parseInt(r,16))}),e}function a(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var n="6ba7b810-9dad-11d1-80b4-00c04fd430c8";exports.DNS=n;var o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function u(e,u,s){function f(e,n,o,f){if("string"==typeof e&&(e=a(e)),"string"==typeof n&&(n=t(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var c=s(n.concat(e));if(c[6]=15&c[6]|u,c[8]=63&c[8]|128,o){f=f||0;for(var i=0;i<16;++i)o[f+i]=c[i];return o}return(0,r.default)(c)}try{f.name=e}catch(c){}return f.DNS=n,f.URL=o,f}exports.URL=o;
},{"./bytesToUuid.js":"jqeo"}],"bGV3":[function(require,module,exports) {
"use strict";function n(n){if("string"==typeof n){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var o=0;o<t.length;++o)n[o]=t.charCodeAt(o)}return r(e(u(n),8*n.length))}function r(n){for(var r=[],t=32*n.length,e=0;e<t;e+=8){var u=n[e>>5]>>>e%32&255,o=parseInt("0123456789abcdef".charAt(u>>>4&15)+"0123456789abcdef".charAt(15&u),16);r.push(o)}return r}function t(n){return 14+(n+64>>>9<<4)+1}function e(n,r){n[r>>5]|=128<<r%32,n[t(r)-1]=r;for(var e=1732584193,u=-271733879,f=-1732584194,a=271733878,v=0;v<n.length;v+=16){var s=e,d=u,p=f,g=a;e=c(e,u,f,a,n[v],7,-680876936),a=c(a,e,u,f,n[v+1],12,-389564586),f=c(f,a,e,u,n[v+2],17,606105819),u=c(u,f,a,e,n[v+3],22,-1044525330),e=c(e,u,f,a,n[v+4],7,-176418897),a=c(a,e,u,f,n[v+5],12,1200080426),f=c(f,a,e,u,n[v+6],17,-1473231341),u=c(u,f,a,e,n[v+7],22,-45705983),e=c(e,u,f,a,n[v+8],7,1770035416),a=c(a,e,u,f,n[v+9],12,-1958414417),f=c(f,a,e,u,n[v+10],17,-42063),u=c(u,f,a,e,n[v+11],22,-1990404162),e=c(e,u,f,a,n[v+12],7,1804603682),a=c(a,e,u,f,n[v+13],12,-40341101),f=c(f,a,e,u,n[v+14],17,-1502002290),e=i(e,u=c(u,f,a,e,n[v+15],22,1236535329),f,a,n[v+1],5,-165796510),a=i(a,e,u,f,n[v+6],9,-1069501632),f=i(f,a,e,u,n[v+11],14,643717713),u=i(u,f,a,e,n[v],20,-373897302),e=i(e,u,f,a,n[v+5],5,-701558691),a=i(a,e,u,f,n[v+10],9,38016083),f=i(f,a,e,u,n[v+15],14,-660478335),u=i(u,f,a,e,n[v+4],20,-405537848),e=i(e,u,f,a,n[v+9],5,568446438),a=i(a,e,u,f,n[v+14],9,-1019803690),f=i(f,a,e,u,n[v+3],14,-187363961),u=i(u,f,a,e,n[v+8],20,1163531501),e=i(e,u,f,a,n[v+13],5,-1444681467),a=i(a,e,u,f,n[v+2],9,-51403784),f=i(f,a,e,u,n[v+7],14,1735328473),e=h(e,u=i(u,f,a,e,n[v+12],20,-1926607734),f,a,n[v+5],4,-378558),a=h(a,e,u,f,n[v+8],11,-2022574463),f=h(f,a,e,u,n[v+11],16,1839030562),u=h(u,f,a,e,n[v+14],23,-35309556),e=h(e,u,f,a,n[v+1],4,-1530992060),a=h(a,e,u,f,n[v+4],11,1272893353),f=h(f,a,e,u,n[v+7],16,-155497632),u=h(u,f,a,e,n[v+10],23,-1094730640),e=h(e,u,f,a,n[v+13],4,681279174),a=h(a,e,u,f,n[v],11,-358537222),f=h(f,a,e,u,n[v+3],16,-722521979),u=h(u,f,a,e,n[v+6],23,76029189),e=h(e,u,f,a,n[v+9],4,-640364487),a=h(a,e,u,f,n[v+12],11,-421815835),f=h(f,a,e,u,n[v+15],16,530742520),e=l(e,u=h(u,f,a,e,n[v+2],23,-995338651),f,a,n[v],6,-198630844),a=l(a,e,u,f,n[v+7],10,1126891415),f=l(f,a,e,u,n[v+14],15,-1416354905),u=l(u,f,a,e,n[v+5],21,-57434055),e=l(e,u,f,a,n[v+12],6,1700485571),a=l(a,e,u,f,n[v+3],10,-1894986606),f=l(f,a,e,u,n[v+10],15,-1051523),u=l(u,f,a,e,n[v+1],21,-2054922799),e=l(e,u,f,a,n[v+8],6,1873313359),a=l(a,e,u,f,n[v+15],10,-30611744),f=l(f,a,e,u,n[v+6],15,-1560198380),u=l(u,f,a,e,n[v+13],21,1309151649),e=l(e,u,f,a,n[v+4],6,-145523070),a=l(a,e,u,f,n[v+11],10,-1120210379),f=l(f,a,e,u,n[v+2],15,718787259),u=l(u,f,a,e,n[v+9],21,-343485551),e=o(e,s),u=o(u,d),f=o(f,p),a=o(a,g)}return[e,u,f,a]}function u(n){if(0===n.length)return[];for(var r=8*n.length,e=new Uint32Array(t(r)),u=0;u<r;u+=8)e[u>>5]|=(255&n[u/8])<<u%32;return e}function o(n,r){var t=(65535&n)+(65535&r);return(n>>16)+(r>>16)+(t>>16)<<16|65535&t}function f(n,r){return n<<r|n>>>32-r}function a(n,r,t,e,u,a){return o(f(o(o(r,n),o(e,a)),u),t)}function c(n,r,t,e,u,o,f){return a(r&t|~r&e,n,r,u,o,f)}function i(n,r,t,e,u,o,f){return a(r&e|t&~e,n,r,u,o,f)}function h(n,r,t,e,u,o,f){return a(r^t^e,n,r,u,o,f)}function l(n,r,t,e,u,o,f){return a(t^(r|~e),n,r,u,o,f)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var v=n;exports.default=v;
},{}],"vJdu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./v35.js")),r=t(require("./md5.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)("v3",48,r.default),d=u;exports.default=d;
},{"./v35.js":"Y6ie","./md5.js":"bGV3"}],"K7Zs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./rng.js")),r=t(require("./bytesToUuid.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u,o){var a=(t=t||{}).random||(t.rng||e.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,u){o=o||0;for(var d=0;d<16;++d)u[o+d]=a[d];return u}return(0,r.default)(a)}var o=u;exports.default=o;
},{"./rng.js":"gKk3","./bytesToUuid.js":"jqeo"}],"MvYZ":[function(require,module,exports) {
"use strict";function r(r,e,t,a){switch(r){case 0:return e&t^~e&a;case 1:return e^t^a;case 2:return e&t^e&a^t&a;case 3:return e^t^a}}function e(r,e){return r<<e|r>>>32-e}function t(t){var a=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var o=unescape(encodeURIComponent(t));t=[];for(var f=0;f<o.length;++f)t.push(o.charCodeAt(f))}t.push(128);for(var u=t.length/4+2,s=Math.ceil(u/16),c=new Array(s),v=0;v<s;++v){for(var h=new Uint32Array(16),i=0;i<16;++i)h[i]=t[64*v+4*i]<<24|t[64*v+4*i+1]<<16|t[64*v+4*i+2]<<8|t[64*v+4*i+3];c[v]=h}c[s-1][14]=8*(t.length-1)/Math.pow(2,32),c[s-1][14]=Math.floor(c[s-1][14]),c[s-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<s;++l){for(var p=new Uint32Array(80),d=0;d<16;++d)p[d]=c[l][d];for(var g=16;g<80;++g)p[g]=e(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var w=n[0],y=n[1],M=n[2],A=n[3],x=n[4],U=0;U<80;++U){var C=Math.floor(U/20),_=e(w,5)+r(C,y,M,A)+x+a[C]+p[U]>>>0;x=A,A=M,M=e(y,30)>>>0,y=w,w=_}n[0]=n[0]+w>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+M>>>0,n[3]=n[3]+A>>>0,n[4]=n[4]+x>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t;exports.default=a;
},{}],"K2oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./v35.js")),r=t(require("./sha1.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)("v5",80,r.default),s=u;exports.default=s;
},{"./v35.js":"Y6ie","./sha1.js":"MvYZ"}],"UeUD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"v4",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"v5",{enumerable:!0,get:function(){return u.default}});var e=n(require("./v1.js")),r=n(require("./v3.js")),t=n(require("./v4.js")),u=n(require("./v5.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./v1.js":"qgnI","./v3.js":"vJdu","./v4.js":"K7Zs","./v5.js":"K2oB"}],"Tt56":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openApp=n;var e=require("uuid");function n(n,o,i){const t=o.name,p=o.icon,c=(0,e.v4)(),d=document.createElement("tileos-app");d.name=t,d.id=c,d.options=i,"love-handle"===t&&(d.fen=n.fen),d.addEventListener("click",()=>{n.focus=d.id}),n.appendChild(d),n.open=[...n.open,{id:c,name:t,icon:p}],n.focus=c}
},{"uuid":"UeUD"}],"tCrM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileosFs=void 0;class n{constructor(n,e){this.name=n,this.nodes=e}}class e{constructor(n,e){this.name=n,this.content=e}}class t{constructor(n){this.tree=n,this.crumbs=[n]}ls(){const[e]=this.crumbs.slice(-1),t=[];if(e instanceof n)for(let i of e.nodes)i instanceof n?t.push({name:i.name,type:"directory"}):t.push({name:i.name,type:"file"});return ok(t)}pwd(){return ok(this.crumbs.map(n=>n.name).join("/"))}cd(n){for(let e of n.split("/"))".."===e?this._fsUp():this._fsTo(e);return ok("")}readFile(n){let t=0;for(let e of n.split("/"))".."===e?(this._fsUp(),t--):(this._fsTo(e),t++);const[i]=this.crumbs.slice(-1);for(let e=0;e<t;e++)this._fsUp();return i instanceof e?i.content:""}writeFile(n,t){let i=0;for(let e of n.split("/"))".."===e?(this._fsUp(),i--):(this._fsTo(e),i++);const[s]=this.crumbs.slice(-1);for(let e=0;e<i;e++)this._fsUp();s instanceof e&&(s.content=t)}_fsUp(){return this.crumbs.length>1&&this.crumbs.pop(),this}_fsTo(n){const[t]=this.crumbs.slice(-1);if(t instanceof e)return this;const i=t.nodes,s=i.findIndex(e=>e.name==n);return s<0?this:(this.crumbs.push(i[s]),this)}}const i="Congratulations on acquiring your new TileOS computer!\nEvery TileOS system comes pre-loaded with TileOS Lisp,\na simple programming language that you can use to\nautomate your system. This program is available through\nthe command line using the `repl` command.\n\nThe latest release of TileOS Lisp is version 0.8.3. In\nthis version, you have access to the following constructs:\n\n Syntax                  | Explanation\n-------------------------+------------------------------\n; hello world            | Comments (until end of line)\n-------------------------+------------------------------\n-1.5                     | Floating point numbers\n-------------------------+------------------------------\n\"hello!\"                 | Strings\n-------------------------+------------------------------\n(+ 1 2.0 -33)            | Add up any set of numbers!\n-------------------------+------------------------------\n(lambda (x) (+ x 1))     | Define functions using the\n                         | lambda keyword, which creates\n                         | an anonymous function that\n                         | takes the specified list of\n                         | arguments and evaluates them\n                         | in the given expression.\n-------------------------+------------------------------\n((lambda (x) x) 5)       | Apply the given arguments to\n                         | a function.\n-------------------------+------------------------------\n(quote (1 2 3))          | Capture the input without\n                         | evaluation (in this case, the\n                         | list (1 2 3)).\n-------------------------+------------------------------\n(list 1 2 3)             | Construct a list out of the\n                         | arguments\n-------------------------+------------------------------\n(car (list 1 2))         | Take the first element from a\n                         | list (e.g. 1).\n-------------------------+------------------------------\n(cdr (list 1 2))         | Take the given list minus the\n                         | first element (e.g. (list 2))\n-------------------------+------------------------------\n(defun (f x) (+ x 1))    | Define a named function, with\n                         | the possibility of making it\n                         | recursive.\n-------------------------+------------------------------\n(f 1 2 3)                | Call a function 'f' with 3\n                         | arguments\n-------------------------+------------------------------\n(move d6 d8)             | Access deep integration with\n                         | TileOS chess using the\n                         | built-in move command, which\n                         | gives you the ability to play\n                         | up to one instance of chess\n                         | programatically!\n-------------------------+------------------------------\n(eigenjunior fen)        | Set the FEN for the built-in\n                         | TileOS chess board. Use this\n                         | to change the board layout.\n                         | There should be some fun ones\n                         | around, but I seem to have\n                         | misplaced them...\n\nAt the top-level of your file, you can only write one\nexpression. If you want to combine multiple expressions,\ntry the following:\n\n  (begin\n    (defun (f x) (+ x 1))     ; Multiple\n    (defun (g x) (+ (f x) 1)) ; Definitions\n    (g 1))\n\n-------------------------[!!!]-----------------------------\n\nNew in this release: 'defun' now allows for recursive\nfunctions, simply by calling the function name in its body!\n\n-------------------------[!!!]-----------------------------\n\nMore features are available if you purchase TileOS Service\nPack 3! Mail a check for $50.00 to us and you'll receive a\nfloppy disk containing new features such as: defining\nvariables, loops, and multiplication!\n\nTileOS™ Corporation\n1950 Random Rd\nAtlanta, GA 30313\n\nP.S\nfree token for you -> #4 8/8/8/7q/7r/8/5K2/4n3 b - - 0 1\n",s=new t(new n("root",[new e("file-1","hi there"),new e("file-2","i'm good, wbu?"),new n("more-files",[new e("file-3","this is my english homework"),new e("file-5","neato burito `ferb` is a secret command. run it!!"),new e("manual",i),new n("rescue-me",[new e("file-6","hi there again")])]),new e("file-4","wbu?")]));exports.tileosFs=s;
},{}],"qgyj":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Start=void 0;var n=require("hybrids"),t=require("../tileos"),e=require("../taskManager"),o=require("../fs");function i(){const n=l(['\n                <div\n                    id="start"\n                    style="visibility: ','; height: 100%;"\n                >\n                    <div id="status">\n                        <div id="os-text">\n                            TileOS &trade;\n                        </div>\n                    </div>\n                    <div class="container">\n                        <div class="explorer">\n                            ','\n                        </div>\n                        <div class="essentials">\n                            ','\n                        </div>\n                        <div class="apps">\n                            ',"\n                        </div>\n                    </div>\n                </div>\n            "]);return i=function(){return n},n}function c(){const n=l(["\n                        <div\n                            id=","\n                            onclick=",'\n                        >\n                            <img src="','" />\n                            <span class="name">',"</span>\n                        </div>\n                    "]);return c=function(){return n},n}function r(){const n=l(['\n                    <div class="neato" id=',">","</div>\n                "]);return r=function(){return n},n}function s(){const n=l(["\n        ","\n    "]);return s=function(){return n},n}function a(){const n=l(['\n                        <li class="parent">\n                            <div>\n                                <img src=',' />\n                                <span class="name">',"</span>\n                                <span>&gt;</span>\n                            </div>\n                            ","\n                        </li>\n                    "]);return a=function(){return n},n}function u(){const n=l(["\n                        <li onclick=",'>\n                            <div class="name">\n                                <img src='," />\n                                ","\n                            </div>\n                        </li>\n                    "]);return u=function(){return n},n}function d(){const n=l(["\n        <ul>\n            ","\n        </ul>\n    "]);return d=function(){return n},n}function l(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function p(t){return(0,n.html)(d(),t.map(t=>{let{name:e,icon:o,children:i}=t;return"function"==typeof i?(0,n.html)(u(),i,o,e):(0,n.html)(a(),o,e,p(i))}))}function m(){const t="i shall be victor for no dare will defeat me i like haikus too 💖 💮".split(" ");return(0,n.html)(s(),t.map((t,e)=>(0,n.html)(r(),"essentials-"+e,t)))}const h={store:(0,n.parent)(t.BabySharkDoDoDoDo),render:(0,n.render)(t=>{let{store:r}=t;const{showStartMenu:s,registered:a}=r;const u=n=>n.nodes.map(n=>{const{name:t}=n;return n.content?{name:t,icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimg.icons8.com%2Fcotton%2F2x%2Fdocument.png&f=1&nofb=1",children:()=>{(0,e.openApp)(r,{name:"doof-pad"},{content:n.content}),r.showStartMenu=!1}}:{name:t,icon:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Ficons.iconarchive.com%2Ficons%2Fwilnichols%2Falumin-folders%2F512%2FBurn-Metal-Folder-icon.png&f=1&nofb=1",children:u(n)}}),d=[{name:"programs",icon:"https://cdn3.iconfinder.com/data/icons/common-apps-1/1024/folder-512.png",children:a.map(n=>{let{name:t,icon:o}=n;return{name:t,icon:o,children:()=>{(0,e.openApp)(r,{name:t,icon:o}),r.showStartMenu=!1}}})},{name:"documents",icon:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Ficons.iconarchive.com%2Ficons%2Fwilnichols%2Falumin-folders%2F512%2FBurn-Metal-Folder-icon.png&f=1&nofb=1",children:u(o.tileosFs.tree)},{name:"there",icon:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fcdn130.picsart.com%2F258778191001212.png&f=1&nofb=1",children:[{name:"nanda",icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.ytimg.com%2Fvi%2F1YR16fsYib4%2Fmaxresdefault.jpg&f=1&nofb=1",children:()=>window.alert("do you like anime?")},{name:"are",icon:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fcdn130.picsart.com%2F258778191001212.png&f=1&nofb=1",children:[{name:"korewa",icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.ytimg.com%2Fvi%2FRa1S4HWNzak%2Fmaxresdefault.jpg&f=1&nofb=1",children:()=>window.alert("what about phineas and ferb?")},{name:"hints",icon:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fcdn130.picsart.com%2F258778191001212.png&f=1&nofb=1",children:[{name:"tsk",icon:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.ytimg.com%2Fvi%2FrMyw6IW_lQE%2Fmaxresdefault.jpg&f=1&nofb=1",children:()=>window.alert("roku?")},{name:"here",icon:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/face-with-open-mouth_1f62e.png",children:()=>window.open("https://1ntegr8.github.io/pronkz/")}]}]}]}];return(0,n.html)(i(),s?"visible":"hidden",p(d),m(),function(t){return t.map((t,o)=>{let{name:i,icon:s}=t;return(0,n.html)(c(),"apps-"+o,()=>{(0,e.openApp)(r,{name:i,icon:s}),r.showStartMenu=!1},s,i)})}(a))},{shadowRoot:!1})};exports.Start=h,(0,n.define)("tileos-start-menu",h);
},{"hybrids":"C9y0","../tileos":"tZuy","../taskManager":"Tt56","../fs":"tCrM"}],"H8wq":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Desktop=void 0;var e=require("hybrids"),r=require("../tileos"),t=require("../taskManager");function n(){const e=i(["\n        ","\n    "]);return n=function(){return e},e}function o(){const e=i(["\n                <tileos-icon name="," icon="," ondblclick=","></tileos-icon>\n            "]);return o=function(){return e},e}function i(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}const s=r=>r.map(r=>{let{name:n,icon:i}=r;return(0,e.html)(o(),n,i,e=>(0,t.openApp)(e.store,{name:n,icon:i}))}),c={store:(0,e.parent)(r.BabySharkDoDoDoDo),render:r=>{let{store:{registered:t}}=r;return(0,e.html)(n(),s(t))}};exports.Desktop=c,(0,e.define)("tileos-desktop",c);
},{"hybrids":"C9y0","../tileos":"tZuy","../taskManager":"Tt56"}],"kWw4":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Icon=void 0;var n=require("hybrids");function e(){const n=i(["\n    <style>\n        :host {\n            display: block;\n            width: max-content;\n        }\n\n        :host > div {\n            height: 64px;\n            width: 64px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-direction: column;\n        }\n\n        :host > div:hover {\n            opacity: 0.7;\n            outline: 1px black solid;\n            cursor: pointer;\n        }\n\n        span {\n            font-size: 0.75rem;\n        }\n\n        img {\n            height: 40px;\n        }\n    </style>\n"]);return e=function(){return n},n}function t(){const n=i(["\n        ",'\n        <div>\n            <img src="','" draggable="false" />\n            <span>',"</span>\n        </div>\n    "]);return t=function(){return n},n}function i(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const o={name:"[no-name]",icon:"[no-icon]",render:e=>{let{icon:i,name:o}=e;return(0,n.html)(t(),r,i,o)}};exports.Icon=o;const r=(0,n.html)(e());(0,n.define)("tileos-icon",o),(0,n.define)("tileos-icon",o);
},{"hybrids":"C9y0"}],"xgLn":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;var e=require("hybrids");function n(){const e=t(["\n                <tileos-app-header\n                    name=","\n                    class=",'\n                ></tileos-app-header>\n                <div class="app-container">\n                </div>\n            ']);return n=function(){return e},e}function t(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}const r={options:void 0,name:{observe:(e,n)=>{const t=document.createElement(n);t.options=e.options,e.fen&&t.setAttribute("data-fen",e.fen),e.appContainer.appendChild(t)}},appContainer:e=>{let{render:n}=e;return n().querySelector(".app-container")},focus:{observe:(e,n)=>{e.style.zIndex=n?1e3:900}},render:(0,e.render)(t=>{let{name:r,focus:o}=t;return(0,e.html)(n(),r,o&&"focus")},{shadowRoot:!1})};exports.App=r,(0,e.define)("tileos-app",r);
},{"hybrids":"C9y0"}],"bDT4":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var e=require("hybrids"),t=require("../tileos");function n(){const e=o(['\n            <div class="app-name">','</div>\n            <div style="display: flex;">\n                <button aria-label="Minimize" onclick=','></button>\n                <button aria-label="Close" onclick=',"></button>\n            </div>\n        "]);return n=function(){return e},e}function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function r(e,t){t.stopPropagation(),e.parentNode.style.display="none",e.store.focus=void 0}function i(e){const t=e.parentNode.id;e.store.open=e.store.open.filter(t=>{let{id:n}=t;return n!==e.parentNode.id}),e.store.querySelector('[id="'.concat(t,'"]')).remove()}const a={name:"[no-name]",store:(0,e.parent)(t.BabySharkDoDoDoDo),render:(0,e.render)(t=>{let{name:o}=t;return(0,e.html)(n(),o,r,i)},{shadowRoot:!1})};exports.Header=a,(0,e.define)("tileos-app-header",a);
},{"hybrids":"C9y0","../tileos":"tZuy"}],"qao1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ls=o,exports.pwd=c,exports.cd=u,exports.clear=i,exports.exit=l;var e=require("hybrids"),r=require("../index");function s(){const e=n(['\n            <span class="wd">',"</span>\n        "]);return s=function(){return e},e}function t(){const e=n(['\n                    <span class="','">',"</span>\n                "]);return t=function(){return e},e}function n(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function o(r){const{result:s,err:n}=r.fs.ls();return n||ok(s.map(r=>{let{name:s,type:n}=r;return(0,e.html)(t(),n,s)}))}function c(r){const{result:t,err:n}=r.fs.pwd();return n||ok((0,e.html)(s(),t))}function u(e,r){const{result:s,err:t}=e.fs.cd(r[1]);return t||ok(s)}function i(e){return e.results=[],ok("")}function l(e){if(!e.process.firstElementChild)return err("there is no process running");for(;e.process.firstChild;)e.process.removeChild(e.process.lastChild);e.process.style.display="none";const s=(0,r.getProcessCommand)("post");if(s){const r=s(e);return r.err?r.err:ok(r.result+" + exited successfully")}return(0,r.resetProcessCommands)(),ok("exited successfully")}
},{"hybrids":"C9y0","../index":"WKyi"}],"IwFA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.state=void 0;const t=document.querySelector("tileos-is-the-best"),e=["10","disaster","7","vista","xp","95"],s=[()=>{t.setAttribute("data-theme","95"),a("1r6/8/8/8/8/q7/4nK2/8 b - - 0 1")},()=>{t.setAttribute("data-theme","xp")},()=>{t.setAttribute("data-theme","vista")},()=>{t.setAttribute("data-theme","7")},()=>{t.setAttribute("data-theme","disaster")},()=>{t.setAttribute("data-theme","10")},()=>{window.state=s}];function a(e){t.fen=e,document.body.dispatchEvent(new CustomEvent("fen",{detail:e}))}exports.state=s;let d=[];document.body.addEventListener("aweirdevent",i=>{const n=e.length-1;e[n]===t.getAttribute("data-theme")&&(s[s.length-e.length](),a(i.detail),d.push(i.detail),e.pop(),window.geiger-=1),e.length});
},{}],"QpaB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ferb=s;var e=require("hybrids"),t=require("../../../state");function r(){const e=n(['\n        <h1>OHHHH YEAAA</h1>\n        <p>\n            special string #0 ->\n            <span style="color: #ff57ae;">"3r1q2/8/8/8/8/6n1/5K2/8 b - - 0 1"</span>\n        </p>\n    ']);return r=function(){return e},e}function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function s(){return t.state[1](),setTimeout(()=>{t.state[0]()},2e3),ok((0,e.html)(r()))}
},{"hybrids":"C9y0","../../../state":"IwFA"}],"e7zg":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof e&&e.amd?e(r):(t=t||self).CodeMirror=r()}(this,function(){"use strict";var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),l=n||i||o,s=l&&(n?document.documentMode||6:+(o||i)[1]),a=!o&&/WebKit\//.test(e),u=a&&/Qt\/\d+\.\d+/.test(e),c=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),f=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),v=/Android/.test(e),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),x=h&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(h=!1,a=!0);var C=y&&(u||h&&(null==x||x<12.11)),S=r||l&&s>=9;function L(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var k,T=function(e,t){var r=e.className,n=L(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function N(e,t){return M(e).appendChild(t)}function A(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function O(e,t,r,n){var i=A(e,t,r,n);return i.setAttribute("role","presentation"),i}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function W(){var e;try{e=document.activeElement}catch(De){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function H(e,t){var r=e.className;L(t).test(r)||(e.className+=(r?" ":"")+t)}function F(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!L(r[n]).test(t)&&(t+=" "+r[n]);return t}k=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(De){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var P=function(e){e.select()};function E(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function R(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,l=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}}g?P=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:l&&(P=function(e){try{e.select()}catch(t){}});var z=function(){this.id=null,this.f=null,this.time=0,this.handler=E(this.onTimeout,this)};function B(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}z.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},z.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};var G=50,U={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},K={origin:"*mouse"},j={origin:"+move"};function X(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,n=o+1,(i+=r-i%r)>=t)return n}}var Y=[""];function _(e){for(;Y.length<=e;)Y.push($(Y)+" ");return Y[e]}function $(e){return e[e.length-1]}function q(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Z(){}function Q(e,t){var r;return Object.create?r=Object.create(e):(Z.prototype=e,r=new Z),t&&I(t,r),r}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function re(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&ne.test(e)}function oe(e,t,r){for(;(r<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=r;return t}function le(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+n}}var se=null;function ae(e,t,r){var n;se=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==r?n=i:se=i),o.from==t&&(o.from!=o.to&&"before"!=r?n=i:se=i)}return null!=n?n:se}var ue=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,l=/[1n]/;function s(e,t,r){this.level=e,this.from=t,this.to=r}return function(a,u){var c="ltr"==u?"L":"R";if(0==a.length||"ltr"==u&&!r.test(a))return!1;for(var h,f=a.length,d=[],p=0;p<f;++p)d.push((h=a.charCodeAt(p))<=247?e.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?t.charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L");for(var g=0,v=c;g<f;++g){var m=d[g];"m"==m?d[g]=v:v=m}for(var y=0,b=c;y<f;++y){var w=d[y];"1"==w&&"r"==b?d[y]="n":i.test(w)&&(b=w,"r"==w&&(d[y]="R"))}for(var x=1,C=d[0];x<f-1;++x){var S=d[x];"+"==S&&"1"==C&&"1"==d[x+1]?d[x]="1":","!=S||C!=d[x+1]||"1"!=C&&"n"!=C||(d[x]=C),C=S}for(var L=0;L<f;++L){var k=d[L];if(","==k)d[L]="N";else if("%"==k){var T=void 0;for(T=L+1;T<f&&"%"==d[T];++T);for(var M=L&&"!"==d[L-1]||T<f&&"1"==d[T]?"1":"N",N=L;N<T;++N)d[N]=M;L=T-1}}for(var A=0,O=c;A<f;++A){var D=d[A];"L"==O&&"1"==D?d[A]="L":i.test(D)&&(O=D)}for(var W=0;W<f;++W)if(n.test(d[W])){var H=void 0;for(H=W+1;H<f&&n.test(d[H]);++H);for(var F="L"==(W?d[W-1]:c),P=F==("L"==(H<f?d[H]:c))?F?"L":"R":c,E=W;E<H;++E)d[E]=P;W=H-1}for(var I,R=[],z=0;z<f;)if(o.test(d[z])){var B=z;for(++z;z<f&&o.test(d[z]);++z);R.push(new s(0,B,z))}else{var G=z,U=R.length,V="rtl"==u?1:0;for(++z;z<f&&"L"!=d[z];++z);for(var K=G;K<z;)if(l.test(d[K])){G<K&&(R.splice(U,0,new s(1,G,K)),U+=V);var j=K;for(++K;K<z&&l.test(d[K]);++K);R.splice(U,0,new s(2,j,K)),U+=V,G=K}else++K;G<z&&R.splice(U,0,new s(1,G,z))}return"ltr"==u&&(1==R[0].level&&(I=a.match(/^\s+/))&&(R[0].from=I[0].length,R.unshift(new s(0,0,I[0].length))),1==$(R).level&&(I=a.match(/\s+$/))&&($(R).to-=I[0].length,R.push(new s(0,f-I[0].length,f)))),"rtl"==u?R.reverse():R}}();function ce(e,t){var r=e.order;return null==r&&(r=e.order=ue(e.text,t)),r}var he=[],fe=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||he).concat(r)}};function de(e,t){return e._handlers&&e._handlers[t]||he}function pe(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=B(i,r);o>-1&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function ge(e,t){var r=de(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function ve(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ge(e,r||t.type,e,t),Ce(t)||t.codemirrorIgnore}function me(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==B(r,t[n])&&r.push(t[n])}function ye(e,t){return de(e,t).length>0}function be(e){e.prototype.on=function(e,t){fe(this,e,t)},e.prototype.off=function(e,t){pe(this,e,t)}}function we(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function xe(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ce(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Se(e){we(e),xe(e)}function Le(e){return e.target||e.srcElement}function ke(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var Te,Me,Ne=function(){if(l&&s<9)return!1;var e=A("div");return"draggable"in e||"dragDrop"in e}();function Ae(e){if(null==Te){var t=A("span","​");N(e,A("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Te=t.offsetWidth<=1&&t.offsetHeight>2&&!(l&&s<8))}var r=Te?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Oe(e){if(null!=Me)return Me;var t=N(e,document.createTextNode("AخA")),r=k(t,0,1).getBoundingClientRect(),n=k(t,1,2).getBoundingClientRect();return M(e),!(!r||r.left==r.right)&&(Me=n.right-r.right<3)}var De,We=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},He=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(De){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(De){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Fe="oncopy"in(De=A("div"))||(De.setAttribute("oncopy","return;"),"function"==typeof De.oncopy),Pe=null;var Ee={},Ie={};function Re(e){if("string"==typeof e&&Ie.hasOwnProperty(e))e=Ie[e];else if(e&&"string"==typeof e.name&&Ie.hasOwnProperty(e.name)){var t=Ie[e.name];"string"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Re("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Re("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function ze(e,t){t=Re(t);var r=Ee[t.name];if(!r)return ze(e,"text/plain");var n=r(e,t);if(Be.hasOwnProperty(t.name)){var i=Be[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var l in t.modeProps)n[l]=t.modeProps[l];return n}var Be={};function Ge(e,t){I(t,Be.hasOwnProperty(e)?Be[e]:Be[e]={})}function Ue(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Ve(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Ke(e,t,r){return!e.startState||e.startState(t,r)}var je=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};function Xe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function Ye(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function _e(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function $e(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function qe(e){if(null==e.parent)return null;for(var t=e.parent,r=B(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Ze(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var l=0;l<e.lines.length;++l){var s=e.lines[l].height;if(t<s)break;t-=s}return r+l}function Qe(e,t){return t>=e.first&&t<e.first+e.size}function Je(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,r){if(void 0===r&&(r=null),!(this instanceof et))return new et(e,t,r);this.line=e,this.ch=t,this.sticky=r}function tt(e,t){return e.line-t.line||e.ch-t.ch}function rt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function nt(e){return et(e.line,e.ch)}function it(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function lt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function st(e,t){if(t.line<e.first)return et(e.first,0);var r=e.first+e.size-1;return t.line>r?et(r,Xe(e,r).text.length):function(e,t){var r=e.ch;return null==r||r>t?et(e.line,t):r<0?et(e.line,0):e}(t,Xe(e,t.line).text.length)}function at(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=st(e,t[n]);return r}je.prototype.eol=function(){return this.pos>=this.string.length},je.prototype.sol=function(){return this.pos==this.lineStart},je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},je.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},je.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},je.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},je.prototype.skipToEnd=function(){this.pos=this.string.length},je.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},je.prototype.backUp=function(e){this.pos-=e},je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},je.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},je.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},je.prototype.current=function(){return this.string.slice(this.start,this.pos)},je.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},je.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},je.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ut=function(e,t){this.state=e,this.lookAhead=t},ct=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function ht(e,t,r,n){var i=[e.state.modeGen],o={};wt(e,t.text,e.doc.mode,r,function(e,t){return i.push(e,t)},o,n);for(var l=r.state,s=function(n){r.baseTokens=i;var s=e.state.overlays[n],a=1,u=0;r.state=!0,wt(e,t.text,s.mode,r,function(e,t){for(var r=a;u<e;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,"overlay "+t),a=r+2;else for(;r<a;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"overlay "+t}},o),r.state=l,r.baseTokens=null,r.baseTokenPos=1},a=0;a<e.state.overlays.length;++a)s(a);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ft(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=dt(e,qe(t)),i=t.text.length>e.options.maxHighlightLength&&Ue(e.doc.mode,n.state),o=ht(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function dt(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new ct(n,!0,t);var o=function(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=Xe(o,s-1),u=a.stateAfter;if(u&&(!r||s+(u instanceof ut?u.lookAhead:0)<=o.modeFrontier))return s;var c=R(a.text,null,e.options.tabSize);(null==i||n>c)&&(i=s-1,n=c)}return i}(e,t,r),l=o>n.first&&Xe(n,o-1).stateAfter,s=l?ct.fromSaved(n,l,o):new ct(n,Ke(n.mode),o);return n.iter(o,t,function(r){pt(e,r.text,s);var n=s.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?s.save():null,s.nextLine()}),r&&(n.modeFrontier=s.line),s}function pt(e,t,r,n){var i=e.doc.mode,o=new je(t,e.options.tabSize,r);for(o.start=o.pos=n||0,""==t&&gt(i,r.state);!o.eol();)vt(i,o,r.state),o.start=o.pos}function gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Ve(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function vt(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Ve(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ct.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ct.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ct.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ct.fromSaved=function(e,t,r){return t instanceof ut?new ct(e,Ue(e.mode,t.state),r,t.lookAhead):new ct(e,Ue(e.mode,t),r)},ct.prototype.save=function(e){var t=!1!==e?Ue(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ut(t,this.maxLookAhead):t};var mt=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function yt(e,t,r,n){var i,o,l=e.doc,s=l.mode,a=Xe(l,(t=st(l,t)).line),u=dt(e,t.line,r),c=new je(a.text,e.options.tabSize,u);for(n&&(o=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=vt(s,c,u.state),n&&o.push(new mt(c,i,Ue(l.mode,u.state)));return n?o:new mt(c,i,u.state)}function bt(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+r[2])}return e}function wt(e,t,r,n,i,o,l){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,u=0,c=null,h=new je(t,e.options.tabSize,n),f=e.options.addModeClass&&[null];for(""==t&&bt(gt(r,n.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(s=!1,l&&pt(e,t,n,h.pos),h.pos=t.length,a=null):a=bt(vt(r,h,n.state,f),o),f){var d=f[0].name;d&&(a="m-"+(a?d+" "+a:d))}if(!s||c!=a){for(;u<h.start;)i(u=Math.min(h.start,u+5e3),c);c=a}h.start=h.pos}for(;u<h.pos;){var p=Math.min(h.pos,u+5e3);i(p,c),u=p}}var xt=!1,Ct=!1;function St(e,t,r){this.marker=e,this.from=t,this.to=r}function Lt(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function kt(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Tt(e,t){if(t.full)return null;var r=Qe(e,t.from.line)&&Xe(e,t.from.line).markedSpans,n=Qe(e,t.to.line)&&Xe(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==tt(t.from,t.to),s=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new St(l,o.from,s?null:o.to))}}return n}(r,i,l),a=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new St(l,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,l),u=1==t.text.length,c=$(t.text).length+(u?i:0);if(s)for(var h=0;h<s.length;++h){var f=s[h];if(null==f.to){var d=Lt(a,f.marker);d?u&&(f.to=null==d.to?null:d.to+c):f.to=i}}if(a)for(var p=0;p<a.length;++p){var g=a[p];if(null!=g.to&&(g.to+=c),null==g.from)Lt(s,g.marker)||(g.from=c,u&&(s||(s=[])).push(g));else g.from+=c,u&&(s||(s=[])).push(g)}s&&(s=Mt(s)),a&&a!=s&&(a=Mt(a));var v=[s];if(!u){var m,y=t.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(m||(m=[])).push(new St(s[b].marker,null,null));for(var w=0;w<y;++w)v.push(m);v.push(a)}return v}function Mt(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Nt(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function At(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Ot(e){return e.inclusiveLeft?-1:0}function Dt(e){return e.inclusiveRight?1:0}function Wt(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=tt(n.from,i.from)||Ot(e)-Ot(t);if(o)return-o;var l=tt(n.to,i.to)||Dt(e)-Dt(t);return l||t.id-e.id}function Ht(e,t){var r,n=Ct&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Wt(r,i.marker)<0)&&(r=i.marker);return r}function Ft(e){return Ht(e,!0)}function Pt(e){return Ht(e,!1)}function Et(e,t){var r,n=Ct&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!r||Wt(r,o.marker)<0)&&(r=o.marker)}return r}function It(e,t,r,n,i){var o=Xe(e,t),l=Ct&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=tt(u.from,r)||Ot(a.marker)-Ot(i),h=tt(u.to,n)||Dt(a.marker)-Dt(i);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?tt(u.to,r)>=0:tt(u.to,r)>0)||c>=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?tt(u.from,n)<=0:tt(u.from,n)<0)))return!0}}}function Rt(e){for(var t;t=Ft(e);)e=t.find(-1,!0).line;return e}function zt(e,t){var r=Xe(e,t),n=Rt(r);return r==n?t:qe(n)}function Bt(e,t){if(t>e.lastLine())return t;var r,n=Xe(e,t);if(!Gt(e,n))return t;for(;r=Pt(n);)n=r.find(1,!0).line;return qe(n)+1}function Gt(e,t){var r=Ct&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Ut(e,t,n))return!0}}function Ut(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Ut(e,n.line,Lt(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Ut(e,t,i))return!0}function Vt(e){for(var t=0,r=(e=Rt(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;o=(r=o).parent)for(var l=0;l<o.children.length;++l){var s=o.children[l];if(s==r)break;t+=s.height}return t}function Kt(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=Ft(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=Pt(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,r+=(n=o.to.line).text.length-o.to.ch}return r}function jt(e){var t=e.display,r=e.doc;t.maxLine=Xe(r,r.first),t.maxLineLength=Kt(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=Kt(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}var Xt=function(e,t,r){this.text=e,At(this,t),this.height=r?r(this):1};function Yt(e){e.parent=null,Nt(e)}Xt.prototype.lineNo=function(){return qe(this)},be(Xt);var _t={},$t={};function qt(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?$t:_t;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var r=O("span",null,null,a?"padding-right: .1px":null),n={pre:O("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,l=void 0;n.pos=0,n.addToken=Jt,Oe(e.display.measure)&&(l=ce(o,e.doc.direction))&&(n.addToken=er(n.addToken,l)),n.map=[],rr(o,n,ft(e,o,t!=e.display.externalMeasured&&qe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=F(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=F(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ae(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(a){var s=n.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return ge(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=F(n.pre.className,n.textClass||"")),n}function Qt(e){var t=A("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,r,n,i,o,a){if(t){var u,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),n+=o,r=" "==o}return n}(t,e.trailingSpace):t,h=e.cm.state.specialChars,f=!1;if(h.test(t)){u=document.createDocumentFragment();for(var d=0;;){h.lastIndex=d;var p=h.exec(t),g=p?p.index-d:t.length-d;if(g){var v=document.createTextNode(c.slice(d,d+g));l&&s<9?u.appendChild(A("span",[v])):u.appendChild(v),e.map.push(e.pos,e.pos+g,v),e.col+=g,e.pos+=g}if(!p)break;d+=g+1;var m=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(m=u.appendChild(A("span",_(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=u.appendChild(A("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((m=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),l&&s<9?u.appendChild(A("span",[m])):u.appendChild(m),e.col+=1);e.map.push(e.pos,e.pos+1,m),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),l&&s<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),r||n||i||f||o){var w=r||"";n&&(w+=n),i&&(w+=i);var x=A("span",[u],w,o);if(a)for(var C in a)a.hasOwnProperty(C)&&"style"!=C&&"class"!=C&&x.setAttribute(C,a[C]);return e.content.appendChild(x)}e.content.appendChild(u)}}function er(e,t){return function(r,n,i,o,l,s,a){i=i?i+" cm-force-border":"cm-force-border";for(var u=r.pos,c=u+n.length;;){for(var h=void 0,f=0;f<t.length&&!((h=t[f]).to>u&&h.from<=u);f++);if(h.to>=c)return e(r,n,i,o,l,s,a);e(r,n.slice(0,h.to-u),i,o,null,s,a),o=null,n=n.slice(h.to-u),u=h.to}}}function tr(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function rr(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,h,f,d=i.length,p=0,g=1,v="",m=0;;){if(m==p){a=u=c=s="",f=null,h=null,m=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var x=n[w],C=x.marker;if("bookmark"==C.type&&x.from==p&&C.widgetNode)y.push(C);else if(x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&m>x.to&&(m=x.to,u=""),C.className&&(a+=" "+C.className),C.css&&(s=(s?s+";":"")+C.css),C.startStyle&&x.from==p&&(c+=" "+C.startStyle),C.endStyle&&x.to==m&&(b||(b=[])).push(C.endStyle,x.to),C.title&&((f||(f={})).title=C.title),C.attributes)for(var S in C.attributes)(f||(f={}))[S]=C.attributes[S];C.collapsed&&(!h||Wt(h.marker,C)<0)&&(h=x)}else x.from>p&&m>x.from&&(m=x.from)}if(b)for(var L=0;L<b.length;L+=2)b[L+1]==m&&(u+=" "+b[L]);if(!h||h.from==p)for(var k=0;k<y.length;++k)tr(t,0,y[k]);if(h&&(h.from||0)==p){if(tr(t,(null==h.to?d+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(p>=d)break;for(var T=Math.min(d,m);;){if(v){var M=p+v.length;if(!h){var N=M>T?v.slice(0,T-p):v;t.addToken(t,N,l?l+a:a,c,p+N.length==m?u:"",s,f)}if(M>=T){v=v.slice(T-p),p=T;break}p=M,c=""}v=i.slice(o,o=r[g++]),l=qt(r[g++],t.cm.options)}}else for(var A=1;A<r.length;A+=2)t.addToken(t,i.slice(o,o=r[A]),qt(r[A+1],t.cm.options))}function nr(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Pt(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?qe($(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Gt(e,t)}function ir(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new nr(e.doc,Xe(e.doc,o),o);n=o+l.size,i.push(l)}return i}var or=null;var lr=null;function sr(e,t){var r=de(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);or?n=or.delayedCallbacks:lr?n=lr:(n=lr=[],setTimeout(ar,0));for(var o=function(e){n.push(function(){return r[e].apply(null,i)})},l=0;l<r.length;++l)o(l)}}function ar(){var e=lr;lr=null;for(var t=0;t<e.length;++t)e[t]()}function ur(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fr(e,t):"gutter"==o?pr(e,t,r,n):"class"==o?dr(e,t):"widget"==o&&gr(e,t,n)}t.changes=null}function cr(e){return e.node==e.text&&(e.node=A("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),l&&s<8&&(e.node.style.zIndex=2)),e.node}function hr(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Zt(e,t)}function fr(e,t){var r=t.text.className,n=hr(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,dr(e,t)):r&&(t.text.className=r)}function dr(e,t){!function(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=cr(t);t.background=n.insertBefore(A("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?cr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function pr(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=cr(t);t.gutterBackground=A("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var l=cr(t),s=t.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),l.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(A("div",Je(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<e.display.gutterSpecs.length;++a){var u=e.display.gutterSpecs[a].className,c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(A("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[u]+"px; width: "+n.gutterWidth[u]+"px"))}}}function gr(e,t,r){t.alignable&&(t.alignable=null);for(var n=L("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,n.test(i.className)&&t.node.removeChild(i);mr(e,t,r)}function vr(e,t,r,n){var i=hr(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),dr(e,t),pr(e,t,r,n),mr(e,t,n),t.node}function mr(e,t,r){if(yr(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)yr(e,t.rest[n],t,r,!1)}function yr(e,t,r,n,i){if(t.widgets)for(var o=cr(r),l=0,s=t.widgets;l<s.length;++l){var a=s[l],u=A("div",[a.node],"CodeMirror-linewidget"+(a.className?" "+a.className:""));a.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),br(a,u,r,n),e.display.input.setUneditable(u),i&&a.above?o.insertBefore(u,r.gutter||r.text):o.appendChild(u),sr(a,"redraw")}}function br(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function wr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),N(t.display.measure,A("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function xr(e,t){for(var r=Le(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function Cr(e){return e.lineSpace.offsetTop}function Sr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Lr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=N(e.measure,A("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function kr(e){return G-e.display.nativeBarWidth}function Tr(e){return e.display.scroller.clientWidth-kr(e)-e.display.barWidth}function Mr(e){return e.display.scroller.clientHeight-kr(e)-e.display.barHeight}function Nr(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(qe(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ar(e,t,r,n){return Wr(e,Dr(e,t),r,n)}function Or(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[an(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Dr(e,t){var r=qe(t),n=Or(e,r);n&&!n.text?n=null:n&&n.changes&&(ur(e,n,r,rn(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var r=qe(t=Rt(t)),n=e.display.externalMeasured=new nr(e.doc,t,r);n.lineN=r;var i=n.built=Zt(e,n);return n.text=i.pre,N(e.display.lineMeasure,i.pre),n}(e,t));var i=Nr(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Wr(e,t,r,n,i){t.before&&(r=-1);var o,a=r+(n||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,r){var n=e.options.lineWrapping,i=n&&Tr(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,r,n){var i,o=Pr(t.map,r,n),a=o.node,u=o.start,c=o.end,h=o.collapse;if(3==a.nodeType){for(var f=0;f<4;f++){for(;u&&ie(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+c));)++c;if((i=l&&s<9&&0==u&&c==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Er(k(a,u,c).getClientRects(),n)).left||i.right||0==u)break;c=u,u-=1,h="right"}l&&s<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Pe)return Pe;var t=N(e,A("span","x")),r=t.getBoundingClientRect(),n=k(t,0,1).getBoundingClientRect();return Pe=Math.abs(r.left-n.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,i))}else{var d;u>0&&(h=n="right"),i=e.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==n?d.length-1:0]:a.getBoundingClientRect()}if(l&&s<9&&!u&&(!i||!i.left&&!i.right)){var p=a.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+tn(e.display),top:p.top,bottom:p.bottom}:Fr}for(var g=i.top-t.rect.top,v=i.bottom-t.rect.top,m=(g+v)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var w=b?y[b-1]:0,x=y[b],C={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:w,bottom:x};i.left||i.right||(C.bogus=!0);e.options.singleCursorHeightPerLine||(C.rtop=g,C.rbottom=v);return C}(e,t,r,n)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Hr,Fr={left:0,right:0,top:0,bottom:0};function Pr(e,t,r){for(var n,i,o,l,s,a,u=0;u<e.length;u+=3)if(s=e[u],a=e[u+1],t<s?(i=0,o=1,l="left"):t<a?o=(i=t-s)+1:(u==e.length-3||t==a&&e[u+3]>t)&&(i=(o=a-s)-1,t>=a&&(l="right")),null!=i){if(n=e[u+2],s==a&&r==(n.insertLeft?"left":"right")&&(l=r),"left"==r&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)n=e[2+(u-=3)],l="left";if("right"==r&&i==a-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)n=e[(u+=3)+2],l="right";break}return{node:n,start:i,end:o,collapse:l,coverStart:s,coverEnd:a}}function Er(e,t){var r=Fr;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function Ir(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Rr(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ir(e.display.view[t])}function zr(e){Rr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Br(){return c&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Gr(){return c&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ur(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=wr(e.widgets[r]));return t}function Vr(e,t,r,n,i){if(!i){var o=Ur(t);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Vt(t);if("local"==n?l+=Cr(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:Gr());var a=s.left+("window"==n?0:Br());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function Kr(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=Br(),i-=Gr();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function jr(e,t,r,n,i){return n||(n=Xe(e.doc,t.line)),Vr(e,n,Ar(e,n,t.ch,i),r)}function Xr(e,t,r,n,i,o){function l(t,l){var s=Wr(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,Vr(e,n,s,r)}n=n||Xe(e.doc,t.line),i||(i=Dr(e,n));var s=ce(n,e.doc.direction),a=t.ch,u=t.sticky;if(a>=n.text.length?(a=n.text.length,u="before"):a<=0&&(a=0,u="after"),!s)return l("before"==u?a-1:a,"before"==u);function c(e,t,r){return l(r?e-1:e,1==s[t].level!=r)}var h=ae(s,a,u),f=se,d=c(a,h,"before"==u);return null!=f&&(d.other=c(a,f,"before"!=u)),d}function Yr(e,t){var r=0;t=st(e.doc,t),e.options.lineWrapping||(r=tn(e.display)*t.ch);var n=Xe(e.doc,t.line),i=Vt(n)+Cr(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function _r(e,t,r,n,i){var o=et(e,t,r);return o.xRel=i,n&&(o.outside=n),o}function $r(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return _r(n.first,0,null,-1,-1);var i=Ze(n,r),o=n.first+n.size-1;if(i>o)return _r(n.first+n.size-1,Xe(n,o).text.length,null,1,1);t<0&&(t=0);for(var l=Xe(n,i);;){var s=Jr(e,l,i,t,r),a=Et(l,s.ch+(s.xRel>0||s.outside>0?1:0));if(!a)return s;var u=a.find(1);if(u.line==i)return u;l=Xe(n,i=u.line)}}function qr(e,t,r,n){n-=Ur(t);var i=t.text.length,o=le(function(t){return Wr(e,r,t-1).bottom<=n},i,0);return{begin:o,end:i=le(function(t){return Wr(e,r,t).top>n},o,i)}}function Zr(e,t,r,n){return r||(r=Dr(e,t)),qr(e,t,r,Vr(e,t,Wr(e,r,n),"line").top)}function Qr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function Jr(e,t,r,n,i){i-=Vt(t);var o=Dr(e,t),l=Ur(t),s=0,a=t.text.length,u=!0,c=ce(t,e.doc.direction);if(c){var h=(e.options.lineWrapping?function(e,t,r,n,i,o,l){var s=qr(e,t,n,l),a=s.begin,u=s.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,h=null,f=0;f<i.length;f++){var d=i[f];if(!(d.from>=u||d.to<=a)){var p=1!=d.level,g=Wr(e,n,p?Math.min(u,d.to)-1:Math.max(a,d.from)).right,v=g<o?o-g+1e9:g-o;(!c||h>v)&&(c=d,h=v)}}c||(c=i[i.length-1]);c.from<a&&(c={from:a,to:c.to,level:c.level});c.to>u&&(c={from:c.from,to:u,level:c.level});return c}:function(e,t,r,n,i,o,l){var s=le(function(s){var a=i[s],u=1!=a.level;return Qr(Xr(e,et(r,u?a.to:a.from,u?"before":"after"),"line",t,n),o,l,!0)},0,i.length-1),a=i[s];if(s>0){var u=1!=a.level,c=Xr(e,et(r,u?a.from:a.to,u?"after":"before"),"line",t,n);Qr(c,o,l,!0)&&c.top>l&&(a=i[s-1])}return a})(e,t,r,o,c,n,i);s=(u=1!=h.level)?h.from:h.to-1,a=u?h.to:h.from-1}var f,d,p=null,g=null,v=le(function(t){var r=Wr(e,o,t);return r.top+=l,r.bottom+=l,!!Qr(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(p=t,g=r),!0)},s,a),m=!1;if(g){var y=n-g.left<g.right-n,b=y==u;v=p+(b?0:1),d=b?"after":"before",f=y?g.left:g.right}else{u||v!=a&&v!=s||v++,d=0==v?"after":v==t.text.length?"before":Wr(e,o,v-(u?1:0)).bottom+l<=i==u?"after":"before";var w=Xr(e,et(r,v,d),"line",t,o);f=w.left,m=i<w.top?-1:i>=w.bottom?1:0}return _r(r,v=oe(t.text,v,1),d,m,n-f)}function en(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Hr){Hr=A("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Hr.appendChild(document.createTextNode("x")),Hr.appendChild(A("br"));Hr.appendChild(document.createTextNode("x"))}N(e.measure,Hr);var r=Hr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),M(e.measure),r||1}function tn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A("span","xxxxxxxxxx"),r=A("pre",[t],"CodeMirror-line-like");N(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function rn(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l){var s=e.display.gutterSpecs[l].className;r[s]=o.offsetLeft+o.clientLeft+i,n[s]=o.clientWidth}return{fixedPos:nn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function nn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function on(e){var t=en(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/tn(e.display)-3);return function(i){if(Gt(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function ln(e){var t=e.doc,r=on(e);t.iter(function(e){var t=r(e);t!=e.height&&$e(e,t)})}function sn(e,t,r,n){var i=e.display;if(!r&&"true"==Le(t).getAttribute("cm-not-content"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(h){return null}var a,u=$r(e,o,l);if(n&&u.xRel>0&&(a=Xe(e.doc,u.line).text).length==u.ch){var c=R(a,a.length,e.options.tabSize)-a.length;u=et(u.line,Math.max(0,Math.round((o-Lr(e.display).left)/tn(e.display))-c))}return u}function an(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function un(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ct&&zt(e.doc,t)<i.viewTo&&hn(e);else if(r<=i.viewFrom)Ct&&Bt(e.doc,r+n)>i.viewFrom?hn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)hn(e);else if(t<=i.viewFrom){var o=fn(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):hn(e)}else if(r>=i.viewTo){var l=fn(e,t,t,-1);l?(i.view=i.view.slice(0,l.index),i.viewTo=l.lineN):hn(e)}else{var s=fn(e,t,t,-1),a=fn(e,r,r+n,1);s&&a?(i.view=i.view.slice(0,s.index).concat(ir(e,s.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=n):hn(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function cn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[an(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==B(l,r)&&l.push(r)}}}function hn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function fn(e,t,r,n){var i,o=an(e,t),l=e.display.view;if(!Ct||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=e.display.viewFrom,a=0;a<o;a++)s+=l[a].size;if(s!=t){if(n>0){if(o==l.length-1)return null;i=s+l[o].size-t,o++}else i=s-t;t+=i,r+=i}for(;zt(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function dn(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function pn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function gn(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++)if(t||l!=r.sel.primIndex){var s=r.sel.ranges[l];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var a=s.empty();(a||e.options.showCursorWhenSelecting)&&vn(e,s.head,i),a||yn(e,s,o)}}return n}function vn(e,t,r){var n=Xr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(A("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function mn(e,t){return e.top-t.top||e.left-t.left}function yn(e,t,r){var n=e.display,i=e.doc,o=document.createDocumentFragment(),l=Lr(e.display),s=l.left,a=Math.max(n.sizerWidth,Tr(e)-n.sizer.offsetLeft)-l.right,u="ltr"==i.direction;function c(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),o.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?a-e:r)+"px;\n                             height: "+(n-t)+"px"))}function h(t,r,n){var o,l,h=Xe(i,t),f=h.text.length;function d(r,n){return jr(e,et(t,r),"div",h,n)}function p(t,r,n){var i=Zr(e,h,null,t),o="ltr"==r==("after"==n)?"left":"right";return d("after"==n?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1),o)[o]}var g=ce(h,i.direction);return function(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr",o),i=!0)}i||n(t,r,"ltr")}(g,r||0,null==n?f:n,function(e,t,i,h){var v="ltr"==i,m=d(e,v?"left":"right"),y=d(t-1,v?"right":"left"),b=null==r&&0==e,w=null==n&&t==f,x=0==h,C=!g||h==g.length-1;if(y.top-m.top<=3){var S=(u?w:b)&&C,L=(u?b:w)&&x?s:(v?m:y).left,k=S?a:(v?y:m).right;c(L,m.top,k-L,m.bottom)}else{var T,M,N,A;v?(T=u&&b&&x?s:m.left,M=u?a:p(e,i,"before"),N=u?s:p(t,i,"after"),A=u&&w&&C?a:y.right):(T=u?p(e,i,"before"):s,M=!u&&b&&x?a:m.right,N=!u&&w&&C?s:y.left,A=u?p(t,i,"after"):a),c(T,m.top,M-T,m.bottom),m.bottom<y.top&&c(s,m.bottom,null,y.top),c(N,y.top,A-N,y.bottom)}(!o||mn(m,o)<0)&&(o=m),mn(y,o)<0&&(o=y),(!l||mn(m,l)<0)&&(l=m),mn(y,l)<0&&(l=y)}),{start:o,end:l}}var f=t.from(),d=t.to();if(f.line==d.line)h(f.line,f.ch,d.ch);else{var p=Xe(i,f.line),g=Xe(i,d.line),v=Rt(p)==Rt(g),m=h(f.line,f.ch,v?p.text.length+1:null).end,y=h(d.line,v?0:null,d.ch).start;v&&(m.top<y.top-2?(c(m.right,m.top,null,m.bottom),c(s,y.top,y.left,y.bottom)):c(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&c(s,m.bottom,null,y.top)}r.appendChild(o)}function bn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function wn(e){e.state.focused||(e.display.input.focus(),Cn(e))}function xn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Sn(e))},100)}function Cn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ge(e,"focus",e,t),e.state.focused=!0,H(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),a&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),bn(e))}function Sn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ge(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ln(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i=t.view[n],o=e.options.lineWrapping,a=void 0,u=0;if(!i.hidden){if(l&&s<8){var c=i.node.offsetTop+i.node.offsetHeight;a=c-r,r=c}else{var h=i.node.getBoundingClientRect();a=h.bottom-h.top,!o&&i.text.firstChild&&(u=i.text.firstChild.getBoundingClientRect().right-h.left-1)}var f=i.line.height-a;if((f>.005||f<-.005)&&($e(i.line,a),kn(i.line),i.rest))for(var d=0;d<i.rest.length;d++)kn(i.rest[d]);if(u>e.display.sizerWidth){var p=Math.ceil(u/tn(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function kn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function Tn(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Cr(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=Ze(t,n),l=Ze(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;s<o?(o=s,l=Ze(t,Vt(Xe(t,s))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=l&&(o=Ze(t,Vt(Xe(t,a))-e.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function Mn(e,t){var r=e.display,n=en(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=Mr(e),l={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Sr(r),a=t.top<n,u=t.bottom>s-n;if(t.top<i)l.scrollTop=a?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=i&&(l.scrollTop=c)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,f=Tr(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),d=t.right-t.left>f;return d&&(t.right=t.left+f),t.left<10?l.scrollLeft=0:t.left<h?l.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>f+h-3&&(l.scrollLeft=t.right+(d?0:10)-f),l}function Nn(e,t){null!=t&&(Dn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function An(e){Dn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function On(e,t,r){null==t&&null==r||Dn(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function Dn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Wn(e,Yr(e,t.from),Yr(e,t.to),t.margin))}function Wn(e,t,r,n){var i=Mn(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});On(e,i.scrollLeft,i.scrollTop)}function Hn(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||oi(e,{top:t}),Fn(e,t,!0),r&&oi(e),ei(e,100))}function Fn(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Pn(e,t,r,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,ai(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function En(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Sr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+kr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var In=function(e,t,r){this.cm=r;var n=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=i.tabIndex=-1,e(n),e(i),fe(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),fe(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,l&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};In.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},In.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},In.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},In.prototype.zeroWidthHack=function(){var e=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new z,this.disableVert=new z},In.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto",t.set(1e3,function n(){var i=e.getBoundingClientRect();("vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,n)})},In.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Rn=function(){};function zn(e,t){t||(t=En(e));var r=e.display.barWidth,n=e.display.barHeight;Bn(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&Ln(e),Bn(e,En(e)),r=e.display.barWidth,n=e.display.barHeight}function Bn(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}Rn.prototype.update=function(){return{bottom:0,right:0}},Rn.prototype.setScrollLeft=function(){},Rn.prototype.setScrollTop=function(){},Rn.prototype.clear=function(){};var Gn={native:In,null:Rn};function Un(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Gn[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),fe(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){"horizontal"==r?Pn(e,t):Hn(e,t)},e),e.display.scrollbars.addClass&&H(e.display.wrapper,e.display.scrollbars.addClass)}var Vn=0;function Kn(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Vn},t=e.curOp,or?or.ops.push(t):t.ownsGroup=or={ops:[t],delayedCallbacks:[]}}function jn(e){var t=e.curOp;t&&function(e,t){var r=e.ownsGroup;if(r)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}(r)}finally{or=null,t(r)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)Xn(t[r]);for(var n=0;n<t.length;n++)(i=t[n]).updatedDisplay=i.mustUpdate&&ni(i.cm,i.update);var i;for(var o=0;o<t.length;o++)Yn(t[o]);for(var l=0;l<t.length;l++)_n(t[l]);for(var s=0;s<t.length;s++)$n(t[s])}(e)})}function Xn(e){var t=e.cm,r=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=kr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=kr(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&jt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ri(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yn(e){var t=e.cm,r=t.display;e.updatedDisplay&&Ln(t),e.barMeasure=En(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ar(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+kr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Tr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function _n(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Pn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==W();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&zn(t,e.barMeasure),e.updatedDisplay&&si(t,e.barMeasure),e.selectionChanged&&bn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&wn(e.cm)}function $n(e){var t=e.cm,r=t.display,n=t.doc;(e.updatedDisplay&&ii(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&Fn(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Pn(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!ve(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=A("div","​",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-Cr(e.display))+"px;\n                         height: "+(t.bottom-t.top+kr(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,r,n){var i;null==n&&(n=0),e.options.lineWrapping||t!=r||(r="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var l=!1,s=Xr(e,t),a=r&&r!=t?Xr(e,r):s,u=Mn(e,i={left:Math.min(s.left,a.left),top:Math.min(s.top,a.top)-n,right:Math.max(s.left,a.left),bottom:Math.max(s.bottom,a.bottom)+n}),c=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=u.scrollTop&&(Hn(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(l=!0)),null!=u.scrollLeft&&(Pn(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(l=!0)),!l)break}return i}(t,st(n,e.scrollToPos.from),st(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var l=0;l<i.length;++l)i[l].lines.length||ge(i[l],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&ge(o[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ge(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function qn(e,t){if(e.curOp)return t();Kn(e);try{return t()}finally{jn(e)}}function Zn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Kn(e);try{return t.apply(e,arguments)}finally{jn(e)}}}function Qn(e){return function(){if(this.curOp)return e.apply(this,arguments);Kn(this);try{return e.apply(this,arguments)}finally{jn(this)}}}function Jn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Kn(t);try{return e.apply(this,arguments)}finally{jn(t)}}}function ei(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,E(ti,e))}function ti(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=dt(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(n.line>=e.display.viewFrom){var l=o.styles,s=o.text.length>e.options.maxHighlightLength?Ue(t.mode,n.state):null,a=ht(e,o,n,!0);s&&(n.state=s),o.styles=a.styles;var u=o.styleClasses,c=a.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var h=!l||l.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),f=0;!h&&f<l.length;++f)h=l[f]!=o.styles[f];h&&i.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=e.options.maxHighlightLength&&pt(e,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return ei(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&qn(e,function(){for(var t=0;t<i.length;t++)cn(e,i[t],"text")})}}var ri=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Tn(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Tr(e),this.force=r,this.dims=rn(e),this.events=[]};function ni(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return hn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==dn(e))return!1;ui(e)&&(hn(e),t.dims=rn(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),Ct&&(o=zt(e.doc,o),l=Bt(e.doc,l));var s=o!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;!function(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=ir(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=ir(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(an(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(ir(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,an(e,r)))),n.viewTo=r}(e,o,l),r.viewOffset=Vt(Xe(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=dn(e);if(!s&&0==u&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=W();if(!t||!D(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&D(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}(e);return u>4&&(r.lineDiv.style.display="none"),function(e,t,r){var n=e.display,i=e.options.lineNumbers,o=n.lineDiv,l=o.firstChild;function s(t){var r=t.nextSibling;return a&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var u=n.view,c=n.viewFrom,h=0;h<u.length;h++){var f=u[h];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;l!=f.node;)l=s(l);var d=i&&null!=t&&t<=c&&f.lineNumber;f.changes&&(B(f.changes,"gutter")>-1&&(d=!1),ur(e,f,c,r)),d&&(M(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(Je(e.options,c)))),l=f.node.nextSibling}else{var p=vr(e,f,c,r);o.insertBefore(p,l)}c+=f.size}for(;l;)l=s(l)}(e,r.updateLineNumbers,t.dims),u>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,function(e){if(e&&e.activeElt&&e.activeElt!=W()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}(c),M(r.cursorDiv),M(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,s&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,ei(e,400)),r.updateLineNumbers=null,!0}function ii(e,t){for(var r=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Tr(e))n&&(t.visible=Tn(e.display,e.doc,r));else if(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Sr(e.display)-Mr(e),r.top)}),t.visible=Tn(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!ni(e,t))break;Ln(e);var i=En(e);pn(e),zn(e,i),si(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function oi(e,t){var r=new ri(e,t);if(ni(e,r)){Ln(e),ii(e,r);var n=En(e);pn(e),zn(e,n),si(e,n),r.finish()}}function li(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function si(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+kr(e)+"px"}function ai(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=nn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function ui(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=Je(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(A("div",[A("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l)+1,n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",li(e.display),!0}return!1}function ci(e,t){for(var r=[],n=!1,i=0;i<e.length;i++){var o=e[i],l=null;if("string"!=typeof o&&(l=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;n=!0}r.push({className:o,style:l})}return t&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function hi(e){var t=e.gutters,r=e.gutterSpecs;M(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var i=r[n],o=i.className,l=i.style,s=t.appendChild(A("div",null,"CodeMirror-gutter "+o));l&&(s.style.cssText=l),"CodeMirror-linenumbers"==o&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",li(e)}function fi(e){hi(e.display),un(e),ai(e)}function di(e,t,n,i){var o=this;this.input=n,o.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=O("div",null,"CodeMirror-code"),o.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=A("div",null,"CodeMirror-cursors"),o.measure=A("div",null,"CodeMirror-measure"),o.lineMeasure=A("div",null,"CodeMirror-measure"),o.lineSpace=O("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=O("div",[o.lineSpace],"CodeMirror-lines");o.mover=A("div",[u],null,"position: relative"),o.sizer=A("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=A("div",null,null,"position: absolute; height: "+G+"px; width: 1px;"),o.gutters=A("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=A("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=A("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),l&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),a||r&&m||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=ci(i.gutters,i.lineNumbers),hi(o),n.init(o)}ri.prototype.signal=function(e,t){ye(e,t)&&this.events.push(arguments)},ri.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ge.apply(null,this.events[e])};var pi=0,gi=null;function vi(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function mi(e){var t=vi(e);return t.x*=gi,t.y*=gi,t}function yi(e,t){var n=vi(t),i=n.x,o=n.y,l=e.display,s=l.scroller,u=s.scrollWidth>s.clientWidth,c=s.scrollHeight>s.clientHeight;if(i&&u||o&&c){if(o&&y&&a)e:for(var f=t.target,d=l.view;f!=s;f=f.parentNode)for(var p=0;p<d.length;p++)if(d[p].node==f){e.display.currentWheelTarget=f;break e}if(i&&!r&&!h&&null!=gi)return o&&c&&Hn(e,Math.max(0,s.scrollTop+o*gi)),Pn(e,Math.max(0,s.scrollLeft+i*gi)),(!o||o&&c)&&we(t),void(l.wheelStartX=null);if(o&&null!=gi){var g=o*gi,v=e.doc.scrollTop,m=v+l.wrapper.clientHeight;g<0?v=Math.max(0,v+g-50):m=Math.min(e.doc.height,m+g+50),oi(e,{top:v,bottom:m})}pi<20&&(null==l.wheelStartX?(l.wheelStartX=s.scrollLeft,l.wheelStartY=s.scrollTop,l.wheelDX=i,l.wheelDY=o,setTimeout(function(){if(null!=l.wheelStartX){var e=s.scrollLeft-l.wheelStartX,t=s.scrollTop-l.wheelStartY,r=t&&l.wheelDY&&t/l.wheelDY||e&&l.wheelDX&&e/l.wheelDX;l.wheelStartX=l.wheelStartY=null,r&&(gi=(gi*pi+r)/(pi+1),++pi)}},200)):(l.wheelDX+=i,l.wheelDY+=o))}}l?gi=-.53:r?gi=15:c?gi=-.7:f&&(gi=-1/3);var bi=function(e,t){this.ranges=e,this.primIndex=t};bi.prototype.primary=function(){return this.ranges[this.primIndex]},bi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!rt(r.anchor,n.anchor)||!rt(r.head,n.head))return!1}return!0},bi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new wi(nt(this.ranges[t].anchor),nt(this.ranges[t].head));return new bi(e,this.primIndex)},bi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bi.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(tt(t,n.from())>=0&&tt(e,n.to())<=0)return r}return-1};var wi=function(e,t){this.anchor=e,this.head=t};function xi(e,t,r){var n=e&&e.options.selectionsMayTouch,i=t[r];t.sort(function(e,t){return tt(e.from(),t.from())}),r=B(t,i);for(var o=1;o<t.length;o++){var l=t[o],s=t[o-1],a=tt(s.to(),l.from());if(n&&!l.empty()?a>0:a>=0){var u=ot(s.from(),l.from()),c=it(s.to(),l.to()),h=s.empty()?l.from()==l.head:s.from()==s.head;o<=r&&--r,t.splice(--o,2,new wi(h?c:u,h?u:c))}}return new bi(t,r)}function Ci(e,t){return new bi([new wi(e,t||e)],0)}function Si(e){return e.text?et(e.from.line+e.text.length-1,$(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Li(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return Si(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Si(t).ch-t.to.ch),et(r,n)}function ki(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new wi(Li(i.anchor,t),Li(i.head,t)))}return xi(e.cm,r,e.sel.primIndex)}function Ti(e,t,r){return e.line==t.line?et(r.line,e.ch-t.ch+r.ch):et(r.line+(e.line-t.line),e.ch)}function Mi(e){e.doc.mode=ze(e.options,e.doc.modeOption),Ni(e)}function Ni(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ei(e,100),e.state.modeGen++,e.curOp&&un(e)}function Ai(e,t){return 0==t.from.ch&&0==t.to.ch&&""==$(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Oi(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Nt(e),At(e,r);var i=n?n(e):1;i!=e.height&&$e(e,i)}(e,r,i,n),sr(e,"change",e,t)}function l(e,t){for(var r=[],o=e;o<t;++o)r.push(new Xt(u[o],i(o),n));return r}var s=t.from,a=t.to,u=t.text,c=Xe(e,s.line),h=Xe(e,a.line),f=$(u),d=i(u.length-1),p=a.line-s.line;if(t.full)e.insert(0,l(0,u.length)),e.remove(u.length,e.size-u.length);else if(Ai(e,t)){var g=l(0,u.length-1);o(h,h.text,d),p&&e.remove(s.line,p),g.length&&e.insert(s.line,g)}else if(c==h)if(1==u.length)o(c,c.text.slice(0,s.ch)+f+c.text.slice(a.ch),d);else{var v=l(1,u.length-1);v.push(new Xt(f+c.text.slice(a.ch),d,n)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,v)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+h.text.slice(a.ch),i(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(h,f+h.text.slice(a.ch),d);var m=l(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,m)}sr(e,"change",e,t)}function Di(e,t,r){!function e(n,i,o){if(n.linked)for(var l=0;l<n.linked.length;++l){var s=n.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(t(s.doc,a),e(s.doc,n,a))}}}(e,null,!0)}function Wi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ln(e),Mi(e),Hi(e),e.options.lineWrapping||jt(e),e.options.mode=t.modeOption,un(e)}function Hi(e){("rtl"==e.doc.direction?H:T)(e.display.lineDiv,"CodeMirror-rtl")}function Fi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Pi(e,t){var r={from:nt(t.from),to:Si(t),text:Ye(e,t.from,t.to)};return Bi(e,r,t.from.line,t.to.line+1),Di(e,function(e){return Bi(e,r,t.from.line,t.to.line+1)},!0),r}function Ei(e){for(;e.length;){if(!$(e).ranges)break;e.pop()}}function Ii(e,t,r,n){var i=e.history;i.undone.length=0;var o,l,s=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ei(e.done),$(e.done)):e.done.length&&!$(e.done).ranges?$(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),$(e.done)):void 0}(i,i.lastOp==n)))l=$(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,l.to)?l.to=Si(t):o.changes.push(Pi(e,t));else{var a=$(i.done);for(a&&a.ranges||zi(e.sel,i.done),o={changes:[Pi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,l||ge(e,"historyAdded")}function Ri(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,$(i.done),t))?i.done[i.done.length-1]=t:zi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&!1!==n.clearRedo&&Ei(i.undone)}function zi(e,t){var r=$(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Bi(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function Gi(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Ui(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(Gi(r[i]));return n}(e,t),n=Tt(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function Vi(e,t,r){for(var n=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?bi.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];n.push({changes:s});for(var a=0;a<l.length;++a){var u=l[a],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&B(t,Number(c[1]))>-1&&($(s)[h]=u[h],delete u[h])}}}return n}function Ki(e,t,r,n){if(n){var i=e.anchor;if(r){var o=tt(t,i)<0;o!=tt(r,i)<0?(i=t,t=r):o!=tt(t,r)<0&&(t=r)}return new wi(i,t)}return new wi(r||t,t)}function ji(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),qi(e,new bi([Ki(e.sel.primary(),t,r,i)],0),n)}function Xi(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=Ki(e.sel.ranges[o],t[o],null,i);qi(e,xi(e.cm,n,e.sel.primIndex),r)}function Yi(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,qi(e,xi(e.cm,i,e.sel.primIndex),n)}function _i(e,t,r,n){qi(e,Ci(t,r),n)}function $i(e,t,r){var n=e.history.done,i=$(n);i&&i.ranges?(n[n.length-1]=t,Zi(e,t,r)):qi(e,t,r)}function qi(e,t,r){Zi(e,t,r),Ri(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Zi(e,t,r){(ye(e,"beforeSelectionChange")||e.cm&&ye(e.cm,"beforeSelectionChange"))&&(t=function(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new wi(st(e,t[r].anchor),st(e,t[r].head))},origin:r&&r.origin};return ge(e,"beforeSelectionChange",e,n),e.cm&&ge(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?xi(e.cm,n.ranges,n.ranges.length-1):t}(e,t,r));var n=r&&r.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);Qi(e,eo(e,t,n,!0)),r&&!1===r.scroll||!e.cm||An(e.cm)}function Qi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,me(e.cm)),sr(e,"cursorActivity",e))}function Ji(e){Qi(e,eo(e,e.sel,null,!1))}function eo(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],a=ro(e,l.anchor,s&&s.anchor,r,n),u=ro(e,l.head,s&&s.head,r,n);(i||a!=l.anchor||u!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new wi(a,u))}return i?xi(e.cm,i,t.primIndex):t}function to(e,t,r,n,i){var o=Xe(e,t.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],a=s.marker,u="selectLeft"in a?!a.selectLeft:a.inclusiveLeft,c="selectRight"in a?!a.selectRight:a.inclusiveRight;if((null==s.from||(u?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(c?s.to>=t.ch:s.to>t.ch))){if(i&&(ge(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!a.atomic)continue;if(r){var h=a.find(n<0?1:-1),f=void 0;if((n<0?c:u)&&(h=no(e,h,-n,h&&h.line==t.line?o:null)),h&&h.line==t.line&&(f=tt(h,r))&&(n<0?f<0:f>0))return to(e,h,t,n,i)}var d=a.find(n<0?-1:1);return(n<0?u:c)&&(d=no(e,d,n,d.line==t.line?o:null)),d?to(e,d,t,n,i):null}}return t}function ro(e,t,r,n,i){var o=n||1,l=to(e,t,r,o,i)||!i&&to(e,t,r,o,!0)||to(e,t,r,-o,i)||!i&&to(e,t,r,-o,!0);return l||(e.cantEdit=!0,et(e.first,0))}function no(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?st(e,et(t.line-1)):null:r>0&&t.ch==(n||Xe(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+r)}function io(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),V)}function oo(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,i,o){t&&(n.from=st(e,t)),r&&(n.to=st(e,r)),i&&(n.text=i),void 0!==o&&(n.origin=o)}),ge(e,"beforeChange",e,n),e.cm&&ge(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function lo(e,t,r){if(e.cm){if(!e.cm.curOp)return Zn(e.cm,lo)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"))||(t=oo(e,t,!0))){var n=xt&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=B(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(tt(u.to,s.from)<0||tt(u.from,s.to)>0)){var c=[a,1],h=tt(u.from,s.from),f=tt(u.to,s.to);(h<0||!l.inclusiveLeft&&!h)&&c.push({from:u.from,to:s.from}),(f>0||!l.inclusiveRight&&!f)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-3}}return i}(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)so(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else so(e,t)}}function so(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var r=ki(e,t);Ii(e,t,r,e.cm?e.cm.curOp.id:NaN),co(e,t,r,Tt(e,t));var n=[];Di(e,function(e,r){r||-1!=B(n,e.history)||(go(e.history,t),n.push(e.history)),co(e,t,null,Tt(e,t))})}}function ao(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!n||r){for(var i,o=e.history,l=e.sel,s="undo"==t?o.done:o.undone,a="undo"==t?o.undone:o.done,u=0;u<s.length&&(i=s[u],r?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(n)return void s.push(i);break}if(zi(i,a),r&&!i.equals(e.sel))return void qi(e,i,{clearRedo:!1});l=i}var c=[];zi(l,a),a.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var h=ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"),f=function(r){var n=i.changes[r];if(n.origin=t,h&&!oo(e,n,!1))return s.length=0,{};c.push(Pi(e,n));var o=r?ki(e,n):$(s);co(e,n,o,Ui(e,n)),!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:Si(n)});var l=[];Di(e,function(e,t){t||-1!=B(l,e.history)||(go(e.history,n),l.push(e.history)),co(e,n,null,Ui(e,n))})},d=i.changes.length-1;d>=0;--d){var p=f(d);if(p)return p.v}}}}function uo(e,t){if(0!=t&&(e.first+=t,e.sel=new bi(q(e.sel.ranges,function(e){return new wi(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){un(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)cn(e.cm,n,"gutter")}}function co(e,t,r,n){if(e.cm&&!e.cm.curOp)return Zn(e.cm,co)(e,t,r,n);if(t.to.line<e.first)uo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);uo(e,i),t={from:et(e.first,0),to:et(t.to.line+i,t.to.ch),text:[$(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,Xe(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ye(e,t.from,t.to),r||(r=ki(e,t)),e.cm?function(e,t,r){var n=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=qe(Rt(Xe(n,o.line))),n.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0,!0}));n.sel.contains(t.from,t.to)>-1&&me(e);Oi(n,t,r,on(e)),e.options.lineWrapping||(n.iter(a,o.line+t.text.length,function(e){var t=Kt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=Xe(e,n).stateAfter;if(i&&(!(i instanceof ut)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}})(n,o.line),ei(e,400);var u=t.text.length-(l.line-o.line)-1;t.full?un(e):o.line!=l.line||1!=t.text.length||Ai(e.doc,t)?un(e,o.line,l.line+1,u):cn(e,o.line,"text");var c=ye(e,"changes"),h=ye(e,"change");if(h||c){var f={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};h&&sr(e,"change",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,n):Oi(e,t,n),Zi(e,r,V),e.cantEdit&&ro(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function ho(e,t,r,n,i){var o;n||(n=r),tt(n,r)<0&&(r=(o=[n,r])[0],n=o[1]),"string"==typeof t&&(t=e.splitLines(t)),lo(e,{from:r,to:n,text:t,origin:i})}function fo(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function po(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)fo(o.ranges[s].anchor,t,r,n),fo(o.ranges[s].head,t,r,n)}else{for(var a=0;a<o.changes.length;++a){var u=o.changes[a];if(r<u.from.line)u.from=et(u.from.line+n,u.from.ch),u.to=et(u.to.line+n,u.to.ch);else if(t<=u.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function go(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;po(e.done,r,n,i),po(e.undone,r,n,i)}function vo(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=Xe(e,lt(e,t)):i=qe(t),null==i?null:(n(o,i)&&e.cm&&cn(e.cm,i,r),o)}function mo(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function yo(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}wi.prototype.from=function(){return ot(this.anchor,this.head)},wi.prototype.to=function(){return it(this.anchor,this.head)},wi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},mo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,Yt(i),sr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},yo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof mo))){var s=[];this.collapse(s),this.children=[new mo(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var l=i.lines.length%25+25,s=l;s<i.lines.length;){var a=new mo(i.lines.slice(s,s+=25));i.height-=a.height,this.children.splice(++n,0,a),a.parent=this}i.lines=i.lines.slice(0,l),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new yo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=B(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new yo(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var bo=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function wo(e,t,r){Vt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Nn(e,r)}bo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=qe(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=wr(this);$e(r,Math.max(0,r.height-o)),e&&(qn(e,function(){wo(e,r,-o),cn(e,n,"widget")}),sr(e,"lineWidgetCleared",e,this,n))}},bo.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=wr(this)-t;i&&(Gt(this.doc,n)||$e(n,n.height+i),r&&qn(r,function(){r.curOp.forceUpdate=!0,wo(r,n,i),sr(r,"lineWidgetChanged",r,e,qe(n))}))},be(bo);var xo=0,Co=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++xo};function So(e,t,r,n,i){if(n&&n.shared)return function(e,t,r,n,i){(n=I(n)).shared=!1;var o=[So(e,t,r,n,i)],l=o[0],s=n.widgetNode;return Di(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(So(e,st(e,t),st(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=$(o)}),new Lo(o,l)}(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return Zn(e.cm,So)(e,t,r,n,i);var o=new Co(e,i),l=tt(t,r);if(n&&I(n,o,!1),l>0||0==l&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=O("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(It(e,t.line,t,r,o)||t.line!=r.line&&It(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ct=!0}o.addToHistory&&Ii(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var s,a=t.line,u=e.cm;if(e.iter(a,r.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Rt(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=t.line&&$e(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new St(o,a==t.line?t.ch:null,a==r.line?r.ch:null)),++a}),o.collapsed&&e.iter(t.line,r.line+1,function(t){Gt(e,t)&&$e(t,0)}),o.clearOnEnter&&fe(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(xt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++xo,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)un(u,t.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=r.line;c++)cn(u,c,"text");o.atomic&&Ji(u.doc),sr(u,"markerAdded",u,o)}return o}Co.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Kn(e),ye(this,"clear")){var r=this.find();r&&sr(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=Lt(l.markedSpans,this);e&&!this.collapsed?cn(e,qe(l),"text"):e&&(null!=s.to&&(i=qe(l)),null!=s.from&&(n=qe(l))),l.markedSpans=kt(l.markedSpans,s),null==s.from&&this.collapsed&&!Gt(this.doc,l)&&e&&$e(l,en(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var u=Rt(this.lines[a]),c=Kt(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&un(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ji(e.doc)),e&&sr(e,"markerCleared",e,this,n,i),t&&jn(e),this.parent&&this.parent.clear()}},Co.prototype.find=function(e,t){var r,n;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],l=Lt(o.markedSpans,this);if(null!=l.from&&(r=et(t?o:qe(o),l.from),-1==e))return r;if(null!=l.to&&(n=et(t?o:qe(o),l.to),1==e))return n}return r&&{from:r,to:n}},Co.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&qn(n,function(){var i=t.line,o=qe(t.line),l=Or(n,o);if(l&&(Ir(l),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Gt(r.doc,i)&&null!=r.height){var s=r.height;r.height=null;var a=wr(r)-s;a&&$e(i,i.height+a)}sr(n,"markerChanged",n,e)})},Co.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Co.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(Co);var Lo=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function ko(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),function(e){return e.parent})}function To(e){for(var t=function(t){var r=e[t],n=[r.primary.doc];Di(r.primary.doc,function(e){return n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==B(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}},r=0;r<e.length;r++)t(r)}Lo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sr(this,"clear")}},Lo.prototype.find=function(e,t){return this.primary.find(e,t)},be(Lo);var Mo=0,No=function(e,t,r,n,i){if(!(this instanceof No))return new No(e,t,r,n,i);null==r&&(r=0),yo.call(this,[new mo([new Xt("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=et(r,0);this.sel=Ci(o),this.history=new Fi(null),this.id=++Mo,this.modeOption=t,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Oi(this,{from:o,to:o,text:e}),qi(this,Ci(o),V)};No.prototype=Q(yo.prototype,{constructor:No,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=_e(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Jn(function(e){var t=et(this.first,0),r=this.first+this.size-1;lo(this,{from:t,to:et(r,Xe(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&On(this.cm,0,0),qi(this,Ci(t),V)}),replaceRange:function(e,t,r,n){ho(this,e,t=st(this,t),r=r?st(this,r):t,n)},getRange:function(e,t,r){var n=Ye(this,st(this,e),st(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Qe(this,e))return Xe(this,e)},getLineNumber:function(e){return qe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Xe(this,e)),Rt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return st(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Jn(function(e,t,r){_i(this,st(this,"number"==typeof e?et(e,t||0):e),null,r)}),setSelection:Jn(function(e,t,r){_i(this,st(this,e),st(this,t||e),r)}),extendSelection:Jn(function(e,t,r){ji(this,st(this,e),t&&st(this,t),r)}),extendSelections:Jn(function(e,t){Xi(this,at(this,e),t)}),extendSelectionsBy:Jn(function(e,t){Xi(this,at(this,q(this.sel.ranges,e)),t)}),setSelections:Jn(function(e,t,r){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new wi(st(this,e[i].anchor),st(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),qi(this,xi(this.cm,n,t),r)}}),addSelection:Jn(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new wi(st(this,e),st(this,t||e))),qi(this,xi(this.cm,n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=Ye(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Ye(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Jn(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:this.splitLines(e[o]),origin:r}}for(var s=t&&"end"!=t&&function(e,t,r){for(var n=[],i=et(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=Ti(s.from,i,o),u=Ti(Si(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],h=tt(c.head,c.anchor)<0;n[l]=new wi(h?u:a,h?a:u)}else n[l]=new wi(a,a)}return new bi(n,e.sel.primIndex)}(this,n,t),a=n.length-1;a>=0;a--)lo(this,n[a]);s?$i(this,s):this.cm&&An(this.cm)}),undo:Jn(function(){ao(this,"undo")}),redo:Jn(function(){ao(this,"redo")}),undoSelection:Jn(function(){ao(this,"undo",!0)}),redoSelection:Jn(function(){ao(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new Fi(this.history.maxGeneration),Di(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vi(this.history.done),undone:Vi(this.history.undone)}},setHistory:function(e){var t=this.history=new Fi(this.history.maxGeneration);t.done=Vi(e.done.slice(0),null,!0),t.undone=Vi(e.undone.slice(0),null,!0)},setGutterMarker:Jn(function(e,t,r){return vo(this,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&re(n)&&(e.gutterMarkers=null),!0})}),clearGutter:Jn(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&vo(t,r,"gutter",function(){return r.gutterMarkers[e]=null,re(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!Qe(this,e))return null;if(t=e,!(e=Xe(this,e)))return null}else if(null==(t=qe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Jn(function(e,t,r){return vo(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(L(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:Jn(function(e,t,r){return vo(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(L(r));if(!o)return!1;var l=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0})}),addLineWidget:Jn(function(e,t,r){return function(e,t,r,n){var i=new bo(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),vo(e,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Gt(e,t)){var n=Vt(t)<e.scrollTop;$e(t,t.height+wr(i)),n&&Nn(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&sr(o,"lineWidgetAdded",o,i,"number"==typeof t?t:qe(t)),i}(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return So(this,st(this,e),st(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return So(this,e=st(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=Xe(this,(e=st(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=st(this,e),t=st(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];null!=a.to&&i==e.line&&e.ch>=a.to||null==a.from&&i!=e.line||null!=a.from&&i==t.line&&a.from>=t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;if(o>e)return t=e,!0;e-=o,++r}),st(this,et(r,t))},indexFromPos:function(e){var t=(e=st(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new No(_e(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new No(_e(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(tt(o,l)){var s=So(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}(n,ko(this)),n},unlinkDoc:function(e){if(e instanceof Ll&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),To(ko(this));break}}if(e.history==this.history){var r=[e.id];Di(e,function(e){return r.push(e.id)},!0),e.history=new Fi(null),e.history.done=Vi(this.history.done,r),e.history.undone=Vi(this.history.undone,r)}},iterLinkedDocs:function(e){Di(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):We(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Jn(function(e){var t;("rtl"!=e&&(e="ltr"),e!=this.direction)&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&qn(t=this.cm,function(){Hi(t),un(t)}))})}),No.prototype.eachLine=No.prototype.iter;var Ao=0;function Oo(e){var t=this;if(Do(t),!ve(t,e)&&!xr(t.display,e)){we(e),l&&(Ao=+new Date);var r=sn(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),s=0,a=function(){++s==i&&Zn(t,function(){var e={from:r=st(t.doc,r),to:r,text:t.doc.splitLines(o.filter(function(e){return null!=e}).join(t.doc.lineSeparator())),origin:"paste"};lo(t.doc,e),$i(t.doc,Ci(st(t.doc,r),st(t.doc,Si(e))))})()},u=function(e,r){if(t.options.allowDropFileTypes&&-1==B(t.options.allowDropFileTypes,e.type))a();else{var n=new FileReader;n.onerror=function(){return a()},n.onload=function(){var e=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)?a():(o[r]=e,a())},n.readAsText(e)}},c=0;c<n.length;c++)u(n[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var h=e.dataTransfer.getData("Text");if(h){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Zi(t.doc,Ci(r,r)),f)for(var d=0;d<f.length;++d)ho(t.doc,"",f[d].anchor,f[d].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(p){}}}}function Do(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Wo(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation(function(){for(var t=0;t<r.length;t++)e(r[t])})}}var Ho=!1;function Fo(){var e;Ho||(fe(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Wo(Po)},100))}),fe(window,"blur",function(){return Wo(Sn)}),Ho=!0)}function Po(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Eo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Io=0;Io<10;Io++)Eo[Io+48]=Eo[Io+96]=String(Io);for(var Ro=65;Ro<=90;Ro++)Eo[Ro]=String.fromCharCode(Ro);for(var zo=1;zo<=12;zo++)Eo[zo+111]=Eo[zo+63235]="F"+zo;var Bo={};function Go(e){var t,r,n,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var l=0;l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Uo(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=q(r.split(" "),Go),o=0;o<i.length;o++){var l=void 0,s=void 0;o==i.length-1?(s=i.join(" "),l=n):(s=i.slice(0,o+1).join(" "),l="...");var a=t[s];if(a){if(a!=l)throw new Error("Inconsistent bindings for "+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e}function Vo(e,t,r,n){var i=(t=Yo(t)).call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Vo(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var l=Vo(e,t.fallthrough[o],r,n);if(l)return l}}}function Ko(e){var t="string"==typeof e?e:Eo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function jo(e,t,r){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(C?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(C?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function Xo(e,t){if(h&&34==e.keyCode&&e.char)return!1;var r=Eo[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),jo(r,e,t))}function Yo(e){return"string"==typeof e?Bo[e]:e}function _o(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&tt(o.from,$(n).to)<=0;){var l=n.pop();if(tt(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}qn(e,function(){for(var t=n.length-1;t>=0;t--)ho(e.doc,"",n[t].from,n[t].to,"+delete");An(e)})}function $o(e,t,r){var n=oe(e.text,t+r,r);return n<0||n>e.text.length?null:n}function qo(e,t,r){var n=$o(e,t.ch,r);return null==n?null:new et(t.line,n,r<0?"after":"before")}function Zo(e,t,r,n,i){if(e){"rtl"==t.doc.direction&&(i=-i);var o=ce(r,t.doc.direction);if(o){var l,s=i<0?$(o):o[0],a=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var u=Dr(t,r);l=i<0?r.text.length-1:0;var c=Wr(t,u,l).top;l=le(function(e){return Wr(t,u,e).top==c},i<0==(1==s.level)?s.from:s.to-1,l),"before"==a&&(l=$o(r,l,1))}else l=i<0?s.to:s.from;return new et(n,l,a)}}return new et(n,i<0?r.text.length:0,i<0?"before":"after")}Bo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Bo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Bo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Bo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Bo.default=y?Bo.macDefault:Bo.pcDefault;var Qo={selectAll:io,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),V)},killLine:function(e){return _o(e,function(t){if(t.empty()){var r=Xe(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return _o(e,function(t){return{from:et(t.from().line,0),to:st(e.doc,et(t.to().line+1,0))}})},delLineLeft:function(e){return _o(e,function(e){return{from:et(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return _o(e,function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}})},delWrappedLineRight:function(e){return _o(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return el(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var r=Xe(e.doc,t),n=function(e){for(var t;t=Pt(e);)e=t.find(1,!0).line;return e}(r);n!=r&&(t=qe(n));return Zo(!0,e,r,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},j)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},j)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?el(e,t.head):n},j)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=R(e.getLine(o.line),o.ch,n);t.push(_(n-l%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return qn(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,o=Xe(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new et(i.line,i.ch-1)),i.ch>0)i=new et(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),et(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=Xe(e.doc,i.line-1).text;l&&(i=new et(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+l.charAt(l.length-1),et(i.line-1,l.length-1),i,"+transpose"))}r.push(new wi(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){return qn(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);An(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Jo(e,t){var r=Xe(e.doc,t),n=Rt(r);return n!=r&&(t=qe(n)),Zo(!0,e,n,t,1)}function el(e,t){var r=Jo(e,t.line),n=Xe(e.doc,r.line),i=ce(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(r.ch,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return et(r.line,l?0:o,r.sticky)}return r}function tl(e,t,r){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=U}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}var rl=new z;function nl(e,t,r,n){var i=e.state.keySeq;if(i){if(Ko(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:rl.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),il(e,i+" "+t,r,n))return!0}return il(e,t,r,n)}function il(e,t,r,n){var i=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Vo(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&Vo(t,e.options.extraKeys,r,e)||Vo(t,e.options.keyMap,r,e)}(e,t,n);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&sr(e,"keyHandled",e,t,r),"handled"!=i&&"multi"!=i||(we(r),bn(e)),!!i}function ol(e,t){var r=Xo(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?nl(e,"Shift-"+r,t,function(t){return tl(e,t,!0)})||nl(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return tl(e,t)}):nl(e,r,t,function(t){return tl(e,t)}))}var ll=null;function sl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=W(),ve(t,e)))){l&&s<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=ol(t,e);h&&(ll=i?n:null,!i&&88==n&&!Fe&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),r&&!y&&!i&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),pe(document,"keyup",r),pe(document,"mouseover",r))}H(t,"CodeMirror-crosshair"),fe(document,"keyup",r),fe(document,"mouseover",r)}(t)}}function al(e){16==e.keyCode&&(this.doc.sel.shift=!1),ve(this,e)}function ul(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||xr(t.display,e)||ve(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(h&&r==ll)return ll=null,void we(e);if(!h||e.which&&!(e.which<10)||!ol(t,e)){var i=String.fromCharCode(null==n?r:n);"\b"!=i&&(function(e,t,r){return nl(e,"'"+r+"'",t,function(t){return tl(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var cl,hl,fl=function(e,t,r){this.time=e,this.pos=t,this.button=r};function dl(e){var t=this,r=t.display;if(!(ve(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,xr(r,e))a||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));else if(!vl(t,e)){var n=sn(t,e),i=ke(e),o=n?function(e,t){var r=+new Date;return hl&&hl.compare(r,e,t)?(cl=hl=null,"triple"):cl&&cl.compare(r,e,t)?(hl=new fl(r,e,t),cl=null,"double"):(cl=new fl(r,e,t),hl=null,"single")}(n,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&function(e,t,r,n,i){var o="Click";"double"==n?o="Double"+o:"triple"==n&&(o="Triple"+o);return nl(e,jo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=U}finally{e.state.suppressEdits=!1}return n})}(t,i,n,o,e)||(1==i?n?function(e,t,r,n){l?setTimeout(E(wn,e),0):e.curOp.focus=W();var i,o=function(e,t,r){var n=e.getOption("configureMouse"),i=n?n(e,t,r):{};if(null==i.unit){var o=b?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey);null==i.addNew&&(i.addNew=y?r.metaKey:r.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(y?r.altKey:r.ctrlKey));return i}(e,r,n),u=e.doc.sel;e.options.dragDrop&&Ne&&!e.isReadOnly()&&"single"==r&&(i=u.contains(t))>-1&&(tt((i=u.ranges[i]).from(),t)<0||t.xRel>0)&&(tt(i.to(),t)>0||t.xRel<0)?function(e,t,r,n){var i=e.display,o=!1,u=Zn(e,function(t){a&&(i.scroller.draggable=!1),e.state.draggingText=!1,pe(i.wrapper.ownerDocument,"mouseup",u),pe(i.wrapper.ownerDocument,"mousemove",c),pe(i.scroller,"dragstart",h),pe(i.scroller,"drop",u),o||(we(t),n.addNew||ji(e.doc,r,null,null,n.extend),a&&!f||l&&9==s?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};a&&(i.scroller.draggable=!0);e.state.draggingText=u,u.copy=!n.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();fe(i.wrapper.ownerDocument,"mouseup",u),fe(i.wrapper.ownerDocument,"mousemove",c),fe(i.scroller,"dragstart",h),fe(i.scroller,"drop",u),xn(e),setTimeout(function(){return i.input.focus()},20)}(e,n,t,o):function(e,t,r,n){var i=e.display,o=e.doc;we(t);var l,s,a=o.sel,u=a.ranges;n.addNew&&!n.extend?(s=o.sel.contains(r),l=s>-1?u[s]:new wi(r,r)):(l=o.sel.primary(),s=o.sel.primIndex);if("rectangle"==n.unit)n.addNew||(l=new wi(r,r)),r=sn(e,t,!0,!0),s=-1;else{var c=pl(e,r,n.unit);l=n.extend?Ki(l,c.anchor,c.head,n.extend):c}n.addNew?-1==s?(s=u.length,qi(o,xi(e,u.concat([l]),s),{scroll:!1,origin:"*mouse"})):u.length>1&&u[s].empty()&&"char"==n.unit&&!n.extend?(qi(o,xi(e,u.slice(0,s).concat(u.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),a=o.sel):Yi(o,s,l,K):(s=0,qi(o,new bi([l],0),K),a=o.sel);var h=r;function f(t){if(0!=tt(h,t))if(h=t,"rectangle"==n.unit){for(var i=[],u=e.options.tabSize,c=R(Xe(o,r.line).text,r.ch,u),f=R(Xe(o,t.line).text,t.ch,u),d=Math.min(c,f),p=Math.max(c,f),g=Math.min(r.line,t.line),v=Math.min(e.lastLine(),Math.max(r.line,t.line));g<=v;g++){var m=Xe(o,g).text,y=X(m,d,u);d==p?i.push(new wi(et(g,y),et(g,y))):m.length>y&&i.push(new wi(et(g,y),et(g,X(m,p,u))))}i.length||i.push(new wi(r,r)),qi(o,xi(e,a.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=l,x=pl(e,t,n.unit),C=w.anchor;tt(x.anchor,C)>0?(b=x.head,C=ot(w.from(),x.anchor)):(b=x.anchor,C=it(w.to(),x.head));var S=a.ranges.slice(0);S[s]=function(e,t){var r=t.anchor,n=t.head,i=Xe(e.doc,r.line);if(0==tt(r,n)&&r.sticky==n.sticky)return t;var o=ce(i);if(!o)return t;var l=ae(o,r.ch,r.sticky),s=o[l];if(s.from!=r.ch&&s.to!=r.ch)return t;var a,u=l+(s.from==r.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return t;if(n.line!=r.line)a=(n.line-r.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=ae(o,n.ch,n.sticky),h=c-l||(n.ch-r.ch)*(1==s.level?-1:1);a=c==u-1||c==u?h<0:h>0}var f=o[u+(a?-1:0)],d=a==(1==f.level),p=d?f.from:f.to,g=d?"after":"before";return r.ch==p&&r.sticky==g?t:new wi(new et(r.line,p,g),n)}(e,new wi(st(o,C),b)),qi(o,xi(e,S,s),K)}}var d=i.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,t&&(we(t),i.input.focus()),pe(i.wrapper.ownerDocument,"mousemove",v),pe(i.wrapper.ownerDocument,"mouseup",m),o.history.lastSelOrigin=null}var v=Zn(e,function(t){0!==t.buttons&&ke(t)?function t(r){var l=++p;var s=sn(e,r,!0,"rectangle"==n.unit);if(!s)return;if(0!=tt(s,h)){e.curOp.focus=W(),f(s);var a=Tn(i,o);(s.line>=a.to||s.line<a.from)&&setTimeout(Zn(e,function(){p==l&&t(r)}),150)}else{var u=r.clientY<d.top?-20:r.clientY>d.bottom?20:0;u&&setTimeout(Zn(e,function(){p==l&&(i.scroller.scrollTop+=u,t(r))}),50)}}(t):g(t)}),m=Zn(e,g);e.state.selectingText=m,fe(i.wrapper.ownerDocument,"mousemove",v),fe(i.wrapper.ownerDocument,"mouseup",m)}(e,n,t,o)}(t,n,o,e):Le(e)==r.scroller&&we(e):2==i?(n&&ji(t.doc,n),setTimeout(function(){return r.input.focus()},20)):3==i&&(S?t.display.input.onContextMenu(e):xn(t)))}}function pl(e,t,r){if("char"==r)return new wi(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new wi(et(t.line,0),st(e.doc,et(t.line+1,0)));var n=r(e,t);return new wi(n.from,n.to)}function gl(e,t,r,n){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(c){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&we(t);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(o>s.bottom||!ye(e,r))return Ce(t);o-=s.top-l.viewOffset;for(var a=0;a<e.display.gutterSpecs.length;++a){var u=l.gutters.childNodes[a];if(u&&u.getBoundingClientRect().right>=i)return ge(e,r,e,Ze(e.doc,o),e.display.gutterSpecs[a].className,t),Ce(t)}}function vl(e,t){return gl(e,t,"gutterClick",!0)}function ml(e,t){xr(e.display,t)||function(e,t){if(!ye(e,"gutterContextMenu"))return!1;return gl(e,t,"gutterContextMenu",!1)}(e,t)||ve(e,t,"contextmenu")||S||e.display.input.onContextMenu(t)}function yl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zr(e)}fl.prototype.compare=function(e,t,r){return this.time+400>e&&0==tt(t,this.pos)&&r==this.button};var bl={toString:function(){return"CodeMirror.Init"}},wl={},xl={};function Cl(e,t,r){if(!t!=!(r&&r!=bl)){var n=e.display.dragFunctions,i=t?fe:pe;i(e.display.scroller,"dragstart",n.start),i(e.display.scroller,"dragenter",n.enter),i(e.display.scroller,"dragover",n.over),i(e.display.scroller,"dragleave",n.leave),i(e.display.scroller,"drop",n.drop)}}function Sl(e){e.options.lineWrapping?(H(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),jt(e)),ln(e),un(e),zr(e),setTimeout(function(){return zn(e)},100)}function Ll(e,t){var r=this;if(!(this instanceof Ll))return new Ll(e,t);this.options=t=t?I(t):{},I(wl,t,!1);var n=t.value;"string"==typeof n?n=new No(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var i=new Ll.inputStyles[t.inputStyle](this),o=this.display=new di(e,n,i,t);for(var u in o.wrapper.CodeMirror=this,yl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Un(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new z,keySeq:null,specialChars:null},t.autofocus&&!m&&o.input.focus(),l&&s<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(e){var t=e.display;fe(t.scroller,"mousedown",Zn(e,dl)),fe(t.scroller,"dblclick",l&&s<11?Zn(e,function(t){if(!ve(e,t)){var r=sn(e,t);if(r&&!vl(e,t)&&!xr(e.display,t)){we(t);var n=e.findWordAt(r);ji(e.doc,n.anchor,n.head)}}}):function(t){return ve(e,t)||we(t)});fe(t.scroller,"contextmenu",function(t){return ml(e,t)}),fe(t.input.getField(),"contextmenu",function(r){t.scroller.contains(r.target)||ml(e,r)});var r,n={end:0};function i(){t.activeTouch&&(r=setTimeout(function(){return t.activeTouch=null},1e3),(n=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}fe(t.scroller,"touchstart",function(i){if(!ve(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!vl(e,i)){t.input.ensurePolled(),clearTimeout(r);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),fe(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),fe(t.scroller,"touchend",function(r){var n=t.activeTouch;if(n&&!xr(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var l,s=e.coordsChar(t.activeTouch,"page");l=!n.prev||o(n,n.prev)?new wi(s,s):!n.prev.prev||o(n,n.prev.prev)?e.findWordAt(s):new wi(et(s.line,0),st(e.doc,et(s.line+1,0))),e.setSelection(l.anchor,l.head),e.focus(),we(r)}i()}),fe(t.scroller,"touchcancel",i),fe(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Hn(e,t.scroller.scrollTop),Pn(e,t.scroller.scrollLeft,!0),ge(e,"scroll",e))}),fe(t.scroller,"mousewheel",function(t){return yi(e,t)}),fe(t.scroller,"DOMMouseScroll",function(t){return yi(e,t)}),fe(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ve(e,t)||Se(t)},over:function(t){ve(e,t)||(!function(e,t){var r=sn(e,t);if(r){var n=document.createDocumentFragment();vn(e,r,n),e.display.dragCursor||(e.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),N(e.display.dragCursor,n)}}(e,t),Se(t))},start:function(t){return function(e,t){if(l&&(!e.state.draggingText||+new Date-Ao<100))Se(t);else if(!ve(e,t)&&!xr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!f)){var r=A("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),h&&r.parentNode.removeChild(r)}}(e,t)},drop:Zn(e,Oo),leave:function(t){ve(e,t)||Do(e)}};var a=t.input.getField();fe(a,"keyup",function(t){return al.call(e,t)}),fe(a,"keydown",Zn(e,sl)),fe(a,"keypress",Zn(e,ul)),fe(a,"focus",function(t){return Cn(e,t)}),fe(a,"blur",function(t){return Sn(e,t)})}(this),Fo(),Kn(this),this.curOp.forceUpdate=!0,Wi(this,n),t.autofocus&&!m||this.hasFocus()?setTimeout(E(Cn,this),20):Sn(this),xl)xl.hasOwnProperty(u)&&xl[u](this,t[u],bl);ui(this),t.finishInit&&t.finishInit(this);for(var c=0;c<kl.length;++c)kl[c](this);jn(this),a&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ll.defaults=wl,Ll.optionHandlers=xl;var kl=[];function Tl(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=dt(e,t).state:r="prev");var l=e.options.tabSize,s=Xe(o,t),a=R(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==U||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?R(Xe(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)f+=l,h+="\t";if(f<u&&(h+=_(u-f)),h!=c)return ho(o,h,et(t,0),et(t,c.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<c.length){var v=et(t,c.length);Yi(o,p,new wi(v,v));break}}}Ll.defineInitHook=function(e){return kl.push(e)};var Ml=null;function Nl(e){Ml=e}function Al(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var l=+new Date-200,s="paste"==i||e.state.pasteIncoming>l,a=We(t),u=null;if(s&&n.ranges.length>1)if(Ml&&Ml.text.join("\n")==t){if(n.ranges.length%Ml.text.length==0){u=[];for(var c=0;c<Ml.text.length;c++)u.push(o.splitLines(Ml.text[c]))}}else a.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(u=q(a,function(e){return[e]}));for(var h=e.curOp.updateInput,f=n.ranges.length-1;f>=0;f--){var d=n.ranges[f],p=d.from(),g=d.to();d.empty()&&(r&&r>0?p=et(p.line,p.ch-r):e.state.overwrite&&!s?g=et(g.line,Math.min(Xe(o,g.line).text.length,g.ch+$(a).length)):s&&Ml&&Ml.lineWise&&Ml.text.join("\n")==a.join("\n")&&(p=g=et(p.line,0)));var v={from:p,to:g,text:u?u[f%u.length]:a,origin:i||(s?"paste":e.state.cutIncoming>l?"cut":"+input")};lo(e.doc,v),sr(e,"inputRead",e,v)}t&&!s&&Dl(e,t),An(e),e.curOp.updateInput<2&&(e.curOp.updateInput=h),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ol(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||qn(t,function(){return Al(t,r,0,null,"paste")}),!0}function Dl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){l=Tl(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Xe(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Tl(e,i.head.line,"smart"));l&&sr(e,"electricInput",e,i.head.line)}}}function Wl(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:et(i,0),head:et(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function Hl(e,t,r,n){e.setAttribute("autocorrect",r?"":"off"),e.setAttribute("autocapitalize",n?"":"off"),e.setAttribute("spellcheck",!!t)}function Fl(){var e=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=A("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Hl(e),t}function Pl(e,t,r,n,i){var o=t,l=r,s=Xe(e,t.line),a=i&&"rtl"==e.direction?-r:r;function u(n){var o,l;if(null==(o=i?function(e,t,r,n){var i=ce(t,e.doc.direction);if(!i)return qo(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=ae(i,r.ch,r.sticky),l=i[o];if("ltr"==e.doc.direction&&l.level%2==0&&(n>0?l.to>r.ch:l.from<r.ch))return qo(t,r,n);var s,a=function(e,r){return $o(t,e instanceof et?e.ch:e,r)},u=function(r){return e.options.lineWrapping?(s=s||Dr(e,t),Zr(e,t,s,r)):{begin:0,end:t.text.length}},c=u("before"==r.sticky?a(r,-1):r.ch);if("rtl"==e.doc.direction||1==l.level){var h=1==l.level==n<0,f=a(r,h?1:-1);if(null!=f&&(h?f<=l.to&&f<=c.end:f>=l.from&&f>=c.begin)){var d=h?"before":"after";return new et(r.line,f,d)}}var p=function(e,t,n){for(var o=function(e,t){return t?new et(r.line,a(e,1),"before"):new et(r.line,e,"after")};e>=0&&e<i.length;e+=t){var l=i[e],s=t>0==(1!=l.level),u=s?n.begin:a(n.end,-1);if(l.from<=u&&u<l.to)return o(u,s);if(u=s?l.from:a(l.to,-1),n.begin<=u&&u<n.end)return o(u,s)}},g=p(o+n,n,c);if(g)return g;var v=n>0?c.end:a(c.begin,-1);return null==v||n>0&&v==t.text.length||!(g=p(n>0?0:i.length-1,n,u(v)))?null:g}(e.cm,s,t,r):qo(s,t,r))){if(n||(l=t.line+a)<e.first||l>=e.first+e.size||(t=new et(l,t.ch,t.sticky),!(s=Xe(e,l))))return!1;t=Zo(i,e.cm,s,t.line,a)}else t=o;return!0}if("char"==n)u();else if("column"==n)u(!0);else if("word"==n||"group"==n)for(var c=null,h="group"==n,f=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(r<0)||u(!d);d=!1){var p=s.text.charAt(t.ch)||"\n",g=te(p,f)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||d||g||(g="s"),c&&c!=g){r<0&&(r=1,u(),t.sticky="after");break}if(g&&(c=g),r>0&&!u(!d))break}var v=ro(e,t,o,l,!0);return rt(o,v)&&(v.hitSide=!0),v}function El(e,t,r,n){var i,o,l=e.doc,s=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(a-.5*en(e.display),3);i=(r>0?t.bottom:t.top)+r*u}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;(o=$r(e,s,i)).outside;){if(r<0?i<=0:i>=l.height){o.hitSide=!0;break}i+=5*r}return o}var Il=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Rl(e,t){var r=Or(e,t.line);if(!r||r.hidden)return null;var n=Xe(e.doc,t.line),i=Nr(r,n,t.line),o=ce(n,e.doc.direction),l="left";o&&(l=ae(o,t.ch)%2?"right":"left");var s=Pr(i.map,t.ch,l);return s.offset="right"==s.collapse?s.end:s.start,s}function zl(e,t){return t&&(e.bad=!0),e}function Bl(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return zl(e.clipPos(et(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return Gl(o,t,r)}}function Gl(e,t,r){var n=e.text.firstChild,i=!1;if(!t||!D(n,t))return zl(et(qe(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[r],r=0,!t)){var o=e.rest?$(e.rest):e.line;return zl(et(qe(o),o.text.length),i)}var l=3==t.nodeType?t:null,s=t;for(l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,r&&(r=l.nodeValue.length));s.parentNode!=n;)s=s.parentNode;var a=e.measure,u=a.maps;function c(t,r,n){for(var i=-1;i<(u?u.length:0);i++)for(var o=i<0?a.map:u[i],l=0;l<o.length;l+=3){var s=o[l+2];if(s==t||s==r){var c=qe(i<0?e.line:e.rest[i]),h=o[l]+n;return(n<0||s!=t)&&(h=o[l+(n?1:0)]),et(c,h)}}}var h=c(l,s,r);if(h)return zl(h,i);for(var f=s.nextSibling,d=l?l.nodeValue.length-r:0;f;f=f.nextSibling){if(h=c(f,f.firstChild,0))return zl(et(h.line,h.ch-d),i);d+=f.textContent.length}for(var p=s.previousSibling,g=r;p;p=p.previousSibling){if(h=c(p,p.firstChild,-1))return zl(et(h.line,h.ch+g),i);g+=p.textContent.length}}Il.prototype.init=function(e){var t=this,r=this,n=r.cm,i=r.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function l(e){if(o(e)&&!ve(n,e)){if(n.somethingSelected())Nl({lineWise:!1,text:n.getSelections()}),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=Wl(n);Nl({lineWise:!0,text:t.text}),"cut"==e.type&&n.operation(function(){n.setSelections(t.ranges,0,V),n.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var l=Ml.text.join("\n");if(e.clipboardData.setData("Text",l),e.clipboardData.getData("Text")==l)return void e.preventDefault()}var s=Fl(),a=s.firstChild;n.display.lineSpace.insertBefore(s,n.display.lineSpace.firstChild),a.value=Ml.text.join("\n");var u=document.activeElement;P(a),setTimeout(function(){n.display.lineSpace.removeChild(s),u.focus(),u==i&&r.showPrimarySelection()},50)}}Hl(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),fe(i,"paste",function(e){!o(e)||ve(n,e)||Ol(e,n)||s<=11&&setTimeout(Zn(n,function(){return t.updateFromDOM()}),20)}),fe(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),fe(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),fe(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),fe(i,"touchstart",function(){return r.forceCompositionEnd()}),fe(i,"input",function(){t.composing||t.readFromDOMSoon()}),fe(i,"copy",l),fe(i,"cut",l)},Il.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Il.prototype.prepareSelection=function(){var e=gn(this.cm,!1);return e.focus=document.activeElement==this.div,e},Il.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Il.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Il.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var l=Bl(t,e.anchorNode,e.anchorOffset),s=Bl(t,e.focusNode,e.focusOffset);if(!l||l.bad||!s||s.bad||0!=tt(ot(l,s),i)||0!=tt(it(l,s),o)){var a=t.display.view,u=i.line>=t.display.viewFrom&&Rl(t,i)||{node:a[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Rl(t,o);if(!c){var h=a[a.length-1].measure,f=h.maps?h.maps[h.maps.length-1]:h.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(u&&c){var d,p=e.rangeCount&&e.getRangeAt(0);try{d=k(u.node,u.offset,c.offset,c.node)}catch(De){}d&&(!r&&t.state.focused?(e.collapse(u.node,u.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),p&&null==e.anchorNode?e.addRange(p):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Il.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Il.prototype.showMultipleSelections=function(e){N(this.cm.display.cursorDiv,e.cursors),N(this.cm.display.selectionDiv,e.selection)},Il.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Il.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Il.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Il.prototype.blur=function(){this.div.blur()},Il.prototype.getField=function(){return this.div},Il.prototype.supportsTouch=function(){return!0},Il.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():qn(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Il.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Il.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&c&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=Bl(t,e.anchorNode,e.anchorOffset),n=Bl(t,e.focusNode,e.focusOffset);r&&n&&qn(t,function(){qi(t.doc,Ci(r,n),V),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Il.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,n=this.cm,i=n.display,o=n.doc.sel.primary(),l=o.from(),s=o.to();if(0==l.ch&&l.line>n.firstLine()&&(l=et(l.line-1,Xe(n.doc,l.line-1).length)),s.ch==Xe(n.doc,s.line).text.length&&s.line<n.lastLine()&&(s=et(s.line+1,0)),l.line<i.viewFrom||s.line>i.viewTo-1)return!1;l.line==i.viewFrom||0==(e=an(n,l.line))?(t=qe(i.view[0].line),r=i.view[0].node):(t=qe(i.view[e].line),r=i.view[e-1].node.nextSibling);var a,u,c=an(n,s.line);if(c==i.view.length-1?(a=i.viewTo-1,u=i.lineDiv.lastChild):(a=qe(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!r)return!1;for(var h=n.doc.splitLines(function(e,t,r,n,i){var o="",l=!1,s=e.doc.lineSeparator(),a=!1;function u(){l&&(o+=s,a&&(o+=s),l=a=!1)}function c(e){e&&(u(),o+=e)}function h(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(r)return void c(r);var o,f=t.getAttribute("cm-marker");if(f){var d=e.findMarks(et(n,0),et(i+1,0),(v=+f,function(e){return e.id==v}));return void(d.length&&(o=d[0].find(0))&&c(Ye(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&u();for(var g=0;g<t.childNodes.length;g++)h(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(a=!0),p&&(l=!0)}else 3==t.nodeType&&c(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;h(t),t!=r;)t=t.nextSibling,a=!1;return o}(n,r,u,t,a)),f=Ye(n.doc,et(t,0),et(a,Xe(n.doc,a).text.length));h.length>1&&f.length>1;)if($(h)==$(f))h.pop(),f.pop(),a--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),t++}for(var d=0,p=0,g=h[0],v=f[0],m=Math.min(g.length,v.length);d<m&&g.charCodeAt(d)==v.charCodeAt(d);)++d;for(var y=$(h),b=$(f),w=Math.min(y.length-(1==h.length?d:0),b.length-(1==f.length?d:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==h.length&&1==f.length&&t==l.line)for(;d&&d>l.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)d--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var x=et(t,d),C=et(a,f.length?$(f).length-p:0);return h.length>1||h[0]||tt(x,C)?(ho(n.doc,h,x,C,"+input"),!0):void 0},Il.prototype.ensurePolled=function(){this.forceCompositionEnd()},Il.prototype.reset=function(){this.forceCompositionEnd()},Il.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Il.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Il.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||qn(this.cm,function(){return un(e.cm)})},Il.prototype.setUneditable=function(e){e.contentEditable="false"},Il.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Zn(this.cm,Al)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Il.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Il.prototype.onContextMenu=function(){},Il.prototype.resetPosition=function(){},Il.prototype.needsContentAttribute=!0;var Ul=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new z,this.hasSelection=!1,this.composing=null};Ul.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ve(n,e)){if(n.somethingSelected())Nl({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Wl(n);Nl({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,V):(r.prevInput="",i.value=t.text.join("\n"),P(i))}"cut"==e.type&&(n.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(i.style.width="0px"),fe(i,"input",function(){l&&s>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()}),fe(i,"paste",function(e){ve(n,e)||Ol(e,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())}),fe(i,"cut",o),fe(i,"copy",o),fe(e.scroller,"paste",function(t){if(!xr(e,t)&&!ve(n,t)){if(!i.dispatchEvent)return n.state.pasteIncoming=+new Date,void r.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}}),fe(e.lineSpace,"selectstart",function(t){xr(e,t)||we(t)}),fe(i,"compositionstart",function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),fe(i,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Ul.prototype.createField=function(e){this.wrapper=Fl(),this.textarea=this.wrapper.firstChild},Ul.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ul.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=gn(e);if(e.options.moveInputWithCursor){var i=Xr(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+l.left-o.left))}return n},Ul.prototype.showSelection=function(e){var t=this.cm.display;N(t.cursorDiv,e.cursors),N(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ul.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&P(this.textarea),l&&s>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",l&&s>=9&&(this.hasSelection=null))}},Ul.prototype.getField=function(){return this.textarea},Ul.prototype.supportsTouch=function(){return!1},Ul.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||W()!=this.textarea))try{this.textarea.focus()}catch(De){}},Ul.prototype.blur=function(){this.textarea.blur()},Ul.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ul.prototype.receivedFocus=function(){this.slowPoll()},Ul.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ul.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))})},Ul.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||He(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(l&&s>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,u=Math.min(n.length,i.length);a<u&&n.charCodeAt(a)==i.charCodeAt(a);)++a;return qn(t,function(){Al(t,i.slice(a),n.length-a,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ul.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ul.prototype.onKeyPress=function(){l&&s>=9&&(this.hasSelection=null),this.fastPoll()},Ul.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=sn(r,e),u=n.scroller.scrollTop;if(o&&!h){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(o)&&Zn(r,qi)(r.doc,Ci(o),V);var c,f=i.style.cssText,d=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(l?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a&&(c=window.scrollY),n.input.focus(),a&&window.scrollTo(null,c),n.input.reset(),r.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=m,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),l&&s>=9&&v(),S){Se(e);var g=function(){pe(window,"mouseup",g),setTimeout(m,20)};fe(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=i.selectionStart){var e=r.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,n.selForContextMenu=r.doc.sel}}function m(){if(t.contextMenuPending==m&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=f,l&&s<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=u),null!=i.selectionStart)){(!l||l&&s<9)&&v();var e=0,o=function(){n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Zn(r,io)(r):e++<10?n.detectingSelectAll=setTimeout(o,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(o,200)}}},Ul.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ul.prototype.setUneditable=function(){},Ul.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function r(r,n,i,o){e.defaults[r]=n,i&&(t[r]=o?function(e,t,r){r!=bl&&i(e,t,r)}:i)}e.defineOption=r,e.Init=bl,r("value","",function(e,t){return e.setValue(t)},!0),r("mode",null,function(e,t){e.doc.modeOption=t,Mi(e)},!0),r("indentUnit",2,Mi,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(e){Ni(e),zr(e),un(e)},!0),r("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,r.push(et(n,o))}n++});for(var i=r.length-1;i>=0;i--)ho(e.doc,t,r[i],et(r[i].line,r[i].ch+t.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=bl&&e.refresh()}),r("specialCharPlaceholder",Qt,function(e){return e.refresh()},!0),r("electricChars",!0),r("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),r("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),r("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),r("rtlMoveVisually",!w),r("wholeLineUpdateBefore",!0),r("theme","default",function(e){yl(e),fi(e)},!0),r("keyMap","default",function(e,t,r){var n=Yo(t),i=r!=bl&&Yo(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,Sl,!0),r("gutters",[],function(e,t){e.display.gutterSpecs=ci(t,e.options.lineNumbers),fi(e)},!0),r("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?nn(e.display)+"px":"0",e.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(e){return zn(e)},!0),r("scrollbarStyle","native",function(e){Un(e),zn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),r("lineNumbers",!1,function(e,t){e.display.gutterSpecs=ci(e.options.gutters,t),fi(e)},!0),r("firstLineNumber",1,fi,!0),r("lineNumberFormatter",function(e){return e},fi,!0),r("showCursorWhenSelecting",!1,pn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(e,t){"nocursor"==t&&(Sn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),r("screenReaderLabel",null,function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)}),r("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),r("dragDrop",!0,Cl),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,pn,!0),r("singleCursorHeightPerLine",!0,pn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Ni,!0),r("addModeClass",!1,Ni,!0),r("pollInterval",100),r("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),r("historyEventDelay",1250),r("viewportMargin",10,function(e){return e.refresh()},!0),r("maxHighlightLength",1e4,Ni,!0),r("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),r("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),r("autofocus",null),r("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),r("phrases",null)}(Ll),function(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];n[e]==r&&"mode"!=e||(n[e]=r,t.hasOwnProperty(e)&&Zn(this,t[e])(this,r,i),ge(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Yo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Qn(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");!function(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},function(e){return e.priority}),this.state.modeGen++,un(this)}),removeOverlay:Qn(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void un(this)}}),indentLine:Qn(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Qe(this.doc,e)&&Tl(this,e,t,r)}),indentSelection:Qn(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(Tl(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&An(this));else{var o=i.from(),l=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var a=s;a<r;++a)Tl(this,a,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[n].from().ch>0&&Yi(this.doc,n,new wi(o,u[n].to()),V)}}}),getTokenAt:function(e,t){return yt(this,e,t)},getLineTokens:function(e,t){return yt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=st(this.doc,e);var t,r=ft(this,Xe(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!r.hasOwnProperty(t))return n;var i=r[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&n.push(i[o[t]]);else if(o[t])for(var l=0;l<o[t].length;l++){var s=i[o[t][l]];s&&n.push(s)}else o.helperType&&i[o.helperType]?n.push(i[o.helperType]):i[o.name]&&n.push(i[o.name]);for(var a=0;a<i._global.length;a++){var u=i._global[a];u.pred(o,this)&&-1==B(n,u.val)&&n.push(u.val)}return n},getStateAfter:function(e,t){var r=this.doc;return dt(this,(e=lt(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return Xr(this,null==e?r.head:"object"==typeof e?st(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return jr(this,st(this.doc,e),t||"page")},coordsChar:function(e,t){return $r(this,(e=Kr(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Kr(this,{top:e,left:0},t||"page").top,Ze(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=Xe(this.doc,e)}else n=e;return Vr(this,n,{top:0,left:0},t||"page",r||i).top+(i?this.doc.height-Vt(n):0)},defaultTextHeight:function(){return en(this.display)},defaultCharWidth:function(){return tn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o,l,s,a=this.display,u=(e=Xr(this,st(this.doc,e))).bottom,c=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==n)u=e.top;else if("above"==n||"near"==n){var h=Math.max(a.wrapper.clientHeight,this.doc.height),f=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?u=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(u=e.bottom),c+t.offsetWidth>f&&(c=f-t.offsetWidth)}t.style.top=u+"px",t.style.left=t.style.right="","right"==i?(c=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?c=0:"middle"==i&&(c=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=c+"px"),r&&(o=this,l={left:c,top:u,right:c+t.offsetWidth,bottom:u+t.offsetHeight},null!=(s=Mn(o,l)).scrollTop&&Hn(o,s.scrollTop),null!=s.scrollLeft&&Pn(o,s.scrollLeft))},triggerOnKeyDown:Qn(sl),triggerOnKeyPress:Qn(ul),triggerOnKeyUp:al,triggerOnMouseDown:Qn(dl),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:Qn(function(e){Dl(this,e)}),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=st(this.doc,e),l=0;l<t&&!(o=Pl(this.doc,o,i,r,n)).hitSide;++l);return o},moveH:Qn(function(e,t){var r=this;this.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Pl(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},j)}),deleteH:Qn(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):_o(this,function(r){var i=Pl(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var l=st(this.doc,e),s=0;s<t;++s){var a=Xr(this,l,"div");if(null==o?o=a.left:a.left=o,(l=El(this,a,i,r)).hitSide)break}return l},moveV:Qn(function(e,t){var r=this,n=this.doc,i=[],o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return e<0?l.from():l.to();var s=Xr(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=El(r,s,e,t);return"page"==t&&l==n.sel.primary()&&Nn(r,jr(r,a,"div").top-s.top),a},j),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=Xe(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!r?++n:--r;for(var o=t.charAt(r),l=te(o,i)?function(e){return te(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};r>0&&l(t.charAt(r-1));)--r;for(;n<t.length&&l(t.charAt(n));)++n}return new wi(et(e.line,r),et(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?H(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),ge(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==W()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Qn(function(e,t){On(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-kr(this)-this.display.barHeight,width:e.scrollWidth-kr(this)-this.display.barWidth,clientHeight:Mr(this),clientWidth:Tr(this)}},scrollIntoView:Qn(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Dn(e),e.curOp.scrollToPos=t}(this,e):Wn(this,e.from,e.to,e.margin)}),setSize:Qn(function(e,t){var r=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Rr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){cn(r,i,"widget");break}++i}),this.curOp.forceUpdate=!0,ge(this,"refresh",this)}),operation:function(e){return qn(this,e)},startOperation:function(){return Kn(this)},endOperation:function(){return jn(this)},refresh:Qn(function(){var e=this.display.cachedTextHeight;un(this),this.curOp.forceUpdate=!0,zr(this),On(this,this.doc.scrollLeft,this.doc.scrollTop),li(this.display),(null==e||Math.abs(e-en(this.display))>.5||this.options.lineWrapping)&&ln(this),ge(this,"refresh",this)}),swapDoc:Qn(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Wi(this,e),zr(this),this.display.input.reset(),On(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sr(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),r[t]._global.push({pred:i,val:o})}}(Ll);var Vl="iter insert remove copy getEditor constructor".split(" ");for(var Kl in No.prototype)No.prototype.hasOwnProperty(Kl)&&B(Vl,Kl)<0&&(Ll.prototype[Kl]=function(e){return function(){return e.apply(this.doc,arguments)}}(No.prototype[Kl]));return be(No),Ll.inputStyles={textarea:Ul,contenteditable:Il},Ll.defineMode=function(e){Ll.defaults.mode||"null"==e||(Ll.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ee[e]=t}.apply(this,arguments)},Ll.defineMIME=function(e,t){Ie[e]=t},Ll.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ll.defineMIME("text/plain","null"),Ll.defineExtension=function(e,t){Ll.prototype[e]=t},Ll.defineDocExtension=function(e,t){No.prototype[e]=t},Ll.fromTextArea=function(e,t){if((t=t?I(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=W();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=s.getValue()}var i;if(e.form&&(fe(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var l=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=l}}catch(De){}}t.finishInit=function(r){r.save=n,r.getTextArea=function(){return e},r.toTextArea=function(){r.toTextArea=isNaN,n(),e.parentNode.removeChild(r.getWrapperElement()),e.style.display="",e.form&&(pe(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var s=Ll(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},function(e){e.off=pe,e.on=fe,e.wheelEventPixels=mi,e.Doc=No,e.splitLines=We,e.countColumn=R,e.findColumn=X,e.isWordChar=ee,e.Pass=U,e.signal=ge,e.Line=Xt,e.changeEnd=Si,e.scrollbarModel=Gn,e.Pos=et,e.cmpPos=tt,e.modes=Ee,e.mimeModes=Ie,e.resolveMode=Re,e.getMode=ze,e.modeExtensions=Be,e.extendMode=Ge,e.copyState=Ue,e.startState=Ke,e.innerMode=Ve,e.commands=Qo,e.keyMap=Bo,e.keyName=Xo,e.isModifierKey=Ko,e.lookupKey=Vo,e.normalizeKeyMap=Uo,e.StringStream=je,e.SharedTextMarker=Lo,e.TextMarker=Co,e.LineWidget=bo,e.e_preventDefault=we,e.e_stopPropagation=xe,e.e_stop=Se,e.addClass=H,e.contains=D,e.rmClass=T,e.keyNames=Eo}(Ll),Ll.version="5.56.0",Ll});
},{}],"GqVd":[function(require,module,exports) {
var define;
var t;!function(n){"object"==typeof exports&&"object"==typeof module?n(require("../../lib/codemirror")):"function"==typeof t&&t.amd?t(["../../lib/codemirror"],n):n(CodeMirror)}(function(t){"use strict";var n,e,r=t.Pos;function i(t,n){for(var e=function(t){var n=t.flags;return null!=n?n:(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":"")}(t),r=e,i=0;i<n.length;i++)-1==r.indexOf(n.charAt(i))&&(r+=n.charAt(i));return e==r?t:new RegExp(t.source,r)}function o(t){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source)}function l(t,n,e){n=i(n,"g");for(var o=e.line,l=e.ch,h=t.lastLine();o<=h;o++,l=0){n.lastIndex=l;var s=t.getLine(o),c=n.exec(s);if(c)return{from:r(o,c.index),to:r(o,c.index+c[0].length),match:c}}}function h(t,n,e){for(var r,i=0;i<=t.length;){n.lastIndex=i;var o=n.exec(t);if(!o)break;var l=o.index+o[0].length;if(l>t.length-e)break;(!r||l>r.index+r[0].length)&&(r=o),i=o.index+1}return r}function s(t,n,e){n=i(n,"g");for(var o=e.line,l=e.ch,s=t.firstLine();o>=s;o--,l=-1){var c=t.getLine(o),f=h(c,n,l<0?0:c.length-l);if(f)return{from:r(o,f.index),to:r(o,f.index+f[0].length),match:f}}}function c(t,n,e,r){if(t.length==n.length)return e;for(var i=0,o=e+Math.max(0,t.length-n.length);;){if(i==o)return i;var l=i+o>>1,h=r(t.slice(0,l)).length;if(h==e)return l;h>e?o=l:i=l+1}}function f(t,f,u,a){var g;this.atOccurrence=!1,this.doc=t,u=u?t.clipPos(u):r(0,0),this.pos={from:u,to:u},"object"==typeof a?g=a.caseFold:(g=a,a=null),"string"==typeof f?(null==g&&(g=!1),this.matches=function(i,o){return(i?function(t,i,o,l){if(!i.length)return null;var h=l?n:e,s=h(i).split(/\r|\n\r?/);t:for(var f=o.line,u=o.ch,a=t.firstLine()-1+s.length;f>=a;f--,u=-1){var g=t.getLine(f);u>-1&&(g=g.slice(0,u));var m=h(g);if(1==s.length){var v=m.lastIndexOf(s[0]);if(-1==v)continue t;return{from:r(f,c(g,m,v,h)),to:r(f,c(g,m,v+s[0].length,h))}}var d=s[s.length-1];if(m.slice(0,d.length)==d){var p=1;for(o=f-s.length+1;p<s.length-1;p++)if(h(t.getLine(o+p))!=s[p])continue t;var x=t.getLine(f+1-s.length),L=h(x);if(L.slice(L.length-s[0].length)==s[0])return{from:r(f+1-s.length,c(x,L,x.length-s[0].length,h)),to:r(f,c(g,m,d.length,h))}}}}:function(t,i,o,l){if(!i.length)return null;var h=l?n:e,s=h(i).split(/\r|\n\r?/);t:for(var f=o.line,u=o.ch,a=t.lastLine()+1-s.length;f<=a;f++,u=0){var g=t.getLine(f).slice(u),m=h(g);if(1==s.length){var v=m.indexOf(s[0]);if(-1==v)continue t;return o=c(g,m,v,h)+u,{from:r(f,c(g,m,v,h)+u),to:r(f,c(g,m,v+s[0].length,h)+u)}}var d=m.length-s[0].length;if(m.slice(d)==s[0]){for(var p=1;p<s.length-1;p++)if(h(t.getLine(f+p))!=s[p])continue t;var x=t.getLine(f+s.length-1),L=h(x),C=s[s.length-1];if(L.slice(0,C.length)==C)return{from:r(f,c(g,m,d,h)+u),to:r(f+s.length-1,c(x,L,C.length,h))}}}})(t,f,o,g)}):(f=i(f,"gm"),a&&!1===a.multiline?this.matches=function(n,e){return(n?s:l)(t,f,e)}:this.matches=function(n,e){return(n?function(t,n,e){if(!o(n))return s(t,n,e);n=i(n,"gm");for(var l,c=1,f=t.getLine(e.line).length-e.ch,u=e.line,a=t.firstLine();u>=a;){for(var g=0;g<c&&u>=a;g++){var m=t.getLine(u--);l=null==l?m:m+"\n"+l}c*=2;var v=h(l,n,f);if(v){var d=l.slice(0,v.index).split("\n"),p=v[0].split("\n"),x=u+d.length,L=d[d.length-1].length;return{from:r(x,L),to:r(x+p.length-1,1==p.length?L+p[0].length:p[p.length-1].length),match:v}}}}:function(t,n,e){if(!o(n))return l(t,n,e);n=i(n,"gm");for(var h,s=1,c=e.line,f=t.lastLine();c<=f;){for(var u=0;u<s&&!(c>f);u++){var a=t.getLine(c++);h=null==h?a:h+"\n"+a}s*=2,n.lastIndex=e.ch;var g=n.exec(h);if(g){var m=h.slice(0,g.index).split("\n"),v=g[0].split("\n"),d=e.line+m.length-1,p=m[m.length-1].length;return{from:r(d,p),to:r(d+v.length-1,1==v.length?p+v[0].length:v[v.length-1].length),match:g}}}})(t,f,e)})}String.prototype.normalize?(n=function(t){return t.normalize("NFD").toLowerCase()},e=function(t){return t.normalize("NFD")}):(n=function(t){return t.toLowerCase()},e=function(t){return t}),f.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(n){for(var e=this.matches(n,this.doc.clipPos(n?this.pos.from:this.pos.to));e&&0==t.cmpPos(e.from,e.to);)n?e.from.ch?e.from=r(e.from.line,e.from.ch-1):e=e.from.line==this.doc.firstLine()?null:this.matches(n,this.doc.clipPos(r(e.from.line-1))):e.to.ch<this.doc.getLine(e.to.line).length?e.to=r(e.to.line,e.to.ch+1):e=e.to.line==this.doc.lastLine()?null:this.matches(n,r(e.to.line+1,0));if(e)return this.pos=e,this.atOccurrence=!0,this.pos.match||!0;var i=r(n?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(n,e){if(this.atOccurrence){var i=t.splitLines(n);this.doc.replaceRange(i,this.pos.from,this.pos.to,e),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",function(t,n,e){return new f(this.doc,t,n,e)}),t.defineDocExtension("getSearchCursor",function(t,n,e){return new f(this,t,n,e)}),t.defineExtension("selectMatches",function(n,e){for(var r=[],i=this.getSearchCursor(n,this.getCursor("from"),e);i.findNext()&&!(t.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)})});
},{"../../lib/codemirror":"e7zg"}],"is1v":[function(require,module,exports) {
var define;
var e;!function(o){"object"==typeof exports&&"object"==typeof module?o(require("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],o):o(CodeMirror)}(function(e){function o(o,n,t){var i,r=o.getWrapperElement();return(i=r.appendChild(document.createElement("div"))).className=t?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?i.innerHTML=n:i.appendChild(n),e.addClass(r,"dialog-opened"),i}function n(e,o){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=o}e.defineExtension("openDialog",function(t,i,r){r||(r={}),n(this,null);var u=o(this,t,r.bottom),l=!1,a=this;function c(o){if("string"==typeof o)d.value=o;else{if(l)return;l=!0,e.rmClass(u.parentNode,"dialog-opened"),u.parentNode.removeChild(u),a.focus(),r.onClose&&r.onClose(u)}}var s,d=u.getElementsByTagName("input")[0];return d?(d.focus(),r.value&&(d.value=r.value,!1!==r.selectValueOnOpen&&d.select()),r.onInput&&e.on(d,"input",function(e){r.onInput(e,d.value,c)}),r.onKeyUp&&e.on(d,"keyup",function(e){r.onKeyUp(e,d.value,c)}),e.on(d,"keydown",function(o){r&&r.onKeyDown&&r.onKeyDown(o,d.value,c)||((27==o.keyCode||!1!==r.closeOnEnter&&13==o.keyCode)&&(d.blur(),e.e_stop(o),c()),13==o.keyCode&&i(d.value,o))}),!1!==r.closeOnBlur&&e.on(u,"focusout",function(e){null!==e.relatedTarget&&c()})):(s=u.getElementsByTagName("button")[0])&&(e.on(s,"click",function(){c(),a.focus()}),!1!==r.closeOnBlur&&e.on(s,"blur",c),s.focus()),c}),e.defineExtension("openConfirm",function(t,i,r){n(this,null);var u=o(this,t,r&&r.bottom),l=u.getElementsByTagName("button"),a=!1,c=this,s=1;function d(){a||(a=!0,e.rmClass(u.parentNode,"dialog-opened"),u.parentNode.removeChild(u),c.focus())}l[0].focus();for(var f=0;f<l.length;++f){var p=l[f];!function(o){e.on(p,"click",function(n){e.e_preventDefault(n),d(),o&&o(c)})}(i[f]),e.on(p,"blur",function(){--s,setTimeout(function(){s<=0&&d()},200)}),e.on(p,"focus",function(){++s})}}),e.defineExtension("openNotification",function(t,i){n(this,c);var r,u=o(this,t,i&&i.bottom),l=!1,a=i&&void 0!==i.duration?i.duration:5e3;function c(){l||(l=!0,clearTimeout(r),e.rmClass(u.parentNode,"dialog-opened"),u.parentNode.removeChild(u))}return e.on(u,"click",function(o){e.e_preventDefault(o),c()}),a&&(r=setTimeout(c,a)),c})});
},{"../../lib/codemirror":"e7zg"}],"pD3F":[function(require,module,exports) {
var define;
var t;!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof t&&t.amd?t(["../../lib/codemirror"],e):e(CodeMirror)}(function(t){var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=t.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function i(t){return t&&t.bracketRegex||/[(){}[\]]/}function a(t,e,a){var o=t.getLineHandle(e.line),l=e.ch-1,s=a&&a.afterCursor;null==s&&(s=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var h=i(a),u=!s&&l>=0&&h.test(o.text.charAt(l))&&r[o.text.charAt(l)]||h.test(o.text.charAt(l+1))&&r[o.text.charAt(++l)];if(!u)return null;var f=">"==u.charAt(1)?1:-1;if(a&&a.strict&&f>0!=(l==e.ch))return null;var m=t.getTokenTypeAt(n(e.line,l+1)),g=c(t,n(e.line,l+(f>0?1:0)),f,m||null,a);return null==g?null:{from:n(e.line,l),to:g&&g.pos,match:g&&g.ch==u.charAt(0),forward:f>0}}function c(t,e,a,c,o){for(var l=o&&o.maxScanLineLength||1e4,s=o&&o.maxScanLines||1e3,h=[],u=i(o),f=a>0?Math.min(e.line+s,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-s),m=e.line;m!=f;m+=a){var g=t.getLine(m);if(g){var d=a>0?0:g.length-1,k=a>0?g.length:-1;if(!(g.length>l))for(m==e.line&&(d=e.ch-(a<0?1:0));d!=k;d+=a){var p=g.charAt(d);if(u.test(p)&&(void 0===c||t.getTokenTypeAt(n(m,d+1))==c)){var v=r[p];if(v&&">"==v.charAt(1)==a>0)h.push(p);else{if(!h.length)return{pos:n(m,d),ch:p};h.pop()}}}}}return m-a!=(a>0?t.lastLine():t.firstLine())&&null}function o(t,r,i){for(var c=t.state.matchBrackets.maxHighlightLineLength||1e3,o=[],l=t.listSelections(),s=0;s<l.length;s++){var h=l[s].empty()&&a(t,l[s].head,i);if(h&&t.getLine(h.from.line).length<=c){var u=h.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";o.push(t.markText(h.from,n(h.from.line,h.from.ch+1),{className:u})),h.to&&t.getLine(h.to.line).length<=c&&o.push(t.markText(h.to,n(h.to.line,h.to.ch+1),{className:u}))}}if(o.length){e&&t.state.focused&&t.focus();var f=function(){t.operation(function(){for(var t=0;t<o.length;t++)o[t].clear()})};if(!r)return f;setTimeout(f,800)}}function l(t){t.operation(function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=o(t,!1,t.state.matchBrackets)})}t.defineOption("matchBrackets",!1,function(e,n,r){function i(t){t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)}r&&r!=t.Init&&(e.off("cursorActivity",l),e.off("focus",l),e.off("blur",i),i(e)),n&&(e.state.matchBrackets="object"==typeof n?n:{},e.on("cursorActivity",l),e.on("focus",l),e.on("blur",i))}),t.defineExtension("matchBrackets",function(){o(this,!0)}),t.defineExtension("findMatchingBracket",function(t,e,n){return(n||"boolean"==typeof e)&&(n?(n.strict=e,e=n):e=e?{strict:!0}:null),a(this,t,e)}),t.defineExtension("scanForBracket",function(t,e,n,r){return c(this,t,e,n,r)})});
},{"../../lib/codemirror":"e7zg"}],"P6Lh":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js")):"function"==typeof e&&e.amd?e(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],t):t(CodeMirror)}(function(e){"use strict";var t=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],r=t.length,n=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],o=e.Pos;e.Vim=function(){function i(t,r){this==e.keyMap.vim&&(e.rmClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){l(e),e.off("cursorActivity",s),e.state.fatCursorMarks=null}(t),t.getInputField().style.caretColor="")),r&&r.attach==a||function(t){t.setOption("disableInput",!1),t.off("cursorActivity",Ye),e.off(t.getInputField(),"paste",p(t)),t.state.vim=null}(t)}function a(t,r){this==e.keyMap.vim&&(e.addClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){e.state.fatCursorMarks=[],s(e),e.on("cursorActivity",s)}(t),t.getInputField().style.caretColor="transparent")),r&&r.attach==a||function(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",Ye),j(t),e.on(t.getInputField(),"paste",p(t))}(t)}function s(e){if(e.state.fatCursorMarks){l(e);for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n];if(i.empty()){var a=e.getLine(i.anchor.line).length;i.anchor.ch<a?r.push(e.markText(i.anchor,o(i.anchor.line,i.anchor.ch+1),{className:"cm-fat-cursor-mark"})):r.push(e.markText(o(i.anchor.line,a-1),o(i.anchor.line,a),{className:"cm-fat-cursor-mark"}))}}e.state.fatCursorMarks=r}}function l(e){var t=e.state.fatCursorMarks;if(t)for(var r=0;r<t.length;r++)t[r].clear()}function c(t,r){if(r){if(this[t])return this[t];var n=function(e){if("'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),r=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==r.length)return!1;for(var n=!1,o=0;o<t.length;o++){var i=t[o];i in u?t[o]=u[i]:n=!0,i in h&&(t[o]=h[i])}return!!n&&(S(r)&&(t[t.length-1]=r.toLowerCase()),"<"+t.join("-")+">")}(t);if(!n)return!1;var o=e.Vim.findKey(r,n);return"function"==typeof o&&e.signal(r,"vim-keypress",n),o}}e.defineOption("vimMode",!1,function(t,r,n){r&&"vim"!=t.getOption("keyMap")?t.setOption("keyMap","vim"):!r&&n!=e.Init&&/^vim/.test(t.getOption("keyMap"))&&t.setOption("keyMap","default")});var u={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},h={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function p(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(G(e.getCursor(),0,1)),z.enterInsertMode(e,{},t))}),t.onPasteFn}var f=/[\d]/,d=[e.isWordChar,function(t){return t&&!e.isWordChar(t)&&!/\s/.test(t)}],m=[function(e){return/\S/.test(e)}];function g(e,t){for(var r=[],n=e;n<e+t;n++)r.push(String.fromCharCode(n));return r}var v=g(65,26),y=g(97,26),k=g(48,10),C=[].concat(v,y,k,["<",">"]),w=[].concat(v,y,k,["-",'"',".",":","/"]);function x(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function M(e){return/^[a-z]$/.test(e)}function S(e){return/^[A-Z]$/.test(e)}function A(e){return/^\s*$/.test(e)}function b(e){return-1!=".?!".indexOf(e)}function L(e,t){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1}var T={};function R(e,t,r,n,o){if(void 0===t&&!o)throw Error("defaultValue is required unless callback is provided");if(r||(r="string"),T[e]={type:r,defaultValue:t,callback:o},n)for(var i=0;i<n.length;i++)T[n[i]]=T[e];t&&E(e,t)}function E(e,t,r,n){var o=T[e],i=(n=n||{}).scope;if(!o)return new Error("Unknown option: "+e);if("boolean"==o.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}o.callback?("local"!==i&&o.callback(t,void 0),"global"!==i&&r&&o.callback(t,r)):("local"!==i&&(o.value="boolean"==o.type?!!t:t),"global"!==i&&r&&(r.state.vim.options[e]={value:t}))}function O(e,t,r){var n=T[e],o=(r=r||{}).scope;if(!n)return new Error("Unknown option: "+e);if(n.callback){var i=t&&n.callback(void 0,t);return"global"!==o&&void 0!==i?i:"local"!==o?n.callback():void 0}return((i="global"!==o&&t&&t.state.vim.options[e])||"local"!==o&&n||{}).value}R("filetype",void 0,"string",["ft"],function(e,t){if(void 0!==t){if(void 0===e)return"null"==(r=t.getOption("mode"))?"":r;var r=""==e?"null":e;t.setOption("mode",r)}});var B,I,K=function(){var e=100,t=-1,r=0,n=0,o=new Array(e);function i(i,a){(t+=a)>r?t=r:t<n&&(t=n);var s=o[(e+t)%e];if(s&&!s.find()){var l,c=a>0?1:-1,u=i.getCursor();do{if((s=o[(e+(t+=c))%e])&&(l=s.find())&&!re(u,l))break}while(t<r&&t>n)}return s}return{cachedCursor:void 0,add:function(i,a,s){var l=o[t%e];function c(r){var n=++t%e,a=o[n];a&&a.clear(),o[n]=i.setBookmark(r)}if(l){var u=l.find();u&&!re(u,a)&&c(a)}else c(a);c(s),r=t,(n=t-e+1)<0&&(n=0)},find:function(e,r){var n=t,o=i(e,r);return t=n,o&&o.find()},move:i}},N=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function P(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=N()}function j(e){return e.state.vim||(e.state.vim={inputState:new F,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function _(){for(var e in B={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:K(),macroModeState:new P,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new D({}),searchHistoryController:new U,exCommandHistoryController:new U},T){var t=T[e];t.value=t.defaultValue}}P.prototype={exitMacroRecordMode:function(){var e=B.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var r=B.registerController.getRegister(t);r&&(r.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var H={buildKeyMap:function(){},getRegisterController:function(){return B.registerController},resetVimGlobalState_:_,getVimGlobalState_:function(){return B},maybeInitVimState_:j,suppressErrorLogging:!1,InsertModeKey:rt,map:function(e,t,r){Qe.map(e,t,r)},unmap:function(e,t){Qe.unmap(e,t)},noremap:function(e,n,o){function i(e){return e?[e]:["normal","insert","visual"]}for(var a=i(o),s=t.length,l=s-r;l<s&&a.length;l++){var c=t[l];if(!(c.keys!=n||o&&c.context&&c.context!==o||"ex"===c.type.substr(0,2)||"key"===c.type.substr(0,3))){var u={};for(var h in c)u[h]=c[h];u.keys=e,o&&!u.context&&(u.context=o),this._mapCommand(u);var p=i(c.context);a=a.filter(function(e){return-1===p.indexOf(e)})}}},mapclear:function(e){var n=t.length,o=r,i=t.slice(0,n-o);if(t=t.slice(n-o),e)for(var a=i.length-1;a>=0;a--){var s=i[a];if(e!==s.context)if(s.context)this._mapCommand(s);else{var l=["normal","insert","visual"];for(var c in l)if(l[c]!==e){var u={};for(var h in s)u[h]=s[h];u.context=l[c],this._mapCommand(u)}}}},setOption:E,getOption:O,defineOption:R,defineEx:function(e,t,r){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;qe[e]=r,Qe.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,r){var n=this.findKey(e,t,r);if("function"==typeof n)return n()},findKey:function(r,n,o){var i,a=j(r);function s(){var e=B.macroModeState;if(e.isRecording){if("q"==n)return e.exitMacroRecordMode(),W(r),!0;"mapping"!=o&&function(e,t){if(!e.isPlaying){var r=e.latestRegister,n=B.registerController.getRegister(r);n&&n.pushText(t)}}(e,n)}}function l(){if("<Esc>"==n)return W(r),a.visualMode?me(r):a.insertMode&&ze(r),!0}return!1===(i=a.insertMode?function(){if(l())return!0;for(var e=a.inputState.keyBuffer=a.inputState.keyBuffer+n,o=1==n.length,i=J.matchCommand(e,t,a.inputState,"insert");e.length>1&&"full"!=i.type;){e=a.inputState.keyBuffer=e.slice(1);var s=J.matchCommand(e,t,a.inputState,"insert");"none"!=s.type&&(i=s)}if("none"==i.type)return W(r),!1;if("partial"==i.type)return I&&window.clearTimeout(I),I=window.setTimeout(function(){a.insertMode&&a.inputState.keyBuffer&&W(r)},O("insertModeEscKeysTimeout")),!o;if(I&&window.clearTimeout(I),o){for(var c=r.listSelections(),u=0;u<c.length;u++){var h=c[u].head;r.replaceRange("",G(h,0,-(e.length-1)),h,"+input")}B.macroModeState.lastInsertModeChanges.changes.pop()}return W(r),i.command}():function(){if(s()||l())return!0;var e=a.inputState.keyBuffer=a.inputState.keyBuffer+n;if(/^[1-9]\d*$/.test(e))return!0;if(!(o=/^(\d*)(.*)$/.exec(e)))return W(r),!1;var o,i=a.visualMode?"visual":"normal",c=J.matchCommand(o[2]||o[1],t,a.inputState,i);return"none"==c.type?(W(r),!1):"partial"==c.type||(a.inputState.keyBuffer="",(o=/^(\d*)(.*)$/.exec(e))[1]&&"0"!=o[1]&&a.inputState.pushRepeatDigit(o[1]),c.command)}())?a.insertMode||1!==n.length?void 0:function(){return!0}:!0===i?function(){return!0}:function(){return r.operation(function(){r.curOp.isVimOp=!0;try{"keyToKey"==i.type?function(t){for(var o;t;)o=/<\w+-.+?>|<\w+>|./.exec(t),n=o[0],t=t.substring(o.index+n.length),e.Vim.handleKey(r,n,"mapping")}(i.toKeys):J.processCommand(r,a,i)}catch(t){throw r.state.vim=void 0,j(r),e.Vim.suppressErrorLogging||console.log(t),t}return!0})}},handleEx:function(e,t){Qe.processCommand(e,t)},defineMotion:function(e,t){$[e]=t},defineAction:function(e,t){z[e]=t},defineOperator:function(e,t){Q[e]=t},mapCommand:function(e,t,r,n,o){var i={keys:e,type:t};for(var a in i[t]=r,i[t+"Args"]=n,o)i[a]=o[a];Xe(i)},_mapCommand:Xe,defineRegister:function(e,t){var r=B.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");if(r[e])throw Error("Register already defined "+e);r[e]=t,w.push(e)},exitVisualMode:me,exitInsertMode:ze};function F(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function W(t,r){t.state.vim.inputState=new F,e.signal(t,"vim-command-done",r)}function V(e,t,r){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!r}function D(e){this.registers=e,this.unnamedRegister=e['"']=new V,e["."]=new V,e[":"]=new V,e["/"]=new V}function U(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}F.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},F.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},V.prototype={setText:function(e,t,r){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!r},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(N(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},D.prototype={pushText:function(e,t,r,n,o){n&&"\n"!==r.charAt(r.length-1)&&(r+="\n");var i=this.isValidRegister(e)?this.getRegister(e):null;if(i)S(e)?i.pushText(r,n):i.setText(r,n,o),this.unnamedRegister.setText(i.toString(),n);else{switch(t){case"yank":this.registers[0]=new V(r,n,o);break;case"delete":case"change":-1==r.indexOf("\n")?this.registers["-"]=new V(r,n):(this.shiftNumericRegisters_(),this.registers[1]=new V(r,n))}this.unnamedRegister.setText(r,n,o)}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new V),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&L(e,w)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},U.prototype={nextMatch:function(e,t){var r=this.historyBuffer,n=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var o=this.iterator+n;t?o>=0:o<r.length;o+=n)for(var i=r[o],a=0;a<=i.length;a++)if(this.initialPrefix==i.substring(0,a))return this.iterator=o,i;return o>=r.length?(this.iterator=r.length,this.initialPrefix):o<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var J={matchCommand:function(e,t,r,n){var o,i=function(e,t,r,n){for(var o,i=[],a=[],s=0;s<t.length;s++){var l=t[s];"insert"==r&&"insert"!=l.context||l.context&&l.context!=r||n.operator&&"action"==l.type||!(o=Y(e,l.keys))||("partial"==o&&i.push(l),"full"==o&&a.push(l))}return{partial:i.length&&i,full:a.length&&a}}(e,t,n,r);if(!i.full&&!i.partial)return{type:"none"};if(!i.full&&i.partial)return{type:"partial"};for(var a=0;a<i.full.length;a++){var s=i.full[a];o||(o=s)}if("<character>"==o.keys.slice(-11)){var l=function(e){var t=/^.*(<[^>]+>)$/.exec(e),r=t?t[1]:e.slice(-1);if(r.length>1)switch(r){case"<CR>":r="\n";break;case"<Space>":r=" ";break;default:r=""}return r}(e);if(!l)return{type:"none"};r.selectedCharacter=l}return{type:"full",command:o}},processCommand:function(e,t,r){switch(t.inputState.repeatOverride=r.repeatOverride,r.type){case"motion":this.processMotion(e,t,r);break;case"operator":this.processOperator(e,t,r);break;case"operatorMotion":this.processOperatorMotion(e,t,r);break;case"action":this.processAction(e,t,r);break;case"search":this.processSearch(e,t,r);break;case"ex":case"keyToEx":this.processEx(e,t,r)}},processMotion:function(e,t,r){t.inputState.motion=r.motion,t.inputState.motionArgs=Z(r.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,r){var n=t.inputState;if(n.operator){if(n.operator==r.operator)return n.motion="expandToLine",n.motionArgs={linewise:!0},void this.evalInput(e,t);W(e)}n.operator=r.operator,n.operatorArgs=Z(r.operatorArgs),r.exitVisualBlock&&(t.visualBlock=!1,fe(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,r){var n=t.visualMode,o=Z(r.operatorMotionArgs);o&&n&&o.visualLine&&(t.visualLine=!0),this.processOperator(e,t,r),n||this.processMotion(e,t,r)},processAction:function(e,t,r){var n=t.inputState,o=n.getRepeat(),i=!!o,a=Z(r.actionArgs)||{};n.selectedCharacter&&(a.selectedCharacter=n.selectedCharacter),r.operator&&this.processOperator(e,t,r),r.motion&&this.processMotion(e,t,r),(r.motion||r.operator)&&this.evalInput(e,t),a.repeat=o||1,a.repeatIsExplicit=i,a.registerName=n.registerName,W(e),t.lastMotion=null,r.isEdit&&this.recordLastEdit(t,n,r),z[r.action](e,a,t)},processSearch:function(t,r,n){if(t.getSearchCursor){var o=n.searchArgs.forward,i=n.searchArgs.wholeWordOnly;Te(t).setReversed(!o);var a=o?"/":"?",s=Te(t).getQuery(),l=t.getScrollInfo();switch(n.searchArgs.querySrc){case"prompt":var c=B.macroModeState;c.isPlaying?f(p=c.replaySearchQueries.shift(),!0,!1):je(t,{onClose:function(e){t.scrollTo(l.left,l.top),f(e,!0,!0);var r=B.macroModeState;r.isRecording&&function(e,t){if(!e.isPlaying){var r=e.latestRegister,n=B.registerController.getRegister(r);n&&n.pushSearchQuery&&n.pushSearchQuery(t)}}(r,e)},prefix:a,desc:Pe,onKeyUp:function(r,n,i){var a,s,c,u=e.keyName(r);"Up"==u||"Down"==u?(a="Up"==u,s=r.target?r.target.selectionEnd:0,i(n=B.searchHistoryController.nextMatch(n,a)||""),s&&r.target&&(r.target.selectionEnd=r.target.selectionStart=Math.min(s,r.target.value.length))):"Left"!=u&&"Right"!=u&&"Ctrl"!=u&&"Alt"!=u&&"Shift"!=u&&B.searchHistoryController.reset();try{c=_e(t,n,!0,!0)}catch(r){}c?t.scrollIntoView(We(t,!o,c),30):(Ve(t),t.scrollTo(l.left,l.top))},onKeyDown:function(r,n,o){var i=e.keyName(r);"Esc"==i||"Ctrl-C"==i||"Ctrl-["==i||"Backspace"==i&&""==n?(B.searchHistoryController.pushInput(n),B.searchHistoryController.reset(),_e(t,s),Ve(t),t.scrollTo(l.left,l.top),e.e_stop(r),W(t),o(),t.focus()):"Up"==i||"Down"==i?e.e_stop(r):"Ctrl-U"==i&&(e.e_stop(r),o(""))}});break;case"wordUnderCursor":var u=ve(t,!1,0,!1,!0),h=!0;if(u||(u=ve(t,!1,0,!1,!1),h=!1),!u)return;var p=t.getLine(u.start.line).substring(u.start.ch,u.end.ch);p=h&&i?"\\b"+p+"\\b":p.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),B.jumpList.cachedCursor=t.getCursor(),t.setCursor(u.start),f(p,!0,!1)}}function f(e,o,i){B.searchHistoryController.pushInput(e),B.searchHistoryController.reset();try{_e(t,e,o,i)}catch(a){return Ne(t,"Invalid regex: "+e),void W(t)}J.processMotion(t,r,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:n.searchArgs.toJumplist}})}},processEx:function(t,r,n){function o(e){B.exCommandHistoryController.pushInput(e),B.exCommandHistoryController.reset(),Qe.processCommand(t,e)}function i(r,n,o){var i,a,s=e.keyName(r);("Esc"==s||"Ctrl-C"==s||"Ctrl-["==s||"Backspace"==s&&""==n)&&(B.exCommandHistoryController.pushInput(n),B.exCommandHistoryController.reset(),e.e_stop(r),W(t),o(),t.focus()),"Up"==s||"Down"==s?(e.e_stop(r),i="Up"==s,a=r.target?r.target.selectionEnd:0,o(n=B.exCommandHistoryController.nextMatch(n,i)||""),a&&r.target&&(r.target.selectionEnd=r.target.selectionStart=Math.min(a,r.target.value.length))):"Ctrl-U"==s?(e.e_stop(r),o("")):"Left"!=s&&"Right"!=s&&"Ctrl"!=s&&"Alt"!=s&&"Shift"!=s&&B.exCommandHistoryController.reset()}"keyToEx"==n.type?Qe.processCommand(t,n.exArgs.input):r.visualMode?je(t,{onClose:o,prefix:":",value:"'<,'>",onKeyDown:i,selectValueOnOpen:!1}):je(t,{onClose:o,prefix:":",onKeyDown:i})},evalInput:function(e,t){var r,n,i,a=t.inputState,s=a.motion,l=a.motionArgs||{},c=a.operator,u=a.operatorArgs||{},h=a.registerName,p=t.sel,f=te(t.visualMode?X(e,p.head):e.getCursor("head")),d=te(t.visualMode?X(e,p.anchor):e.getCursor("anchor")),m=te(f),g=te(d);if(c&&this.recordLastEdit(t,a),(i=void 0!==a.repeatOverride?a.repeatOverride:a.getRepeat())>0&&l.explicitRepeat?l.repeatIsExplicit=!0:(l.noRepeat||!l.explicitRepeat&&0===i)&&(i=1,l.repeatIsExplicit=!1),a.selectedCharacter&&(l.selectedCharacter=u.selectedCharacter=a.selectedCharacter),l.repeat=i,W(e),s){var v=$[s](e,f,l,t);if(t.lastMotion=$[s],!v)return;if(l.toJumplist){var y=B.jumpList,k=y.cachedCursor;k?(ye(e,k,v),delete y.cachedCursor):ye(e,f,v)}v instanceof Array?(n=v[0],r=v[1]):r=v,r||(r=te(f)),t.visualMode?(t.visualBlock&&r.ch===1/0||(r=X(e,r)),n&&(n=X(e,n)),n=n||g,p.anchor=n,p.head=r,fe(e),Se(e,t,"<",ne(n,r)?n:r),Se(e,t,">",ne(n,r)?r:n)):c||(r=X(e,r),e.setCursor(r.line,r.ch))}if(c){if(u.lastSel){n=g;var C=u.lastSel,w=Math.abs(C.head.line-C.anchor.line),x=Math.abs(C.head.ch-C.anchor.ch);r=C.visualLine?o(g.line+w,g.ch):C.visualBlock?o(g.line+w,g.ch+x):C.head.line==C.anchor.line?o(g.line,g.ch+x):o(g.line+w,g.ch),t.visualMode=!0,t.visualLine=C.visualLine,t.visualBlock=C.visualBlock,p=t.sel={anchor:n,head:r},fe(e)}else t.visualMode&&(u.lastSel={anchor:te(p.anchor),head:te(p.head),visualBlock:t.visualBlock,visualLine:t.visualLine});var M,S,b,L,T;if(t.visualMode){if(M=oe(p.head,p.anchor),S=ie(p.head,p.anchor),b=t.visualLine||u.linewise,T=de(e,{anchor:M,head:S},L=t.visualBlock?"block":b?"line":"char"),b){var R=T.ranges;if("block"==L)for(var E=0;E<R.length;E++)R[E].head.ch=se(e,R[E].head.line);else"line"==L&&(R[0].head=o(R[0].head.line+1,0))}}else{if(M=te(n||g),ne(S=te(r||m),M)){var O=M;M=S,S=O}(b=l.linewise||u.linewise)?function(e,t,r){t.ch=0,r.ch=0,r.line++}(0,M,S):l.forward&&function(e,t,r){var n=e.getRange(t,r);if(/\n\s*$/.test(n)){var o=n.split("\n");o.pop();for(var i=o.pop();o.length>0&&i&&A(i);i=o.pop())r.line--,r.ch=0;i?(r.line--,r.ch=se(e,r.line)):r.ch=0}}(e,M,S),T=de(e,{anchor:M,head:S},L="char",!l.inclusive||b)}e.setSelections(T.ranges,T.primary),t.lastMotion=null,u.repeat=i,u.registerName=h,u.linewise=b;var I=Q[c](e,u,T.ranges,g,r);t.visualMode&&me(e,null!=I),I&&e.setCursor(I)}},recordLastEdit:function(e,t,r){var n=B.macroModeState;n.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=r,n.lastInsertModeChanges.changes=[],n.lastInsertModeChanges.expectCursorActivityForChange=!1,n.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},$={moveToTopLine:function(e,t,r){var n=De(e).top+r.repeat-1;return o(n,ge(e.getLine(n)))},moveToMiddleLine:function(e){var t=De(e),r=Math.floor(.5*(t.top+t.bottom));return o(r,ge(e.getLine(r)))},moveToBottomLine:function(e,t,r){var n=De(e).bottom-r.repeat+1;return o(n,ge(e.getLine(n)))},expandToLine:function(e,t,r){return o(t.line+r.repeat-1,1/0)},findNext:function(e,t,r){var n=Te(e),o=n.getQuery();if(o){var i=!r.forward;return i=n.isReversed()?!i:i,Fe(e,o),We(e,i,o,r.repeat)}},goToMark:function(e,t,r,n){var o=Ue(e,n,r.selectedCharacter);return o?r.linewise?{line:o.line,ch:ge(e.getLine(o.line))}:o:null},moveToOtherHighlightedEnd:function(e,t,r,n){if(n.visualBlock&&r.sameLine){var i=n.sel;return[X(e,o(i.anchor.line,i.head.ch)),X(e,o(i.head.line,i.anchor.ch))]}return[n.sel.head,n.sel.anchor]},jumpToMark:function(e,t,r,n){for(var i=t,a=0;a<r.repeat;a++){var s=i;for(var l in n.marks)if(M(l)){var c=n.marks[l].find();if(!((r.forward?ne(c,s):ne(s,c))||r.linewise&&c.line==s.line)){var u=re(s,i),h=r.forward?ae(s,c,i):ae(i,c,s);(u||h)&&(i=c)}}}return r.linewise&&(i=o(i.line,ge(e.getLine(i.line)))),i},moveByCharacters:function(e,t,r){var n=t,i=r.repeat,a=r.forward?n.ch+i:n.ch-i;return o(n.line,a)},moveByLines:function(e,t,r,n){var i=t,a=i.ch;switch(n.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:a=n.lastHPos;break;default:n.lastHPos=a}var s=r.repeat+(r.repeatOffset||0),l=r.forward?i.line+s:i.line-s,c=e.firstLine(),u=e.lastLine(),h=e.findPosV(i,r.forward?s:-s,"line",n.lastHSPos);return(r.forward?h.line>l:h.line<l)&&(l=h.line,a=h.ch),l<c&&i.line==c?this.moveToStartOfLine(e,t,r,n):l>u&&i.line==u?this.moveToEol(e,t,r,n,!0):(r.toFirstChar&&(a=ge(e.getLine(l)),n.lastHPos=a),n.lastHSPos=e.charCoords(o(l,a),"div").left,o(l,a))},moveByDisplayLines:function(e,t,r,n){var i=t;switch(n.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:n.lastHSPos=e.charCoords(i,"div").left}var a=r.repeat;if((l=e.findPosV(i,r.forward?a:-a,"line",n.lastHSPos)).hitSide)if(r.forward)var s={top:e.charCoords(l,"div").top+8,left:n.lastHSPos},l=e.coordsChar(s,"div");else{var c=e.charCoords(o(e.firstLine(),0),"div");c.left=n.lastHSPos,l=e.coordsChar(c,"div")}return n.lastHPos=l.ch,l},moveByPage:function(e,t,r){var n=t,o=r.repeat;return e.findPosV(n,r.forward?o:-o,"page")},moveByParagraph:function(e,t,r){var n=r.forward?1:-1;return be(e,t,r.repeat,n)},moveBySentence:function(e,t,r){var n=r.forward?1:-1;return function(e,t,r,n){function i(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!x(e,t.ln))return t.line=null,t.ln=null,void(t.pos=null);t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function a(e,t,r,n){var o=e.getLine(t),a=""===o,s={line:o,ln:t,pos:r,dir:n},l={ln:s.ln,pos:s.pos},c=""===s.line;for(i(e,s);null!==s.line;){if(l.ln=s.ln,l.pos=s.pos,""===s.line&&!c)return{ln:s.ln,pos:s.pos};if(a&&""!==s.line&&!A(s.line[s.pos]))return{ln:s.ln,pos:s.pos};!b(s.line[s.pos])||a||s.pos!==s.line.length-1&&!A(s.line[s.pos+1])||(a=!0),i(e,s)}var o=e.getLine(l.ln);l.pos=0;for(var u=o.length-1;u>=0;--u)if(!A(o[u])){l.pos=u;break}return l}function s(e,t,r,n){var o=e.getLine(t),a={line:o,ln:t,pos:r,dir:n},s={ln:a.ln,pos:null},l=""===a.line;for(i(e,a);null!==a.line;){if(""===a.line&&!l)return null!==s.pos?s:{ln:a.ln,pos:a.pos};if(b(a.line[a.pos])&&null!==s.pos&&(a.ln!==s.ln||a.pos+1!==s.pos))return s;""===a.line||A(a.line[a.pos])||(l=!1,s={ln:a.ln,pos:a.pos}),i(e,a)}var o=e.getLine(s.ln);s.pos=0;for(var c=0;c<o.length;++c)if(!A(o[c])){s.pos=c;break}return s}for(var l={ln:t.line,pos:t.ch};r>0;)l=n<0?s(e,l.ln,l.pos,n):a(e,l.ln,l.pos,n),r--;return o(l.ln,l.pos)}(e,t,r.repeat,n)},moveByScroll:function(e,t,r,n){var o=e.getScrollInfo(),i=null,a=r.repeat;a||(a=o.clientHeight/(2*e.defaultTextHeight()));var s=e.charCoords(t,"local");if(r.repeat=a,!(i=$.moveByDisplayLines(e,t,r,n)))return null;var l=e.charCoords(i,"local");return e.scrollTo(null,o.top+l.top-s.top),i},moveByWords:function(e,t,r){return function(e,t,r,n,i,a){var s=te(t),l=[];(n&&!i||!n&&i)&&r++;for(var c=!(n&&i),u=0;u<r;u++){var h=xe(e,t,n,a,c);if(!h){var p=se(e,e.lastLine());l.push(n?{line:e.lastLine(),from:p,to:p}:{line:0,from:0,to:0});break}l.push(h),t=o(h.line,n?h.to-1:h.from)}var f=l.length!=r,d=l[0],m=l.pop();return n&&!i?(f||d.from==s.ch&&d.line==s.line||(m=l.pop()),o(m.line,m.from)):n&&i?o(m.line,m.to-1):!n&&i?(f||d.to==s.ch&&d.line==s.line||(m=l.pop()),o(m.line,m.to)):o(m.line,m.from)}(e,t,r.repeat,!!r.forward,!!r.wordEnd,!!r.bigWord)},moveTillCharacter:function(e,t,r){var n=Me(e,r.repeat,r.forward,r.selectedCharacter),o=r.forward?-1:1;return ke(o,r),n?(n.ch+=o,n):null},moveToCharacter:function(e,t,r){var n=r.repeat;return ke(0,r),Me(e,n,r.forward,r.selectedCharacter)||t},moveToSymbol:function(e,t,r){return function(e,t,r,n){var i=te(e.getCursor()),a=r?1:-1,s=r?e.lineCount():-1,l=i.ch,c=i.line,u=e.getLine(c),h={lineText:u,nextCh:u.charAt(l),lastCh:null,index:l,symb:n,reverseSymb:(r?{")":"(","}":"{"}:{"(":")","{":"}"})[n],forward:r,depth:0,curMoveThrough:!1},p=Ce[n];if(!p)return i;var f=we[p].init,d=we[p].isComplete;for(f&&f(h);c!==s&&t;){if(h.index+=a,h.nextCh=h.lineText.charAt(h.index),!h.nextCh){if(c+=a,h.lineText=e.getLine(c)||"",a>0)h.index=0;else{var m=h.lineText.length;h.index=m>0?m-1:0}h.nextCh=h.lineText.charAt(h.index)}d(h)&&(i.line=c,i.ch=h.index,t--)}return h.nextCh||h.curMoveThrough?o(c,h.index):i}(e,r.repeat,r.forward,r.selectedCharacter)||t},moveToColumn:function(e,t,r,n){var i=r.repeat;return n.lastHPos=i-1,n.lastHSPos=e.charCoords(t,"div").left,function(e,t){var r=e.getCursor().line;return X(e,o(r,t-1))}(e,i)},moveToEol:function(e,t,r,n,i){var a=o(t.line+r.repeat-1,1/0),s=e.clipPos(a);return s.ch--,i||(n.lastHPos=1/0,n.lastHSPos=e.charCoords(s,"div").left),a},moveToFirstNonWhiteSpaceCharacter:function(e,t){var r=t;return o(r.line,ge(e.getLine(r.line)))},moveToMatchedSymbol:function(e,t){for(var r,n=t,i=n.line,a=n.ch,s=e.getLine(i);a<s.length;a++)if((r=s.charAt(a))&&-1!="()[]{}".indexOf(r)){var l=e.getTokenTypeAt(o(i,a+1));if("string"!==l&&"comment"!==l)break}if(a<s.length){var c="<"===a||">"===a?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(o(i,a),{bracketRegex:c}).to}return n},moveToStartOfLine:function(e,t){return o(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,r){var n=r.forward?e.lastLine():e.firstLine();return r.repeatIsExplicit&&(n=r.repeat-e.getOption("firstLineNumber")),o(n,ge(e.getLine(n)))},textObjectManipulation:function(e,t,r,n){var i=r.selectedCharacter;"b"==i?i="(":"B"==i&&(i="{");var a,s=!r.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[i])a=function(e,t,r,n){var i,a,s=t,l={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[r],c={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[r],u=e.getLine(s.line).charAt(s.ch)===c?1:0;if(i=e.scanForBracket(o(s.line,s.ch+u),-1,void 0,{bracketRegex:l}),a=e.scanForBracket(o(s.line,s.ch+u),1,void 0,{bracketRegex:l}),!i||!a)return{start:s,end:s};if(i=i.pos,a=a.pos,i.line==a.line&&i.ch>a.ch||i.line>a.line){var h=i;i=a,a=h}return n?a.ch+=1:i.ch+=1,{start:i,end:a}}(e,t,i,s);else if({"'":!0,'"':!0,"`":!0}[i])a=function(e,t,r,n){var i,a,s,l,c=te(t),u=e.getLine(c.line).split(""),h=u.indexOf(r);if(c.ch<h?c.ch=h:h<c.ch&&u[c.ch]==r&&(a=c.ch,--c.ch),u[c.ch]!=r||a)for(s=c.ch;s>-1&&!i;s--)u[s]==r&&(i=s+1);else i=c.ch+1;if(i&&!a)for(s=i,l=u.length;s<l&&!a;s++)u[s]==r&&(a=s);return i&&a?(n&&(--i,++a),{start:o(c.line,i),end:o(c.line,a)}):{start:c,end:c}}(e,t,i,s);else if("W"===i)a=ve(e,s,0,!0);else if("w"===i)a=ve(e,s,0,!1);else{if("p"!==i)return null;if(a=be(e,t,r.repeat,0,s),r.linewise=!0,n.visualMode)n.visualLine||(n.visualLine=!0);else{var l=n.inputState.operatorArgs;l&&(l.linewise=!0),a.end.line--}}return e.state.vim.visualMode?function(e,t,r){var n,i=e.state.vim.sel,a=i.head,s=i.anchor;return ne(r,t)&&(n=r,r=t,t=n),ne(a,s)?(a=oe(t,a),s=ie(s,r)):(s=oe(t,s),-1==(a=G(a=ie(a,r),0,-1)).ch&&a.line!=e.firstLine()&&(a=o(a.line-1,se(e,a.line-1)))),[s,a]}(e,a.start,a.end):[a.start,a.end]},repeatLastCharacterSearch:function(e,t,r){var n=B.lastCharacterSearch,o=r.repeat,i=r.forward===n.forward,a=(n.increment?1:0)*(i?-1:1);e.moveH(-a,"char"),r.inclusive=!!i;var s=Me(e,o,i,n.selectedCharacter);return s?(s.ch+=a,s):(e.moveH(a,"char"),t)}};function q(e,t){for(var r=[],n=0;n<t;n++)r.push(e);return r}var Q={change:function(t,r,n){var i,a,s=t.state.vim,l=n[0].anchor,c=n[0].head;if(s.visualMode)if(r.fullLine)c.ch=Number.MAX_VALUE,c.line--,t.setSelection(l,c),a=t.getSelection(),t.replaceSelection(""),i=l;else{a=t.getSelection();var u=q("",n.length);t.replaceSelections(u),i=oe(n[0].head,n[0].anchor)}else{a=t.getRange(l,c);var h=s.lastEditInputState||{};if("moveByWords"==h.motion&&!A(a)){var p=/\s+$/.exec(a);p&&h.motionArgs&&h.motionArgs.forward&&(c=G(c,0,-p[0].length),a=a.slice(0,-p[0].length))}var f=new o(l.line-1,Number.MAX_VALUE),d=t.firstLine()==t.lastLine();c.line>t.lastLine()&&r.linewise&&!d?t.replaceRange("",f,c):t.replaceRange("",l,c),r.linewise&&(d||(t.setCursor(f),e.commands.newlineAndIndent(t)),l.ch=Number.MAX_VALUE),i=l}B.registerController.pushText(r.registerName,"change",a,r.linewise,n.length>1),z.enterInsertMode(t,{head:i},t.state.vim)},delete:function(e,t,r){var n,i,a=e.state.vim;if(a.visualBlock){i=e.getSelection();var s=q("",r.length);e.replaceSelections(s),n=r[0].anchor}else{var l=r[0].anchor,c=r[0].head;t.linewise&&c.line!=e.firstLine()&&l.line==e.lastLine()&&l.line==c.line-1&&(l.line==e.firstLine()?l.ch=0:l=o(l.line-1,se(e,l.line-1))),i=e.getRange(l,c),e.replaceRange("",l,c),n=l,t.linewise&&(n=$.moveToFirstNonWhiteSpaceCharacter(e,l))}return B.registerController.pushText(t.registerName,"delete",i,t.linewise,a.visualBlock),X(e,n)},indent:function(e,t,r){var n=e.state.vim,o=r[0].anchor.line,i=n.visualBlock?r[r.length-1].anchor.line:r[0].head.line,a=n.visualMode?t.repeat:1;t.linewise&&i--;for(var s=o;s<=i;s++)for(var l=0;l<a;l++)e.indentLine(s,t.indentRight);return $.moveToFirstNonWhiteSpaceCharacter(e,r[0].anchor)},indentAuto:function(e,t,r){return e.execCommand("indentAuto"),$.moveToFirstNonWhiteSpaceCharacter(e,r[0].anchor)},changeCase:function(e,t,r,n,o){for(var i=e.getSelections(),a=[],s=t.toLower,l=0;l<i.length;l++){var c=i[l],u="";if(!0===s)u=c.toLowerCase();else if(!1===s)u=c.toUpperCase();else for(var h=0;h<c.length;h++){var p=c.charAt(h);u+=S(p)?p.toLowerCase():p.toUpperCase()}a.push(u)}return e.replaceSelections(a),t.shouldMoveCursor?o:!e.state.vim.visualMode&&t.linewise&&r[0].anchor.line+1==r[0].head.line?$.moveToFirstNonWhiteSpaceCharacter(e,n):t.linewise?n:oe(r[0].anchor,r[0].head)},yank:function(e,t,r,n){var o=e.state.vim,i=e.getSelection(),a=o.visualMode?oe(o.sel.anchor,o.sel.head,r[0].head,r[0].anchor):n;return B.registerController.pushText(t.registerName,"yank",i,t.linewise,o.visualBlock),a}};var z={jumpListWalk:function(e,t,r){if(!r.visualMode){var n=t.repeat,o=t.forward,i=B.jumpList.move(e,o?n:-n),a=i?i.find():void 0;a=a||e.getCursor(),e.setCursor(a)}},scroll:function(e,t,r){if(!r.visualMode){var n=t.repeat||1,o=e.defaultTextHeight(),i=e.getScrollInfo().top,a=o*n,s=t.forward?i+a:i-a,l=te(e.getCursor()),c=e.charCoords(l,"local");if(t.forward)s>c.top?(l.line+=(s-c.top)/o,l.line=Math.ceil(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.top)):e.scrollTo(null,s);else{var u=s+e.getScrollInfo().clientHeight;u<c.bottom?(l.line-=(c.bottom-u)/o,l.line=Math.floor(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,s)}}},scrollToCursor:function(e,t){var r=e.getCursor().line,n=e.charCoords(o(r,0),"local"),i=e.getScrollInfo().clientHeight,a=n.top,s=n.bottom-a;switch(t.position){case"center":a=a-i/2+s;break;case"bottom":a=a-i+s}e.scrollTo(null,a)},replayMacro:function(e,t,r){var n=t.selectedCharacter,o=t.repeat,i=B.macroModeState;for("@"==n?n=i.latestRegister:i.latestRegister=n;o--;)Ze(e,r,i,n)},enterMacroRecordMode:function(e,t){var r=B.macroModeState,n=t.selectedCharacter;B.registerController.isValidRegister(n)&&r.enterMacroRecordMode(e,n)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(t,r,n){if(!t.getOption("readOnly")){n.insertMode=!0,n.insertModeRepeat=r&&r.repeat||1;var i=r?r.insertAt:null,a=n.sel,s=r.head||t.getCursor("head"),l=t.listSelections().length;if("eol"==i)s=o(s.line,se(t,s.line));else if("bol"==i)s=o(s.line,0);else if("charAfter"==i)s=G(s,0,1);else if("firstNonBlank"==i)s=$.moveToFirstNonWhiteSpaceCharacter(t,s);else if("startOfSelectedArea"==i){if(!n.visualMode)return;n.visualBlock?(s=o(Math.min(a.head.line,a.anchor.line),Math.min(a.head.ch,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):s=a.head.line<a.anchor.line?a.head:o(a.anchor.line,0)}else if("endOfSelectedArea"==i){if(!n.visualMode)return;n.visualBlock?(s=o(Math.min(a.head.line,a.anchor.line),Math.max(a.head.ch+1,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):s=a.head.line>=a.anchor.line?G(a.head,0,1):o(a.anchor.line,0)}else if("inplace"==i){if(n.visualMode)return}else"lastEdit"==i&&(s=Je(t)||s);t.setOption("disableInput",!1),r&&r.replace?(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"})):(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})),B.macroModeState.isPlaying||(t.on("change",Ge),e.on(t.getInputField(),"keydown",nt)),n.visualMode&&me(t),he(t,s,l)}},toggleVisualMode:function(t,r,n){var i,a=r.repeat,s=t.getCursor();n.visualMode?n.visualLine^r.linewise||n.visualBlock^r.blockwise?(n.visualLine=!!r.linewise,n.visualBlock=!!r.blockwise,e.signal(t,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),fe(t)):me(t):(n.visualMode=!0,n.visualLine=!!r.linewise,n.visualBlock=!!r.blockwise,i=X(t,o(s.line,s.ch+a-1)),n.sel={anchor:s,head:i},e.signal(t,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),fe(t),Se(t,n,"<",oe(s,i)),Se(t,n,">",ie(s,i)))},reselectLastSelection:function(t,r,n){var o=n.lastSelection;if(n.visualMode&&pe(t,n),o){var i=o.anchorMark.find(),a=o.headMark.find();if(!i||!a)return;n.sel={anchor:i,head:a},n.visualMode=!0,n.visualLine=o.visualLine,n.visualBlock=o.visualBlock,fe(t),Se(t,n,"<",oe(i,a)),Se(t,n,">",ie(i,a)),e.signal(t,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""})}},joinLines:function(e,t,r){var n,i;if(r.visualMode){if(n=e.getCursor("anchor"),ne(i=e.getCursor("head"),n)){var a=i;i=n,n=a}i.ch=se(e,i.line)-1}else{var s=Math.max(t.repeat,2);n=e.getCursor(),i=X(e,o(n.line+s-1,1/0))}for(var l=0,c=n.line;c<i.line;c++){l=se(e,n.line),a=o(n.line+1,se(e,n.line+1));var u=e.getRange(n,a);u=t.keepSpaces?u.replace(/\n\r?/g,""):u.replace(/\n\s*/g," "),e.replaceRange(u,n,a)}var h=o(n.line,l);r.visualMode&&me(e,!1),e.setCursor(h)},newLineAndEnterInsertMode:function(t,r,n){n.insertMode=!0;var i=te(t.getCursor());i.line!==t.firstLine()||r.after?(i.line=r.after?i.line:i.line-1,i.ch=se(t,i.line),t.setCursor(i),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t)):(t.replaceRange("\n",o(t.firstLine(),0)),t.setCursor(t.firstLine(),0)),this.enterInsertMode(t,{repeat:r.repeat},n)},paste:function(e,t,r){var n=te(e.getCursor()),i=B.registerController.getRegister(t.registerName);if(f=i.toString()){if(t.matchIndent){var a=e.getOption("tabSize"),s=function(e){var t=e.split("\t").length-1,r=e.split(" ").length-1;return t*a+1*r},l=e.getLine(e.getCursor().line),c=s(l.match(/^\s*/)[0]),u=f.replace(/\n$/,""),h=f!==u,p=s(f.match(/^\s*/)[0]),f=u.replace(/^\s*/gm,function(t){var r=c+(s(t)-p);if(r<0)return"";if(e.getOption("indentWithTabs")){var n=Math.floor(r/a);return Array(n+1).join("\t")}return Array(r+1).join(" ")});f+=h?"\n":""}t.repeat>1&&(f=Array(t.repeat+1).join(f));var d,m,g=i.linewise,v=i.blockwise;if(v){f=f.split("\n"),g&&f.pop();for(var y=0;y<f.length;y++)f[y]=""==f[y]?" ":f[y];n.ch+=t.after?1:0,n.ch=Math.min(se(e,n.line),n.ch)}else g?r.visualMode?f=r.visualLine?f.slice(0,-1):"\n"+f.slice(0,f.length-1)+"\n":t.after?(f="\n"+f.slice(0,f.length-1),n.ch=se(e,n.line)):n.ch=0:n.ch+=t.after?1:0;if(r.visualMode){var k;r.lastPastedText=f;var C=function(e,t){var r,n,i,a,s,l=t.lastSelection;return t.visualMode?(r=e.listSelections(),n=r[0],i=r[r.length-1],a=ne(n.anchor,n.head)?n.anchor:n.head,s=ne(i.anchor,i.head)?i.head:i.anchor,[a,s]):function(){var t=e.getCursor(),r=e.getCursor(),n=l.visualBlock;if(n){var i=n.width,a=n.height;r=o(t.line+a,t.ch+i);for(var s=[],c=t.line;c<r.line;c++){var u=o(c,t.ch),h=o(c,r.ch),p={anchor:u,head:h};s.push(p)}e.setSelections(s)}else{var f=l.anchorMark.find(),d=l.headMark.find(),m=d.line-f.line,g=d.ch-f.ch;r={line:r.line+m,ch:m?r.ch:g+r.ch},l.visualLine&&(t=o(t.line,0),r=o(r.line,se(e,r.line))),e.setSelection(t,r)}return[t,r]}()}(e,r),w=C[0],x=C[1],M=e.getSelection(),S=e.listSelections(),A=new Array(S.length).join("1").split("1");r.lastSelection&&(k=r.lastSelection.headMark.find()),B.registerController.unnamedRegister.setText(M),v?(e.replaceSelections(A),x=o(w.line+f.length-1,w.ch),e.setCursor(w),ue(e,x),e.replaceSelections(f),d=w):r.visualBlock?(e.replaceSelections(A),e.setCursor(w),e.replaceRange(f,w,w),d=w):(e.replaceRange(f,w,x),d=e.posFromIndex(e.indexFromPos(w)+f.length-1)),k&&(r.lastSelection.headMark=e.setBookmark(k)),g&&(d.ch=0)}else if(v){for(e.setCursor(n),y=0;y<f.length;y++){var b=n.line+y;b>e.lastLine()&&e.replaceRange("\n",o(b,0)),se(e,b)<n.ch&&ce(e,b,n.ch)}e.setCursor(n),ue(e,o(n.line+f.length-1,n.ch)),e.replaceSelections(f),d=n}else e.replaceRange(f,n),g&&t.after?d=o(n.line+1,ge(e.getLine(n.line+1))):g&&!t.after?d=o(n.line,ge(e.getLine(n.line))):!g&&t.after?(m=e.indexFromPos(n),d=e.posFromIndex(m+f.length-1)):(m=e.indexFromPos(n),d=e.posFromIndex(m+f.length));r.visualMode&&me(e,!1),e.setCursor(d)}},undo:function(t,r){t.operation(function(){ee(t,e.commands.undo,r.repeat)(),t.setCursor(t.getCursor("anchor"))})},redo:function(t,r){ee(t,e.commands.redo,r.repeat)()},setRegister:function(e,t,r){r.inputState.registerName=t.selectedCharacter},setMark:function(e,t,r){Se(e,r,t.selectedCharacter,e.getCursor())},replace:function(t,r,n){var i,a,s=r.selectedCharacter,l=t.getCursor(),c=t.listSelections();if(n.visualMode)l=t.getCursor("start"),a=t.getCursor("end");else{var u=t.getLine(l.line);(i=l.ch+r.repeat)>u.length&&(i=u.length),a=o(l.line,i)}if("\n"==s)n.visualMode||t.replaceRange("",l,a),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t);else{var h=t.getRange(l,a);if(h=h.replace(/[^\n]/g,s),n.visualBlock){var p=new Array(t.getOption("tabSize")+1).join(" ");h=(h=t.getSelection()).replace(/\t/g,p).replace(/[^\n]/g,s).split("\n"),t.replaceSelections(h)}else t.replaceRange(h,l,a);n.visualMode?(l=ne(c[0].anchor,c[0].head)?c[0].anchor:c[0].head,t.setCursor(l),me(t,!1)):t.setCursor(G(a,0,-1))}},incrementNumberToken:function(e,t){for(var r,n,i,a,s=e.getCursor(),l=e.getLine(s.line),c=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(r=c.exec(l))&&(i=(n=r.index)+r[0].length,!(s.ch<i)););if((t.backtrack||!(i<=s.ch))&&r){var u=r[2]||r[4],h=r[3]||r[5],p=t.increase?1:-1,f={"0b":2,0:8,"":10,"0x":16}[u.toLowerCase()];a=(parseInt(r[1]+h,f)+p*t.repeat).toString(f);var d=u?new Array(h.length-a.length+1+r[1].length).join("0"):"";a="-"===a.charAt(0)?"-"+u+d+a.substr(1):u+d+a;var m=o(s.line,n),g=o(s.line,i);e.replaceRange(a,m,g),e.setCursor(o(s.line,n+a.length-1))}},repeatLastEdit:function(e,t,r){if(r.lastEditInputState){var n=t.repeat;n&&t.repeatIsExplicit?r.lastEditInputState.repeatOverride=n:n=r.lastEditInputState.repeatOverride||n,ot(e,r,n,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:ze};function X(e,t){var r=e.state.vim,n=r.insertMode||r.visualMode,i=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),a=se(e,i)-1+!!n,s=Math.min(Math.max(0,t.ch),a);return o(i,s)}function Z(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function G(e,t,r){return"object"==typeof t&&(r=t.ch,t=t.line),o(e.line+t,e.ch+r)}function Y(e,t){if("<character>"==t.slice(-11)){var r=t.length-11,n=e.slice(0,r),o=t.slice(0,r);return n==o&&e.length>r?"full":0==o.indexOf(n)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function ee(e,t,r){return function(){for(var n=0;n<r;n++)t(e)}}function te(e){return o(e.line,e.ch)}function re(e,t){return e.ch==t.ch&&e.line==t.line}function ne(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function oe(e,t){return arguments.length>2&&(t=oe.apply(void 0,Array.prototype.slice.call(arguments,1))),ne(e,t)?e:t}function ie(e,t){return arguments.length>2&&(t=ie.apply(void 0,Array.prototype.slice.call(arguments,1))),ne(e,t)?t:e}function ae(e,t,r){var n=ne(e,t),o=ne(t,r);return n&&o}function se(e,t){return e.getLine(t).length}function le(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ce(e,t,r){var n=se(e,t),i=new Array(r-n+1).join(" ");e.setCursor(o(t,n)),e.replaceRange(i,e.getCursor())}function ue(e,t){var r=[],n=e.listSelections(),i=te(e.clipPos(t)),a=!re(t,i),s=function(e,t,r){for(var n=0;n<e.length;n++){var o="head"!=r&&re(e[n].anchor,t),i="anchor"!=r&&re(e[n].head,t);if(o||i)return n}return-1}(n,e.getCursor("head")),l=re(n[s].head,n[s].anchor),c=n.length-1,u=c-s>s?c:0,h=n[u].anchor,p=Math.min(h.line,i.line),f=Math.max(h.line,i.line),d=h.ch,m=i.ch,g=n[u].head.ch-d,v=m-d;g>0&&v<=0?(d++,a||m--):g<0&&v>=0?(d--,l||m++):g<0&&-1==v&&(d--,m++);for(var y=p;y<=f;y++){var k={anchor:new o(y,d),head:new o(y,m)};r.push(k)}return e.setSelections(r),t.ch=m,h.ch=d,h}function he(e,t,r){for(var n=[],o=0;o<r;o++){var i=G(t,o,0);n.push({anchor:i,head:i})}e.setSelections(n,0)}function pe(e,t){var r=t.sel.anchor,n=t.sel.head;t.lastPastedText&&(n=e.posFromIndex(e.indexFromPos(r)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(r),headMark:e.setBookmark(n),anchor:te(r),head:te(n),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function fe(e,t,r){var n=e.state.vim,o=de(e,t=t||n.sel,r=r||n.visualLine?"line":n.visualBlock?"block":"char");e.setSelections(o.ranges,o.primary),et(e)}function de(e,t,r,n){var i=te(t.head),a=te(t.anchor);if("char"==r){var s=n||ne(t.head,t.anchor)?0:1,l=ne(t.head,t.anchor)?1:0;return i=G(t.head,0,s),{ranges:[{anchor:a=G(t.anchor,0,l),head:i}],primary:0}}if("line"==r){if(ne(t.head,t.anchor))i.ch=0,a.ch=se(e,a.line);else{a.ch=0;var c=e.lastLine();i.line>c&&(i.line=c),i.ch=se(e,i.line)}return{ranges:[{anchor:a,head:i}],primary:0}}if("block"==r){for(var u=Math.min(a.line,i.line),h=Math.min(a.ch,i.ch),p=Math.max(a.line,i.line),f=Math.max(a.ch,i.ch)+1,d=p-u+1,m=i.line==u?0:d-1,g=[],v=0;v<d;v++)g.push({anchor:o(u+v,h),head:o(u+v,f)});return{ranges:g,primary:m}}}function me(t,r){var n=t.state.vim;!1!==r&&t.setCursor(X(t,n.sel.head)),pe(t,n),n.visualMode=!1,n.visualLine=!1,n.visualBlock=!1,n.insertMode||e.signal(t,"vim-mode-change",{mode:"normal"}),tt(n)}function ge(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function ve(e,t,r,n,i){for(var a=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=oe(t,e.getCursor("anchor"))),t}(e),s=e.getLine(a.line),l=a.ch,c=i?d[0]:m[0];!c(s.charAt(l));)if(++l>=s.length)return null;n?c=m[0]:(c=d[0])(s.charAt(l))||(c=d[1]);for(var u=l,h=l;c(s.charAt(u))&&u<s.length;)u++;for(;c(s.charAt(h))&&h>=0;)h--;if(h++,t){for(var p=u;/\s/.test(s.charAt(u))&&u<s.length;)u++;if(p==u){for(var f=h;/\s/.test(s.charAt(h-1))&&h>0;)h--;h||(h=f)}}return{start:o(a.line,h),end:o(a.line,u)}}function ye(e,t,r){re(t,r)||B.jumpList.add(e,t,r)}function ke(e,t){B.lastCharacterSearch.increment=e,B.lastCharacterSearch.forward=t.forward,B.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var Ce={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},we={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function xe(e,t,r,n,o){var i=t.line,a=t.ch,s=e.getLine(i),l=r?1:-1,c=n?m:d;if(o&&""==s){if(i+=l,s=e.getLine(i),!x(e,i))return null;a=r?0:s.length}for(;;){if(o&&""==s)return{from:0,to:0,line:i};for(var u=l>0?s.length:-1,h=u,p=u;a!=u;){for(var f=!1,g=0;g<c.length&&!f;++g)if(c[g](s.charAt(a))){for(h=a;a!=u&&c[g](s.charAt(a));)a+=l;if(f=h!=(p=a),h==t.ch&&i==t.line&&p==h+l)continue;return{from:Math.min(h,p+1),to:Math.max(h,p),line:i}}f||(a+=l)}if(!x(e,i+=l))return null;s=e.getLine(i),a=l>0?0:s.length}}function Me(e,t,r,n){for(var i,a=e.getCursor(),s=a.ch,l=0;l<t;l++){if(-1==(i=Ae(s,e.getLine(a.line),n,r,!0)))return null;s=i}return o(e.getCursor().line,i)}function Se(e,t,r,n){L(r,C)&&(t.marks[r]&&t.marks[r].clear(),t.marks[r]=e.setBookmark(n))}function Ae(e,t,r,n,o){var i;return n?-1==(i=t.indexOf(r,e+1))||o||(i-=1):-1==(i=t.lastIndexOf(r,e-1))||o||(i+=1),i}function be(e,t,r,n,i){var a,s=t.line,l=e.firstLine(),c=e.lastLine(),u=s;function h(t){return!e.getLine(t)}function p(e,t,r){return r?h(e)!=h(e+t):!h(e)&&h(e+t)}if(n){for(;l<=u&&u<=c&&r>0;)p(u,n)&&r--,u+=n;return new o(u,0)}var f=e.state.vim;if(f.visualLine&&p(s,1,!0)){var d=f.sel.anchor;p(d.line,-1,!0)&&(i&&d.line==s||(s+=1))}var m=h(s);for(u=s;u<=c&&r;u++)p(u,1,!0)&&(i&&h(u)==m||r--);for(a=new o(u,0),u>c&&!m?m=!0:i=!1,u=s;u>l&&(i&&h(u)!=m&&u!=s||!p(u,-1,!0));u--);return{start:new o(u,0),end:a}}function Le(){}function Te(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Le)}function Re(e,t,r,n,o){e.openDialog?e.openDialog(t,n,{bottom:!0,value:o.value,onKeyDown:o.onKeyDown,onKeyUp:o.onKeyUp,selectValueOnOpen:!1}):n(prompt(r,""))}function Ee(e,t){var r=Oe(e,t)||[];if(!r.length)return[];var n=[];if(0===r[0]){for(var o=0;o<r.length;o++)"number"==typeof r[o]&&n.push(e.substring(r[o]+1,r[o+1]));return n}}function Oe(e,t){t||(t="/");for(var r=!1,n=[],o=0;o<e.length;o++){var i=e.charAt(o);r||i!=t||n.push(o),r=!r&&"\\"==i}return n}R("pcre",!0,"boolean"),Le.prototype={getQuery:function(){return B.query},setQuery:function(e){B.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return B.isReversed},setReversed:function(e){B.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var Be={"\\n":"\n","\\r":"\r","\\t":"\t"};var Ie={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function Ke(e,t,r){if(B.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var n,o,i=Oe(e,"/");return i.length?(n=e.substring(0,i[0]),o=-1!=e.substring(i[0]).indexOf("i")):n=e,n?(O("pcre")||(n=function(e){for(var t=!1,r=[],n=-1;n<e.length;n++){var o=e.charAt(n)||"",i=e.charAt(n+1)||"",a=i&&-1!="|(){".indexOf(i);t?("\\"===o&&a||r.push(o),t=!1):"\\"===o?(t=!0,i&&-1!="}".indexOf(i)&&(a=!0),a&&"\\"!==i||r.push(o)):(r.push(o),a&&"\\"!==i&&r.push("\\"))}return r.join("")}(n)),r&&(t=/^[^A-Z]*$/.test(n)),new RegExp(n,t||o?"i":void 0)):null}function Ne(e,t){e.openNotification?e.openNotification('<span style="color: red">'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}var Pe="(Javascript regexp)";function je(e,t){var r,n,o,i=(t.prefix||"")+" "+(t.desc||"");Re(e,(r=t.prefix,n=t.desc,o='<span style="font-family: monospace; white-space: pre">'+(r||"")+'<input type="text" autocorrect="off" autocapitalize="off" spellcheck="false"></span>',n&&(o+=' <span style="color: #888">'+n+"</span>"),o),i,t.onClose,t)}function _e(e,t,r,n){if(t){var o=Te(e),i=Ke(t,!!r,!!n);if(i)return Fe(e,i),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var r=["global","multiline","ignoreCase","source"],n=0;n<r.length;n++){var o=r[n];if(e[o]!==t[o])return!1}return!0}return!1}(i,o.getQuery())?i:(o.setQuery(i),i)}}var He=0;function Fe(e,t){clearTimeout(He),He=setTimeout(function(){var r=Te(e),n=r.getOverlay();n&&t==n.query||(n&&e.removeOverlay(n),n=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(r){if(!t||r.sol()){var n=r.match(e,!1);if(n)return 0==n[0].length?(r.next(),"searching"):r.sol()||(r.backUp(1),e.exec(r.next()+n[0]))?(r.match(e),"searching"):(r.next(),null);for(;!r.eol()&&(r.next(),!r.match(e,!1)););}else r.skipToEnd()},query:e}}(t),e.addOverlay(n),e.showMatchesOnScrollbar&&(r.getScrollbarAnnotate()&&r.getScrollbarAnnotate().clear(),r.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),r.setOverlay(n))},50)}function We(e,t,r,n){return void 0===n&&(n=1),e.operation(function(){for(var i=e.getCursor(),a=e.getSearchCursor(r,i),s=0;s<n;s++){var l=a.find(t);if(0==s&&l&&re(a.from(),i)&&(l=a.find(t)),!l&&!(a=e.getSearchCursor(r,t?o(e.lastLine()):o(e.firstLine(),0))).find(t))return}return a.from()})}function Ve(e){var t=Te(e);e.removeOverlay(Te(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function De(e){var t=e.getScrollInfo(),r=e.coordsChar({left:0,top:6+t.top},"local"),n=t.clientHeight-10+t.top,o=e.coordsChar({left:0,top:n},"local");return{top:r.line,bottom:o.line}}function Ue(e,t,r){if("'"==r||"`"==r)return B.jumpList.find(e,-1)||o(0,0);if("."==r)return Je(e);var n=t.marks[r];return n&&n.find()}function Je(e){for(var t=e.doc.history.done,r=t.length;r--;)if(t[r].changes)return te(t[r].changes[0].to)}var $e=function(){this.buildCommandMap_()};$e.prototype={processCommand:function(e,t,r){var n=this;e.operation(function(){e.curOp.isVimOp=!0,n._processCommand(e,t,r)})},_processCommand:function(t,r,n){var o=t.state.vim,i=B.registerController.getRegister(":"),a=i.toString();o.visualMode&&me(t);var s=new e.StringStream(r);i.setText(r);var l,c,u=n||{};u.input=r;try{this.parseInput_(t,s,u)}catch(p){throw Ne(t,p),p}if(u.commandName){if(l=this.matchCommand_(u.commandName)){if(c=l.name,l.excludeFromCommandHistory&&i.setText(a),this.parseCommandArgs_(s,u,l),"exToKey"==l.type){for(var h=0;h<l.toKeys.length;h++)e.Vim.handleKey(t,l.toKeys[h],"mapping");return}if("exToEx"==l.type)return void this.processCommand(t,l.toInput)}}else void 0!==u.line&&(c="move");if(c)try{qe[c](t,u),l&&l.possiblyAsync||!u.callback||u.callback()}catch(p){throw Ne(t,p),p}else Ne(t,'Not an editor command ":'+r+'"')},parseInput_:function(e,t,r){t.eatWhile(":"),t.eat("%")?(r.line=e.firstLine(),r.lineEnd=e.lastLine()):(r.line=this.parseLineSpec_(e,t),void 0!==r.line&&t.eat(",")&&(r.lineEnd=this.parseLineSpec_(e,t)));var n=t.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return r.commandName=n?n[1]:t.match(/.*/)[0],r},parseLineSpec_:function(e,t){var r=t.match(/^(\d+)/);if(r)return parseInt(r[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var n=t.next(),o=Ue(e,e.state.vim,n);if(!o)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,o.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var r=e.match(/^([+-])?(\d+)/);if(r){var n=parseInt(r[2],10);"-"==r[1]?t-=n:t+=n}return t},parseCommandArgs_:function(e,t,r){if(!e.eol()){t.argString=e.match(/.*/)[0];var n=r.argDelimiter||/\s+/,o=le(t.argString).split(n);o.length&&o[0]&&(t.args=o)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var r=e.substring(0,t);if(this.commandMap_[r]){var n=this.commandMap_[r];if(0===n.name.indexOf(e))return n}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<n.length;e++){var t=n[e],r=t.shortName||t.name;this.commandMap_[r]=t}},map:function(e,r,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var o=e.substring(1);":"!=r&&":"==r.charAt(0)?this.commandMap_[o]={name:o,type:"exToEx",toInput:r.substring(1),user:!0}:this.commandMap_[o]={name:o,type:"exToKey",toKeys:r,user:!0}}else if(":"!=r&&":"==r.charAt(0)){var i={keys:e,type:"keyToEx",exArgs:{input:r.substring(1)}};n&&(i.context=n),t.unshift(i)}else i={keys:e,type:"keyToKey",toKeys:r},n&&(i.context=n),t.unshift(i)},unmap:function(e,r){if(":"!=e&&":"==e.charAt(0)){if(r)throw Error("Mode not supported for ex mappings");var n=e.substring(1);if(this.commandMap_[n]&&this.commandMap_[n].user)return void delete this.commandMap_[n]}else for(var o=e,i=0;i<t.length;i++)if(o==t[i].keys&&t[i].context===r)return void t.splice(i,1);throw Error("No such mapping.")}};var qe={colorscheme:function(e,t){!t.args||t.args.length<1?Ne(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,r){var n=t.args;!n||n.length<2?e&&Ne(e,"Invalid mapping: "+t.input):Qe.map(n[0],n[1],r)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,r){var n=t.args;!n||n.length<1?e&&Ne(e,"No such mapping: "+t.input):Qe.unmap(n[0],r)},move:function(e,t){J.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var r=t.args,n=t.setCfg||{};if(!r||r.length<1)e&&Ne(e,"Invalid mapping: "+t.input);else{var o=r[0].split("="),i=o[0],a=o[1],s=!1;if("?"==i.charAt(i.length-1)){if(a)throw Error("Trailing characters: "+t.argString);i=i.substring(0,i.length-1),s=!0}void 0===a&&"no"==i.substring(0,2)&&(i=i.substring(2),a=!1);var l=T[i]&&"boolean"==T[i].type;if(l&&null==a&&(a=!0),!l&&void 0===a||s){var c=O(i,e,n);c instanceof Error?Ne(e,c.message):Ne(e,!0===c||!1===c?" "+(c?"":"no")+i:"  "+i+"="+c)}else{var u=E(i,a,e,n);u instanceof Error&&Ne(e,u.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var r=t.args,n=B.registerController.registers,o="----------Registers----------<br><br>";if(r){r=r.join("");for(var i=0;i<r.length;i++)a=r.charAt(i),B.registerController.isValidRegister(a)&&(o+='"'+a+"    "+(n[a]||new V).toString()+"<br>")}else for(var a in n){var s=n[a].toString();s.length&&(o+='"'+a+"    "+s+"<br>")}Ne(e,o)},sort:function(t,r){var n,i,a,s,l,c=function(){if(r.argString){var t=new e.StringStream(r.argString);if(t.eat("!")&&(n=!0),t.eol())return;if(!t.eatSpace())return"Invalid arguments";var o=t.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!o&&!t.eol())return"Invalid arguments";if(o[1]){i=-1!=o[1].indexOf("i"),a=-1!=o[1].indexOf("u");var c=-1!=o[1].indexOf("d")||-1!=o[1].indexOf("n")&&1,u=-1!=o[1].indexOf("x")&&1,h=-1!=o[1].indexOf("o")&&1;if(c+u+h>1)return"Invalid arguments";s=(c?"decimal":u&&"hex")||h&&"octal"}o[2]&&(l=new RegExp(o[2].substr(1,o[2].length-2),i?"i":""))}}();if(c)Ne(t,c+": "+r.argString);else{var u=r.line||t.firstLine(),h=r.lineEnd||r.line||t.lastLine();if(u!=h){var p=o(u,0),f=o(h,se(t,h)),d=t.getRange(p,f).split("\n"),m=l||("decimal"==s?/(-?)([\d]+)/:"hex"==s?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==s?/([0-7]+)/:null),g="decimal"==s?10:"hex"==s?16:"octal"==s?8:null,v=[],y=[];if(s||l)for(var k=0;k<d.length;k++){var C=l?d[k].match(l):null;C&&""!=C[0]?v.push(C):!l&&m.exec(d[k])?v.push(d[k]):y.push(d[k])}else y=d;if(v.sort(l?function(e,t){var r;return n&&(r=e,e=t,t=r),i&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:M),l)for(k=0;k<v.length;k++)v[k]=v[k].input;else s||y.sort(M);if(d=n?v.concat(y):y.concat(v),a){var w,x=d;for(d=[],k=0;k<x.length;k++)x[k]!=w&&d.push(x[k]),w=x[k]}t.replaceRange(d.join("\n"),p,f)}}function M(e,t){var r;n&&(r=e,e=t,t=r),i&&(e=e.toLowerCase(),t=t.toLowerCase());var o=s&&m.exec(e),a=s&&m.exec(t);return o?(o=parseInt((o[1]+o[2]).toLowerCase(),g))-(a=parseInt((a[1]+a[2]).toLowerCase(),g)):e<t?-1:1}},global:function(e,t){var r=t.argString;if(r){var n,o=void 0!==t.line?t.line:e.firstLine(),i=t.lineEnd||t.line||e.lastLine(),a=function(e){return Ee(e,"/")}(r),s=r;if(a.length&&(s=a[0],n=a.slice(1,a.length).join("/")),s)try{_e(e,s,!0,!0)}catch(d){return void Ne(e,"Invalid regex: "+s)}for(var l=Te(e).getQuery(),c=[],u="",h=o;h<=i;h++)l.test(e.getLine(h))&&(c.push(h+1),u+=e.getLine(h)+"<br>");if(n){var p=0,f=function(){if(p<c.length){var t=c[p]+n;Qe.processCommand(e,t,{callback:f})}p++};f()}else Ne(e,u)}else Ne(e,"Regular Expression missing from global")},substitute:function(t,r){if(!t.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var n,i,a,s,l=r.argString,c=l?Ee(l,l[0]):[],u="",h=!1,p=!1;if(c.length)n=c[0],O("pcre")&&""!==n&&(n=new RegExp(n).source),u=c[1],n&&"$"===n[n.length-1]&&(n=n.slice(0,n.length-1)+"\\n",u=u?u+"\n":"\n"),void 0!==u&&(u=O("pcre")?function(t){for(var r=new e.StringStream(t),n=[];!r.eol();){for(;r.peek()&&"\\"!=r.peek();)n.push(r.next());var o=!1;for(var i in Ie)if(r.match(i,!0)){o=!0,n.push(Ie[i]);break}o||n.push(r.next())}return n.join("")}(u.replace(/([^\\])&/g,"$1$$&")):function(e){for(var t,r=!1,n=[],o=-1;o<e.length;o++){var i=e.charAt(o)||"",a=e.charAt(o+1)||"";Be[i+a]?(n.push(Be[i+a]),o++):r?(n.push(i),r=!1):"\\"===i?(r=!0,t=a,f.test(t)||"$"===a?n.push("$"):"/"!==a&&"\\"!==a&&n.push("\\")):("$"===i&&n.push("$"),n.push(i),"/"===a&&n.push("\\"))}return n.join("")}(u),B.lastSubstituteReplacePart=u),i=c[2]?c[2].split(" "):[];else if(l&&l.length)return void Ne(t,"Substitutions should be of the form :s/pattern/replace/");if(i&&(a=i[0],s=parseInt(i[1]),a&&(-1!=a.indexOf("c")&&(h=!0,a.replace("c","")),-1!=a.indexOf("g")&&(p=!0,a.replace("g","")),n=O("pcre")?n+"/"+a:n.replace(/\//g,"\\/")+"/"+a)),n)try{_e(t,n,!0,!0)}catch(k){return void Ne(t,"Invalid regex: "+n)}if(void 0!==(u=u||B.lastSubstituteReplacePart)){var d=Te(t).getQuery(),m=void 0!==r.line?r.line:t.getCursor().line,g=r.lineEnd||m;m==t.firstLine()&&g==t.lastLine()&&(g=1/0),s&&(g=(m=g)+s-1);var v=X(t,o(m,0)),y=t.getSearchCursor(d,v);!function(t,r,n,o,i,a,s,l,c){t.state.vim.exMode=!0;var u=!1,h=a.from();function p(){t.operation(function(){for(;!u;)f(),d();m()})}function f(){var e=t.getRange(a.from(),a.to()),r=e.replace(s,l);a.replace(r)}function d(){for(;a.findNext()&&(e=a.from(),r=o,s=i,"number"!=typeof e&&(e=e.line),r instanceof Array?L(e,r):s?e>=r&&e<=s:e==r);)if(n||!h||a.from().line!=h.line)return t.scrollIntoView(a.from(),30),t.setSelection(a.from(),a.to()),h=a.from(),void(u=!1);var e,r,s;u=!0}function m(e){if(e&&e(),t.focus(),h){t.setCursor(h);var r=t.state.vim;r.exMode=!1,r.lastHPos=r.lastHSPos=h.ch}c&&c()}if(d(),!u)return r?void je(t,{prefix:"replace with <strong>"+l+"</strong> (y/n/a/q/l)",onKeyDown:function(r,n,o){switch(e.e_stop(r),e.keyName(r)){case"Y":f(),d();break;case"N":d();break;case"A":var i=c;c=void 0,t.operation(p),c=i;break;case"L":f();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":m(o)}return u&&m(o),!0}}):(p(),void(c&&c()));Ne(t,"No matches for "+s.source)}(t,h,p,m,g,y,d,u,r.callback)}else Ne(t,"No previous substitute regular expression")},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save&&t.save()},nohlsearch:function(e){Ve(e)},yank:function(e){var t=te(e.getCursor()).line,r=e.getLine(t);B.registerController.pushText("0","yank",r,!0,!0)},delmarks:function(t,r){if(r.argString&&le(r.argString))for(var n=t.state.vim,o=new e.StringStream(le(r.argString));!o.eol();){o.eatSpace();var i=o.pos;if(!o.match(/[a-zA-Z]/,!1))return void Ne(t,"Invalid argument: "+r.argString.substring(i));var a=o.next();if(o.match("-",!0)){if(!o.match(/[a-zA-Z]/,!1))return void Ne(t,"Invalid argument: "+r.argString.substring(i));var s=a,l=o.next();if(!(M(s)&&M(l)||S(s)&&S(l)))return void Ne(t,"Invalid argument: "+s+"-");var c=s.charCodeAt(0),u=l.charCodeAt(0);if(c>=u)return void Ne(t,"Invalid argument: "+r.argString.substring(i));for(var h=0;h<=u-c;h++){var p=String.fromCharCode(c+h);delete n.marks[p]}}else delete n.marks[a]}else Ne(t,"Argument required")}},Qe=new $e;function ze(t){var r=t.state.vim,n=B.macroModeState,o=B.registerController.getRegister("."),i=n.isPlaying,a=n.lastInsertModeChanges;i||(t.off("change",Ge),e.off(t.getInputField(),"keydown",nt)),!i&&r.insertModeRepeat>1&&(ot(t,r,r.insertModeRepeat-1,!0),r.lastEditInputState.repeatOverride=r.insertModeRepeat),delete r.insertModeRepeat,r.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),o.setText(a.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),n.isRecording&&function(e){if(!e.isPlaying){var t=e.latestRegister,r=B.registerController.getRegister(t);r&&r.pushInsertModeChanges&&r.pushInsertModeChanges(e.lastInsertModeChanges)}}(n)}function Xe(e){t.unshift(e)}function Ze(t,r,n,o){var i=B.registerController.getRegister(o);if(":"==o)return i.keyBuffer[0]&&Qe.processCommand(t,i.keyBuffer[0]),void(n.isPlaying=!1);var a=i.keyBuffer,s=0;n.isPlaying=!0,n.replaySearchQueries=i.searchQueries.slice(0);for(var l=0;l<a.length;l++)for(var c,u,h=a[l];h;)if(u=(c=/<\w+-.+?>|<\w+>|./.exec(h))[0],h=h.substring(c.index+u.length),e.Vim.handleKey(t,u,"macro"),r.insertMode){var p=i.insertModeChanges[s++].changes;B.macroModeState.lastInsertModeChanges.changes=p,it(t,p,1),ze(t)}n.isPlaying=!1}function Ge(e,t){var r=B.macroModeState,n=r.lastInsertModeChanges;if(!r.isPlaying)for(;t;){if(n.expectCursorActivityForChange=!0,n.ignoreCount>1)n.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var o=e.listSelections().length;o>1&&(n.ignoreCount=o);var i=t.text.join("\n");n.maybeReset&&(n.changes=[],n.maybeReset=!1),i&&(e.state.overwrite&&!/\n/.test(i)?n.changes.push([i]):n.changes.push(i))}t=t.next}}function Ye(t){var r=t.state.vim;if(r.insertMode){var n=B.macroModeState;if(n.isPlaying)return;var o=n.lastInsertModeChanges;o.expectCursorActivityForChange?o.expectCursorActivityForChange=!1:o.maybeReset=!0}else t.curOp.isVimOp||function(t,r){var n=t.getCursor("anchor"),o=t.getCursor("head");if(r.visualMode&&!t.somethingSelected()?me(t,!1):r.visualMode||r.insertMode||!t.somethingSelected()||(r.visualMode=!0,r.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual"})),r.visualMode){var i=ne(o,n)?0:-1,a=ne(o,n)?-1:0;o=G(o,0,i),n=G(n,0,a),r.sel={anchor:n,head:o},Se(t,r,"<",oe(o,n)),Se(t,r,">",ie(o,n))}else r.insertMode||(r.lastHPos=t.getCursor().ch)}(t,r);r.visualMode&&et(t)}function et(e){var t=e.state.vim,r=X(e,te(t.sel.head)),n=G(r,0,1);if(tt(t),r.ch==e.getLine(r.line).length){var o=document.createElement("span");o.textContent=" ",o.className="cm-animate-fat-cursor",t.fakeCursorBookmark=e.setBookmark(r,{widget:o})}else t.fakeCursor=e.markText(r,n,{className:"cm-animate-fat-cursor"})}function tt(e){e.fakeCursor&&(e.fakeCursor.clear(),e.fakeCursor=null),e.fakeCursorBookmark&&(e.fakeCursorBookmark.clear(),e.fakeCursorBookmark=null)}function rt(e){this.keyName=e}function nt(t){var r=B.macroModeState.lastInsertModeChanges,n=e.keyName(t);n&&(-1==n.indexOf("Delete")&&-1==n.indexOf("Backspace")||e.lookupKey(n,"vim-insert",function(){return r.maybeReset&&(r.changes=[],r.maybeReset=!1),r.changes.push(new rt(n)),!0}))}function ot(e,t,r,n){var o=B.macroModeState;o.isPlaying=!0;var i=!!t.lastEditActionCommand,a=t.inputState;function s(){i?J.processAction(e,t,t.lastEditActionCommand):J.evalInput(e,t)}function l(r){if(o.lastInsertModeChanges.changes.length>0){r=t.lastEditActionCommand?r:1;var n=o.lastInsertModeChanges;it(e,n.changes,r)}}if(t.inputState=t.lastEditInputState,i&&t.lastEditActionCommand.interlaceInsertRepeat)for(var c=0;c<r;c++)s(),l(1);else n||s(),l(r);t.inputState=a,t.insertMode&&!n&&ze(e),o.isPlaying=!1}function it(t,r,n){function o(r){return"string"==typeof r?e.commands[r](t):r(t),!0}var i=t.getCursor("head"),a=B.macroModeState.lastInsertModeChanges.visualBlock;a&&(he(t,i,a+1),n=t.listSelections().length,t.setCursor(i));for(var s=0;s<n;s++){a&&t.setCursor(G(i,s,0));for(var l=0;l<r.length;l++){var c=r[l];if(c instanceof rt)e.lookupKey(c.keyName,"vim-insert",o);else if("string"==typeof c){var u=t.getCursor();t.replaceRange(c,u,u)}else{var h=t.getCursor(),p=G(h,0,c[0].length);t.replaceRange(c[0],h,p)}}}a&&t.setCursor(G(i,0,1))}return e.keyMap.vim={attach:a,detach:i,call:c},R("insertModeEscKeysTimeout",200,"number"),e.keyMap["vim-insert"]={fallthrough:["default"],attach:a,detach:i,call:c},e.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:a,detach:i,call:c},_(),H}()});
},{"../lib/codemirror":"e7zg","../addon/search/searchcursor":"GqVd","../addon/dialog/dialog":"is1v","../addon/edit/matchbrackets.js":"pD3F"}],"l8PY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.edit=o;var e=r(require("codemirror"));require("codemirror/keymap/vim");var s=require("../index");function r(e){return e&&e.__esModule?e:{default:e}}function o(r,o){const t=o[1],i=(0,e.default)(r.process,{value:r.fs.readFile(t),lineNumbers:!0,keyMap:"vim",mode:"text/x-csrc",showCursorWhenSelecting:!0});i.setSize("100%","100%"),i.focus();const u=e=>(e.fs.writeFile(t,i.getValue()),e.status=[!0,"saved to "+t],ok("saved to "+t));return(0,s.registerProcessCommand)("help",e=>(e.status=[!0,"this is help"],ok(""))),(0,s.registerProcessCommand)("save",u),(0,s.registerProcessCommand)("post",u),ok("opened phineas-code successfully")}
},{"codemirror":"e7zg","codemirror/keymap/vim":"P6Lh","../index":"WKyi"}],"UpxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readSexpr=d,exports.formatSexpr=O;const t=class{constructor(t){this.string=t,this.index=0,this.line=0,this.column=0}isEOF(){return this.index>=this.string.length}peek(){return this.string[this.index]}peekOffset(t){return this.string[this.index+t]}pop(){const t=this.string[this.index++];return"\n"==t?(this.line++,this.column=0):this.column++,t}pos(){return{line:this.line,column:this.column}}};function n(t){return t>="0"&&t<="9"}function e(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}function o(t){if(!t.isEOF()&&";"==t.peek()){for(t.pop();!t.isEOF();){if("\n"===t.pop())break}return!0}return!1}function i(t){let e=0,o=0,i=!1;for(!t.isEOF()&&"-"==t.peek()&&n(t.peekOffset(1))&&(i=!0,t.pop());!t.isEOF()&&n(t.peek());)o++,e*=10,e+=parseInt(t.pop());return 0!==o&&(i?-e:e)}function r(t){let n="";if(t.isEOF()||'"'!==t.peek())return!1;for(t.pop();!t.isEOF();){const e=t.pop();if('"'===e)return n;n+=e}return!1}function s(t){return!t.isEOF()&&"("==t.peek()&&(t.pop(),"(")}function p(t){return!t.isEOF()&&")"==t.peek()&&(t.pop(),")")}function u(t){const n=[" ","\t","\r","\n"];for(;!t.isEOF();){if(!n.includes(t.peek())){if(o(t))continue;break}t.pop()}return!1}function c(t){const o=["+","-","*","/","%","?","=","&","|","@","!","~","_"];if(t.isEOF())return!1;const i=t.pop();let r="";for((e(i)||o.includes(i))&&(r+=i);!t.isEOF();){const i=t.peek();if(!(e(i)||n(i)||o.includes(i)))break;r+=t.pop()}return r}function f(t,n){return{pos:t,token:n}}function l(n){let e=[],o=new t(n);for(;!o.isEOF();){u(o);let t=o.pos();const n=s(o);if(!1!==n){e.push(f(t,n));continue}const l=p(o);if(!1!==l){e.push(f(t,l));continue}const h=r(o);if(!1!==h){e.push(f(t,h));continue}const a=i(o);if(!1!==a){e.push(f(t,a));continue}const k=c(o);if(!1!==k){e.push(f(t,{id:k}));continue}const d=t.line,O=t.column,m=o.peek();throw"Unexpected character at line ".concat(d,", column ").concat(O,": '").concat(m,"'")}return e}class h{constructor(t){this.tokenStream=t,this.index=0}isEOF(){return this.index>=this.tokenStream.length}peek(){return this.tokenStream[this.index].token}pop(){return this.tokenStream[this.index++].token}pos(){return this.tokenStream[this.index].pos}}function a(t){let n=[];for(;!t.isEOF();){if(")"===t.peek())return t.pop(),n;"("===t.peek()?(t.pop(),n.push(a(t))):n.push(t.pop())}const e=t.pos().line,o=t.pos().column;throw"Expected ')' but found end of file at line ".concat(e,", column ").concat(o)}function k(t){let n=new h(t),e=null;if(n.isEOF()||"("!=n.peek()?n.isEOF()||")"==n.peek()||(e=n.pop()):(n.pop(),e=a(n)),n.isEOF())return e;{const t=n.peek(),e=n.pos().line,o=n.pos().column;throw"Expected end of file but found '".concat(t,"' at line ").concat(e,", column ").concat(o)}}function d(t){return k(l(t))}function O(t){if("number"==typeof t)return t.toString();if("string"==typeof t)return'"'+t+'"';if(Array.isArray(t)){let n="(";return n+=t.map(O).join(" "),n+=")"}if("object"==typeof t)return t.id;throw"Unable to format sexpr: ".concat(t)}
},{}],"Jo4J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runSexpr=s,exports.evalSexpr=h;var t=require("./Sexpr");function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){r(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){let n=null;for(let r of e)n=s(t,r);return n}function c(t,e){let n=0;for(let r of e){const e=s(t,r);if("number"!=typeof e)throw"'+': Expected number but got ".concat(e);n+=e}return n}function i(t,e){if(e.length<2)throw"'lambda': Expected >=2 arguments but got ".concat(e.length);let n=e[0];if(!Array.isArray(n))throw"'lambda': Expected list of arguments but got ".concat(n);n=n.map(t=>t.id);const r=e.slice(1);return function(){for(var e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];if(o.length!==n.length)throw"'lambda': Expected ".concat(n.length," args but got ").concat(o.length);let i=d(t);for(let t in n)i.scope[n[t]]=o[t];let u=null;for(let t of r)u=s(i,t);return u}}function u(t,e){if(e.length<2)throw"'defun': Expected >=2 arguments but got ".concat(e.length);const n=e[0];if(!Array.isArray(n)||n.length<1)throw"'defun': Expected a prototype of the form (function-name args...)";const r=e.slice(1),o=n[0].id,c=n.slice(1).map(t=>t.id);return t.scope[o]=(t=>(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length!==c.length)throw"'".concat(o,"': Expected ").concat(c.length," args but got ").concat(n.length);let u=d(t);for(let t in c)u.scope[c[t]]=n[t];let a=null;for(let t of r)a=s(u,t);return a}))(t),t.scope[o]}function a(t,e){return e}function s(e,n){switch(typeof n){case"string":case"number":return n;case"object":if(!Array.isArray(n)){if(void 0!==e.scope[n.id])return e.scope[n.id];if(void 0!==e.builtins[n.id])return e.builtins[n.id];throw"Invalid expression: name '".concat(n.id,"' could not be resolved")}if(0==n.length)throw"Invalid expression: function application does not contain a head";let r=n[0];const o=n.slice(1);if(!Array.isArray(r)){if(r=r.id,e.scope[r]&&"function"==typeof e.scope[r])return e.scope[r](...o.map(t=>s(e,t)));if(e.builtins[r])return e.builtins[r](e,o);throw"Invalid expression: name '".concat(r,"' could not be resolved")}{const t=s(e,r);if("function"==typeof t)return t(...o.map(t=>s(e,t)))}throw"Invalid expression: ".concat((0,t.formatSexpr)(r)," cannot be treated as a function")}}function l(t,e){return s(t,e[0])[0]}function f(t,e){return s(t,e[0]).slice(1)}function p(t,e){const n=e[0][0],r=n[0].id,o=s(t,n[1]),c=s(t,n[2]);let i=null;switch(r){case"==":o==c&&(i=s(t,e[0][1]));break;case"<":o<c&&(i=s(t,e[0][1]));break;case">":o>c&&(i=s(t,e[0][1]));break;case">=":o>=c&&(i=s(t,e[0][1]));break;case"<=":o<=c&&(i=s(t,e[0][1]));break;default:throw"Invalid conditional operator ".concat(r)}return null===i&&(i=s(t,e[0][2])),i}function b(t,e){const n=[];for(let r of e)n.push(s(t,r));return n}function d(t){return{builtins:Object.assign({},t.builtins),scope:Object.assign({},t.scope)}}function g(t){let e=d(t);return Object.keys(e.scope).map(t=>{"function"==typeof e.scope[t]&&(e.scope[t]="<function>")}),Object.keys(e.builtins).map(t=>{"function"==typeof e.builtins[t]&&(e.builtins[t]="<function>")}),JSON.stringify(e)}function h(e,r){const d=s({scope:{},builtins:n({begin:o,"+":c,lambda:i,quote:a,car:l,cdr:f,cond:p,list:b,defun:u},r)},(0,t.readSexpr)(e));return"function"==typeof d?"<function>":(0,t.formatSexpr)(d)}
},{"./Sexpr":"UpxL"}],"nwFB":[function(require,module,exports) {
"use strict";function e(e){return{result:e}}function r(e){return{err:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ok=e,exports.err=r,window.ok=e,window.err=r;
},{}],"isyZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.repl=c;var e=n(require("codemirror"));require("codemirror/keymap/vim");var t=require("../index"),r=require("../../../sexpr/Interpret"),o=require("../../../result");function n(e){return e&&e.__esModule?e:{default:e}}const s=e=>{if("object"==typeof e&&(e=e.id),"string"!=typeof e)throw"Expected position, got ".concat(e);if(2!==e.length)throw"Expected text position of length 2, got ".concat(e);const t=e[0].toLowerCase(),r=e[1].toLowerCase();if(t<"a"||t>"h")throw"Expected column between 'a' and 'h'";if(r<"1"||r>"8")throw"Expected row between 1 and 8";return t+r},i=(e,t)=>{const o=s((0,r.runSexpr)(e,t[0])),n=s((0,r.runSexpr)(e,t[1]));return document.body.dispatchEvent(new CustomEvent("move",{detail:{from:o,to:n}})),"hopefully that was ok, i can't view other processes..."};window.geiger=0;const u=(e,t)=>{const o=(0,r.runSexpr)(e,t[0]);return window.geiger+=1,setTimeout(()=>{document.body.dispatchEvent(new CustomEvent("aweirdevent",{detail:o}))},3e3*window.geiger),"ok"};function c(n,s){const c=(0,e.default)(n.process,{value:"",lineNumbers:!0,keyMap:"vim",mode:"text/x-csrc",showCursorWhenSelecting:!0});c.setSize("100%","100%"),c.focus();return(0,t.registerProcessCommand)("run",e=>{try{const n=(0,r.evalSexpr)(c.getValue(),{move:i,eigenjunior:u});return e.status=[!0,n],ok(n)}catch(t){return e.status=[!1,t],(0,o.err)(t)}}),ok("opened repl successfully")}
},{"codemirror":"e7zg","codemirror/keymap/vim":"P6Lh","../index":"WKyi","../../../sexpr/Interpret":"Jo4J","../../../result":"nwFB"}],"WKyi":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerProcessCommand=w,exports.unregisterProcessCommand=g,exports.getProcessCommand=v,exports.resetProcessCommands=x;var n=require("hybrids"),e=require("../../fs"),t=require("./commands/unix"),r=require("./commands/fun"),o=require("./bin/phineasCode"),s=require("./bin/repl");function i(){const n=f(['\n    <link\n        rel="stylesheet"\n        href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.56.0/codemirror.min.css"\n    />\n\n    <style>\n        :host {\n            display: block;\n            position: relative;\n            height: 100%;\n            font-family: monospace;\n            font-weight: bold;\n            font-size: 1rem;\n            background: black;\n            color: white;\n        }\n\n        .process, .results {\n            overflow-x: hidden;\n            overflow-y: scroll;\n        }\n\n        .process {\n            display: none;\n            position: absolute;\n            top: 0px;\n            height: calc(100% - 5.5rem);\n            width: 100%;\n            z-index: 1000;\n        }\n\n        .results {\n            height: calc(100% - 7rem);\n            padding: 10px;\n        }\n\n        .result > span {\n            padding-right: 5px;\n        }\n\n        .result {\n            display: flex;\n            max-width: 100%;\n            min-height: 1.25rem;\n        }\n\n        .result > div {\n            overflow-wrap: anywhere;\n        }\n\n        .status {\n            position: absolute;\n            bottom: 3rem;\n            width: 100%;\n            max-height: 2rem;\n        }\n\n        .cwd {\n            position: absolute;\n            bottom: 1.5rem;\n            border-top: 2px solid grey;\n            width: 100%;\n        }\n\n        .cwd,\n        .wd {\n            color: #5ed2ff;\n        }\n\n        .prompt {\n            display: flex;\n            position: absolute;\n            bottom: 0px;\n            width: 100%;\n            border-top: 2px solid grey;\n        }\n\n        .prompt span {\n            padding-right: 10px;\n        }\n\n        .prompt input {\n            width: 100%;\n            background: black;\n            border: none;\n            color: white;\n            font-family: monospace;\n            font-weight: bold;\n            font-size: 1rem;\n        }\n\n        .prompt input:focus {\n            outline: none;\n        }\n\n        .directory,\n        .file {\n            font-weight: bold;\n        }\n\n        .directory {\n            color: #ff8eff;\n        }\n\n        .directory::after {\n            content: "/";\n        }\n\n        .file {\n            color: #ffe86e;\n        }\n\n        .success,\n        .error {\n            font-style: italic;\n        }\n\n        .success {\n            color: #5effa9;\n        }\n\n        .error {\n            color: #ff5e5e;\n        }\n    </style>\n']);return i=function(){return n},n}function l(){const n=f(["\n                ",'\n                <div class="process">\n                </div>\n                <div class="results">\n                    ','\n                </div>\n                <div class="status">\n                    ','\n                </div>\n                <div class="cwd">\n                    cwd: ','\n                </div>\n                <div class="prompt">\n                    <span>','</span>\n                    <input \n                        type="text" \n                        onkeyup=',"\n                    ></input>\n                </div>\n        "]);return l=function(){return n},n}function c(){const n=f(['\n    <h2>\n        Welcome to <span style="color: #5effa9;">ferb</span>, a terminal for\n        tileos\n    </h2>\n    <p>type <span style="color: #5ed2ff;">help</span> to get started</p>\n']);return c=function(){return n},n}function d(){const n=f(['\n            <span class="error">\n                :err "','"\n            </span>\n        ']);return d=function(){return n},n}function a(){const n=f(['\n            <span class="success">\n                :ok "','"\n            </span>\n        ']);return a=function(){return n},n}function u(){const n=f(['\n            <div class="result">\n                <span>',"</span>\n                <div>\n                    ","\n                </div>\n            </div>\n        "]);return u=function(){return n},n}function p(){const n=f(["\n        <div>\n            Welcome to ferb, a terminal for tileos. List of commands:\n            <ul>\n                <li>help - View this message</li>\n                <li>ls - List all files inside the current directory</li>\n                <li>pwd - Print the path to the current directory</li>\n                <li>cd - Change the current directory to the specified path (.. to exit dir)</li>\n                <li>clear - Clear the terminal of all the text</li>\n                <li>exit - Close the terminal</li>\n                <li>edit - vim-like text editor, call with 'edit <file>' (use 'save' & 'exit' commands in the editor)</li>\n                <li>repl - Lisp interpreter. I know I left the documentation somewhere...</li>\n            </ul>\n\n            I think I might be forgetting a few other commands...\n        </div>\n    "]);return p=function(){return n},n}function f(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const m="$",h=">",b={ferb:r.ferb,ls:t.ls,pwd:t.pwd,cd:t.cd,clear:t.clear,help:k,edit:o.edit,repl:s.repl,exit:t.exit},y={};function w(n,e){y[n]=e}function g(n){delete y[n]}function v(n){return y[n]}function x(){for(let n in y)delete y[n]}function k(){return ok((0,n.html)(p()))}function C(n,e){if(13===e.keyCode){n.process.style.display="block";const t=e.target.value.split(" "),r=y[t[0]]||b[t[0]];if(r){const{result:e,err:o}=r(n,t);o?n.status=[!1,o]:(e&&(n.results=[...n.results,e]),n.process.firstElementChild||(n.status=[!0,""],n.process.style.display="none"))}else n.status=[!1,'the command "'.concat(t[0],'" could not be found')];e.target.value=""}}function q(e){return e.map(e=>(0,n.html)(u(),h,e))}function P(e){const[t,r]=e;return t?(0,n.html)(a(),r):(0,n.html)(d(),r)}const j=(0,n.html)(c()),z={process:n=>{let{render:e}=n;return e().querySelector(".process")},status:[!0,""],results:[j],fs:()=>e.tileosFs,render:e=>{let{results:t,fs:r,status:o}=e;return(0,n.html)(l(),I,q(t),P(o),r.pwd().result,"$",C)}},I=(0,n.html)(i());(0,n.define)("tileos-ferb",z);
},{"hybrids":"C9y0","../../fs":"tCrM","./commands/unix":"qao1","./commands/fun":"QpaB","./bin/phineasCode":"l8PY","./bin/repl":"isyZ"}],"cEFc":[function(require,module,exports) {
var define;
var r,e=function(r){var e="b",n="w",t=-1,o="p",i="n",u="b",f="r",l="q",a="k",c="pnbrqkPNBRQK",p="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",s=["1-0","0-1","1/2-1/2","*"],v={b:[16,32,17,15],w:[-16,-32,-17,-15]},g={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},h=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],d=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],E={p:0,n:1,b:2,r:3,q:4,k:5},b={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},m={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},_=7,A=6,S=1,y=0,C={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},I={w:[{square:C.a1,flag:m.QSIDE_CASTLE},{square:C.h1,flag:m.KSIDE_CASTLE}],b:[{square:C.a8,flag:m.QSIDE_CASTLE},{square:C.h8,flag:m.KSIDE_CASTLE}]},T=new Array(128),P={w:t,b:t},w=n,R={w:0,b:0},L=t,O=0,N=1,k=[],q={},D={};function K(r){void 0===r&&(r=!1),T=new Array(128),P={w:t,b:t},w=n,R={w:0,b:0},L=t,O=0,N=1,k=[],r||(q={}),D={},M(j())}function Q(){for(var r=[],e={},n=function(r){r in D&&(e[r]=D[r])};k.length>0;)r.push(or());for(n(j());r.length>0;)tr(r.pop()),n(j());D=e}function U(){x(p)}function x(r,o){void 0===o&&(o=!1);var i=r.split(/\s+/),u=i[0],f=0;if(!$(r).valid)return!1;K(o);for(var l=0;l<u.length;l++){var a=u.charAt(l);if("/"===a)f+=8;else if(-1!=="0123456789".indexOf(a))f+=parseInt(a,10);else{var c=a<"a"?n:e;G({type:a.toLowerCase(),color:c},lr(f)),f++}}return w=i[1],i[2].indexOf("K")>-1&&(R.w|=m.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(R.w|=m.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(R.b|=m.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(R.b|=m.QSIDE_CASTLE),L="-"===i[3]?t:C[i[3]],O=parseInt(i[4],10),N=parseInt(i[5],10),M(j()),!0}function $(r){var e="No errors.",n="FEN string must contain six space-delimited fields.",t="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",u="3rd field (castling availability) is invalid.",f="2nd field (side to move) is invalid.",l="1st field (piece positions) does not contain 8 '/'-delimited rows.",a="1st field (piece positions) is invalid [consecutive numbers].",c="1st field (piece positions) is invalid [invalid piece].",p="1st field (piece positions) is invalid [row too large].",s="Illegal en-passant square",v=r.split(/\s+/);if(6!==v.length)return{valid:!1,error_number:1,error:n};if(isNaN(v[5])||parseInt(v[5],10)<=0)return{valid:!1,error_number:2,error:t};if(isNaN(v[4])||parseInt(v[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(v[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(v[2]))return{valid:!1,error_number:5,error:u};if(!/^(w|b)$/.test(v[1]))return{valid:!1,error_number:6,error:f};var g=v[0].split("/");if(8!==g.length)return{valid:!1,error_number:7,error:l};for(var h=0;h<g.length;h++){for(var d=0,E=!1,b=0;b<g[h].length;b++)if(isNaN(g[h][b])){if(!/^[prnbqkPRNBQK]$/.test(g[h][b]))return{valid:!1,error_number:9,error:c};d+=1,E=!1}else{if(E)return{valid:!1,error_number:8,error:a};d+=parseInt(g[h][b],10),E=!0}if(8!==d)return{valid:!1,error_number:10,error:p}}return"3"==v[3][1]&&"w"==v[1]||"6"==v[3][1]&&"b"==v[1]?{valid:!1,error_number:11,error:s}:{valid:!0,error_number:0,error:e}}function j(){for(var r=0,o="",i=C.a8;i<=C.h1;i++){if(null==T[i])r++;else{r>0&&(o+=r,r=0);var u=T[i].color,f=T[i].type;o+=u===n?f.toUpperCase():f.toLowerCase()}i+1&136&&(r>0&&(o+=r),i!==C.h1&&(o+="/"),r=0,i+=8)}var l="";R[n]&m.KSIDE_CASTLE&&(l+="K"),R[n]&m.QSIDE_CASTLE&&(l+="Q"),R[e]&m.KSIDE_CASTLE&&(l+="k"),R[e]&m.QSIDE_CASTLE&&(l+="q"),l=l||"-";var a=L===t?"-":lr(L);return[o,w,l,a,O,N].join(" ")}function B(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(q[r[e]]=r[e+1]);return q}function M(r){k.length>0||(r!==p?(q.SetUp="1",q.FEN=r):(delete q.SetUp,delete q.FEN))}function W(r){var e=T[C[r]];return e?{type:e.type,color:e.color}:null}function G(r,e){if(!("type"in r&&"color"in r))return!1;if(-1===c.indexOf(r.type.toLowerCase()))return!1;if(!(e in C))return!1;var n=C[e];return(r.type!=a||P[r.color]==t||P[r.color]==n)&&(T[n]={type:r.type,color:r.color},r.type===a&&(P[r.color]=n),M(j()),!0)}function F(r,e,n,t,i){var u={color:w,from:e,to:n,flags:t,piece:r[e].type};return i&&(u.flags|=m.PROMOTION,u.promotion=i),r[n]?u.captured=r[n].type:t&m.EP_CAPTURE&&(u.captured=o),u}function H(r){function e(r,e,n,t,a){if(r[n].type!==o||ur(t)!==y&&ur(t)!==_)e.push(F(r,n,t,a));else for(var c=[l,f,u,i],p=0,s=c.length;p<s;p++)e.push(F(r,n,t,a,c[p]))}var n=[],t=w,a=ar(t),c={b:S,w:A},p=C.a8,s=C.h1,h=!1,d=!(void 0!==r&&"legal"in r)||r.legal;if(void 0!==r&&"square"in r){if(!(r.square in C))return[];p=s=C[r.square],h=!0}for(var E=p;E<=s;E++)if(136&E)E+=7;else{var b=T[E];if(null!=b&&b.color===t)if(b.type===o){var I=E+v[t][0];if(null==T[I]){e(T,n,E,I,m.NORMAL);I=E+v[t][1];c[t]===ur(E)&&null==T[I]&&e(T,n,E,I,m.BIG_PAWN)}for(O=2;O<4;O++){136&(I=E+v[t][O])||(null!=T[I]&&T[I].color===a?e(T,n,E,I,m.CAPTURE):I===L&&e(T,n,E,L,m.EP_CAPTURE))}}else for(var O=0,N=g[b.type].length;O<N;O++){var k=g[b.type][O];for(I=E;!(136&(I+=k));){if(null!=T[I]){if(T[I].color===t)break;e(T,n,E,I,m.CAPTURE);break}if(e(T,n,E,I,m.NORMAL),"n"===b.type||"k"===b.type)break}}}if(!h||s===P[t]){if(R[t]&m.KSIDE_CASTLE){var q=(D=P[t])+2;null!=T[D+1]||null!=T[q]||J(a,P[t])||J(a,D+1)||J(a,q)||e(T,n,P[t],q,m.KSIDE_CASTLE)}if(R[t]&m.QSIDE_CASTLE){var D;q=(D=P[t])-2;null!=T[D-1]||null!=T[D-2]||null!=T[D-3]||J(a,P[t])||J(a,D-1)||J(a,q)||e(T,n,P[t],q,m.QSIDE_CASTLE)}}if(!d)return n;var K=[];for(E=0,N=n.length;E<N;E++)tr(n[E]),V(t)||K.push(n[E]),or();return K}function Z(r,e){var n="";if(r.flags&m.KSIDE_CASTLE)n="O-O";else if(r.flags&m.QSIDE_CASTLE)n="O-O-O";else{var t=function(r,e){for(var n=H({legal:!e}),t=r.from,o=r.to,i=r.piece,u=0,f=0,l=0,a=0,c=n.length;a<c;a++){var p=n[a].from,s=n[a].to,v=n[a].piece;i===v&&t!==p&&o===s&&(u++,ur(t)===ur(p)&&f++,fr(t)===fr(p)&&l++)}if(u>0)return f>0&&l>0?lr(t):l>0?lr(t).charAt(1):lr(t).charAt(0);return""}(r,e);r.piece!==o&&(n+=r.piece.toUpperCase()+t),r.flags&(m.CAPTURE|m.EP_CAPTURE)&&(r.piece===o&&(n+=lr(r.from)[0]),n+="x"),n+=lr(r.to),r.flags&m.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return tr(r),X()&&(Y()?n+="#":n+="+"),or(),n}function z(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function J(r,t){for(var i=C.a8;i<=C.h1;i++)if(136&i)i+=7;else if(null!=T[i]&&T[i].color===r){var u=T[i],f=i-t,l=f+119;if(h[l]&1<<E[u.type]){if(u.type===o){if(f>0){if(u.color===n)return!0}else if(u.color===e)return!0;continue}if("n"===u.type||"k"===u.type)return!0;for(var a=d[l],c=i+a,p=!1;c!==t;){if(null!=T[c]){p=!0;break}c+=a}if(!p)return!0}}return!1}function V(r){return J(ar(r),P[r])}function X(){return V(w)}function Y(){return X()&&0===H().length}function rr(){return!X()&&0===H().length}function er(){for(var r={},e=[],n=0,t=0,o=C.a8;o<=C.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var f=T[o];f&&(r[f.type]=f.type in r?r[f.type]+1:1,f.type===u&&e.push(t),n++)}if(2===n)return!0;if(3===n&&(1===r[u]||1===r[i]))return!0;if(n===r[u]+2){var l=0,a=e.length;for(o=0;o<a;o++)l+=e[o];if(0===l||l===a)return!0}return!1}function nr(){for(var r=[],e={},n=!1;;){var t=or();if(!t)break;r.push(t)}for(;;){var o=j().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;tr(r.pop())}return n}function tr(r){var n=w,i=ar(n);if(function(r){k.push({move:r,kings:{b:P.b,w:P.w},turn:w,castling:{b:R.b,w:R.w},ep_square:L,half_moves:O,move_number:N})}(r),T[r.to]=T[r.from],T[r.from]=null,r.flags&m.EP_CAPTURE&&(w===e?T[r.to-16]=null:T[r.to+16]=null),r.flags&m.PROMOTION&&(T[r.to]={type:r.promotion,color:n}),T[r.to].type===a){if(P[T[r.to].color]=r.to,r.flags&m.KSIDE_CASTLE){var u=r.to-1,f=r.to+1;T[u]=T[f],T[f]=null}else if(r.flags&m.QSIDE_CASTLE){u=r.to+1,f=r.to-2;T[u]=T[f],T[f]=null}R[n]=""}if(R[n])for(var l=0,c=I[n].length;l<c;l++)if(r.from===I[n][l].square&&R[n]&I[n][l].flag){R[n]^=I[n][l].flag;break}if(R[i])for(l=0,c=I[i].length;l<c;l++)if(r.to===I[i][l].square&&R[i]&I[i][l].flag){R[i]^=I[i][l].flag;break}L=r.flags&m.BIG_PAWN?"b"===w?r.to-16:r.to+16:t,r.piece===o?O=0:r.flags&(m.CAPTURE|m.EP_CAPTURE)?O=0:O++,w===e&&N++,w=ar(w)}function or(){var r=k.pop();if(null==r)return null;var n=r.move;P=r.kings,w=r.turn,R=r.castling,L=r.ep_square,O=r.half_moves,N=r.move_number;var t,i,u=w,f=ar(w);if(T[n.from]=T[n.to],T[n.from].type=n.piece,T[n.to]=null,n.flags&m.CAPTURE)T[n.to]={type:n.captured,color:f};else if(n.flags&m.EP_CAPTURE){var l;l=u===e?n.to-16:n.to+16,T[l]={type:o,color:f}}n.flags&(m.KSIDE_CASTLE|m.QSIDE_CASTLE)&&(n.flags&m.KSIDE_CASTLE?(t=n.to+1,i=n.to-1):n.flags&m.QSIDE_CASTLE&&(t=n.to-2,i=n.to+1),T[t]=T[i],T[i]=null);return n}function ir(r,e){var n=z(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],i=t[2],u=t[3],f=t[4]}for(var l=H(),a=0,c=l.length;a<c;a++){if(n===z(Z(l[a]))||e&&n===z(Z(l[a],!0)))return l[a];if(t&&(!o||o.toLowerCase()==l[a].piece)&&C[i]==l[a].from&&C[u]==l[a].to&&(!f||f.toLowerCase()==l[a].promotion))return l[a]}return null}function ur(r){return r>>4}function fr(r){return 15&r}function lr(r){var e=fr(r),n=ur(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function ar(r){return r===n?e:n}function cr(r){var e=function r(e){var n=e instanceof Array?[]:{};for(var t in e)n[t]="object"==typeof t?r(e[t]):e[t];return n}(r);e.san=Z(e,!1),e.to=lr(e.to),e.from=lr(e.from);var n="";for(var t in m)m[t]&e.flags&&(n+=b[t]);return e.flags=n,e}function pr(r){return r.replace(/^\s+|\s+$/g,"")}return x(void 0===r?p:r),{WHITE:n,BLACK:e,PAWN:o,KNIGHT:i,BISHOP:u,ROOK:f,QUEEN:l,KING:a,SQUARES:function(){for(var r=[],e=C.a8;e<=C.h1;e++)136&e?e+=7:r.push(lr(e));return r}(),FLAGS:b,load:function(r){return x(r)},reset:function(){return U()},moves:function(r){for(var e=H(r),n=[],t=0,o=e.length;t<o;t++)void 0!==r&&"verbose"in r&&r.verbose?n.push(cr(e[t])):n.push(Z(e[t],!1));return n},in_check:function(){return X()},in_checkmate:function(){return Y()},in_stalemate:function(){return rr()},in_draw:function(){return O>=100||rr()||er()||nr()},insufficient_material:function(){return er()},in_threefold_repetition:function(){return nr()},game_over:function(){return O>=100||Y()||rr()||er()||nr()},validate_fen:function(r){return $(r)},fen:function(){return j()},board:function(){for(var r=[],e=[],n=C.a8;n<=C.h1;n++)null==T[n]?e.push(null):e.push({type:T[n].type,color:T[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var e="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",n="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,t=[],o=!1;for(var i in q)t.push("["+i+' "'+q[i]+'"]'+e),o=!0;o&&k.length&&t.push(e);for(var u=function(r){var e=D[j()];void 0!==e&&(r=`${r}${r.length>0?" ":""}{${e}}`);return r},f=[];k.length>0;)f.push(or());var l=[],a="";for(0===f.length&&l.push(u(""));f.length>0;){a=u(a);var c=f.pop();k.length||"b"!==c.color?"w"===c.color&&(a.length&&l.push(a),a=N+"."):a=N+". ...",a=a+" "+Z(c,!1),tr(c)}if(a.length&&l.push(u(a)),void 0!==q.Result&&l.push(q.Result),0===n)return t.join("")+l.join(" ");var p=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},s=function(r,o){for(var i of o.split(" "))if(i){if(r+i.length>n){for(;p();)r--;t.push(e),r=0}t.push(i),r+=i.length,t.push(" "),r++}return p()&&r--,r},v=0;for(i=0;i<l.length;i++)v+l[i].length>n&&l[i].includes("{")?v=s(v,l[i]):(v+l[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(e),v=0):0!==i&&(t.push(" "),v++),t.push(l[i]),v+=l[i].length);return t.join("")},load_pgn:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy;function t(r){return r.replace(/\\/g,"\\")}var o="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+t(o)+")|.)*\\])(?:"+t(o)+"){2}"),u=i.test(r)?i.exec(r)[1]:"";U();var f=function(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",o={},i=r.split(new RegExp(t(n))),u="",f="",l=0;l<i.length;l++)u=i[l].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),f=i[l].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),pr(u).length>0&&(o[u]=f);return o}(u,e);for(var l in f)B([l,f[l]]);if("1"===f.SetUp&&!("FEN"in f&&x(f.FEN,!0)))return!1;for(var a=function(r){return`{${function(r){return Array.from(r).map(function(r){return r.charCodeAt(0)<128?r.charCodeAt(0).toString(16):encodeURIComponent(r).replace(/\%/g,"").toLowerCase()}).join("")}((r=r.replace(new RegExp(t(o),"g")," ")).slice(1,r.length-1))}}`},c=function(r){if(r.startsWith("{")&&r.endsWith("}"))return function(r){return 0==r.length?"":decodeURIComponent("%"+r.match(/.{1,2}/g).join("%"))}(r.slice(1,r.length-1))},p=r.replace(u,"").replace(new RegExp(`({[^}]*})+?|;([^${t(o)}]*)`,"g"),function(r,e,n){return void 0!==e?a(e):" "+a(`{${n.slice(1)}}`)}).replace(new RegExp(t(o),"g")," "),v=/(\([^\(\)]+\))+?/g;v.test(p);)p=p.replace(v,"");var g=pr(p=(p=(p=p.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));g=g.join(",").replace(/,,+/g,",").split(",");for(var h="",d=0;d<g.length-1;d++){var E=c(g[d]);if(void 0===E){if(null==(h=ir(g[d],n)))return!1;tr(h)}else D[j()]=E}if(void 0!==(E=c(g[g.length-1]))&&(D[j()]=E,g.pop()),h=g[g.length-1],s.indexOf(h)>-1)(function(r){for(var e in r)return!0;return!1})(q)&&void 0===q.Result&&B(["Result",h]);else{if(null==(h=ir(h,n)))return!1;tr(h)}return!0},header:function(){return B(arguments)},ascii:function(){return function(){for(var r="   +------------------------+\n",e=C.a8;e<=C.h1;e++){if(0===fr(e)&&(r+=" "+"87654321"[ur(e)]+" |"),null==T[e])r+=" . ";else{var t=T[e].type;r+=" "+(T[e].color===n?t.toUpperCase():t.toLowerCase())+" "}e+1&136&&(r+="|\n",e+=8)}return r+="   +------------------------+\n",r+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return w},move:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy,t=null;if("string"==typeof r)t=ir(r,n);else if("object"==typeof r)for(var o=H(),i=0,u=o.length;i<u;i++)if(!(r.from!==lr(o[i].from)||r.to!==lr(o[i].to)||"promotion"in o[i]&&r.promotion!==o[i].promotion)){t=o[i];break}if(!t)return null;var f=cr(t);return tr(t),f},undo:function(){var r=or();return r?cr(r):null},clear:function(){return K()},put:function(r,e){return G(r,e)},get:function(r){return W(r)},remove:function(r){return function(r){var e=W(r);return T[C[r]]=null,e&&e.type===a&&(P[e.color]=t),M(j()),e}(r)},perft:function(r){return function r(e){for(var n=H({legal:!1}),t=0,o=w,i=0,u=n.length;i<u;i++)tr(n[i]),V(o)||(e-1>0?t+=r(e-1):t++),or();return t}(r)},square_color:function(r){if(r in C){var e=C[r];return(ur(e)+fr(e))%2==0?"light":"dark"}return null},history:function(r){for(var e=[],n=[],t=(void 0!==r&&"verbose"in r&&r.verbose);k.length>0;)e.push(or());for(;e.length>0;){var o=e.pop();t?n.push(cr(o)):n.push(Z(o)),tr(o)}return n},get_comment:function(){return D[j()]},set_comment:function(r){D[j()]=r.replace("{","[").replace("}","]")},delete_comment:function(){var r=D[j()];return delete D[j()],r},get_comments:function(){return Q(),Object.keys(D).map(function(r){return{fen:r,comment:D[r]}})},delete_comments:function(){return Q(),Object.keys(D).map(function(r){var e=D[r];return delete D[r],{fen:r,comment:e}})}}};"undefined"!=typeof exports&&(exports.Chess=e),void 0!==r&&r(function(){return e});
},{}],"vsQR":[function(require,module,exports) {
"use strict";var t=require("chess.js");class e extends HTMLElement{constructor(){super()}connectedCallback(){this.fen=this.getAttribute("data-fen"),this.game=new t.Chess(this.fen),document.body.addEventListener("fen",e=>{this.fen=e.detail,this.game=new t.Chess(this.fen),this.board.position(this.fen)}),document.body.addEventListener("move",t=>{const e=t.detail.from,s=t.detail.to;this.game.move({from:e,to:s})&&this.board.move("".concat(e,"-").concat(s))});const e=document.createElement("div");e.style.width="350px";const s="chess-board";if(e.setAttribute("id",s),document.getElementById(s)){const t=document.createElement("div");return t.innerHTML="An instance of `love-handle` already exists!",void this.appendChild(t)}this.appendChild(e);const n={draggable:!0,position:"start",onDragStart:this.onDragStart.bind(this),onDrop:this.onDrop.bind(this),position:this.fen};this.board=ChessBoard(s,n),this.appendChild(e),this.style.display="flex",this.style.height="100%",this.style.justifyContent="center",this.style.alignItems="center"}onDragStart(t,e,s,n){return!this.game.game_over()&&(!("w"===this.game.turn()&&-1!==e.search(/^b/)||"b"===this.game.turn()&&-1!==e.search(/^w/))&&void 0)}onDrop(t,e){if(null===this.game.move({from:t,to:e}))return"snapback"}}customElements.define("love-handle",e);
},{"chess.js":"cEFc"}],"HltL":[function(require,module,exports) {

"use strict";var n=require("hybrids");function e(){const n=r(["\n    <style>\n        :host {\n            display: block;\n            height: 100%;\n            overflow: scroll;\n        }\n\n        .status {\n            display: flex;\n        }\n\n        textarea {\n            height: 100%;\n            width: 100%;\n            padding: 0px;\n            margin: 0px;\n            font-size: 1.5rem;\n        }\n    </style>\n"]);return e=function(){return n},n}function t(){const n=r(["\n            ","\n            <textarea>\n",'</textarea\n            >\n            <div>\n                <p>\n                    special string #1 ->\n                    <span style="color: #ff57ae;"\n                        >"8/8/3r3q/8/8/8/5K2/5n2 b - - 0 1"</span\n                    >\n                </p>\n            </div>\n        ']);return t=function(){return n},n}function r(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const o={options:void 0,render:e=>{let{options:r}=e;return(0,n.html)(t(),i,(null==r?void 0:r.content)||"Welcome to doofpad, a dumber notepad")}},i=(0,n.html)(e());(0,n.define)("doof-pad",o);
},{"hybrids":"C9y0"}],"J4IM":[function(require,module,exports) {

"use strict";var n=require("hybrids");function e(){const n=o(["\n    <style>\n        :host {\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .controls {\n            width: 100%;\n            display: flex;\n            flex-direction: row;\n            justify-content: space-evenly;\n            align-items: center;\n            margin-top: auto;\n        }\n\n        img {\n            height: max-content;\n            width: auto;\n            max-width: 100%;\n            max-height: 100%;\n        }\n    </style>\n"]);return e=function(){return n},n}function t(){const n=o(["\n            ",'\n            <img src="','" />\n            <div class="controls">\n                <button onclick=',">Previous photo</button>\n                ","\n                <button onclick=",">Next photo</button>\n            </div>\n        "]);return t=function(){return n},n}function o(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const i={images:[{name:"xp-wallpaper.png",uri:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fcdn.vox-cdn.com%2Fthumbor%2FlCAHfXW-NhmS4tF2gBZmGuU2el4%3D%2F0x0%3A800x600%2F1200x800%2Ffilters%3Afocal(266x304%3A394x432)%2Fcdn.vox-cdn.com%2Fuploads%2Fchorus_image%2Fimage%2F55227337%2FBliss.1497349801.png&f=1&nofb=1"},{name:"seven-wallpaper.png",uri:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fwallpapercave.com%2Fwp%2FEgHUioz.jpg&f=1&nofb=1"},{name:"chessboard.jpeg",uri:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Chess_board_opening_staunton.jpg/800px-Chess_board_opening_staunton.jpg"}],imageIndex:0,render:e=>{let{images:o,imageIndex:i}=e;return(0,n.html)(t(),c,o[i%o.length].uri,n=>{n.imageIndex>0&&n.imageIndex--},o[i%o.length].name,n=>n.imageIndex++)}},c=(0,n.html)(e());(0,n.define)("photo-view",i);
},{"hybrids":"C9y0"}],"WieB":[function(require,module,exports) {

"use strict";var e=require("hybrids");function n(){const e=r(["\n    <style>\n        :host {\n            display: block;\n            height: 100%;\n            overflow: hidden;\n        }\n    </style>\n"]);return n=function(){return e},e}function t(){const e=r(["\n            ",'\n            <h2>What will this print?</h2>\n            <pre>console.log("hello, world");</pre>\n            <input type="text" />\n            <button onclick=',">submit</button>\n        "]);return t=function(){return e},e}function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function o(e){const n=document.createElement("div");n.innerHTML="🎂 WRONG: the correct answer is 'cake'",e.shadowRoot.appendChild(n),console.log("%c 🎂 Yay kayke!!!","font-weight: bold; font-size: 50px;color: red; text-shadow: 3px 3px 0 rgb(217,31,38) , 6px 6px 0 rgb(226,91,14) , 9px 9px 0 rgb(245,221,8) , 12px 12px 0 rgb(5,148,68) , 15px 15px 0 rgb(2,135,206) , 18px 18px 0 rgb(4,77,145) , 21px 21px 0 rgb(42,21,113)"),console.log("special string 3 -> 8/8/8/8/5r2/8/5Kn1/7q b - - 0 1")}const c={render:()=>(0,e.html)(t(),i,o)},i=(0,e.html)(n());(0,e.define)("candace-menace",c);
},{"hybrids":"C9y0"}],"sYlF":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t([],n):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).interact=n()}(function(){function t(t){var e;return function(n){return e||t(e={exports:{},parent:n},e.exports),e.exports}}var e=t(function(t,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Interactable=void 0;var o=h(M),i=v(z),u=v(L),s=v(st),l=h(d),c=v(lt),f=v(yt),p=n({});function v(t){return t&&t.__esModule?t:{default:t}}function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function h(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=y();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(){function t(e,n,r,o){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this._scopeEvents=o,m(this,"options",void 0),m(this,"_actions",void 0),m(this,"target",void 0),m(this,"events",new f.default),m(this,"_context",void 0),m(this,"_win",void 0),m(this,"_doc",void 0),this._actions=n.actions,this.target=e,this._context=n.context||r,this._win=(0,a.getWindow)((0,H.trySelector)(e)?this._context:e),this._doc=this._win.document,this.set(n)}return b(t,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}]),b(t,[{key:"setOnEvents",value:function(t,e){return l.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),l.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),l.func(e.onend)&&this.on("".concat(t,"end"),e.onend),l.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,n){(l.array(e)||l.object(e))&&this.off(t,e),(l.array(n)||l.object(n))&&this.on(t,n)}},{key:"setPerAction",value:function(t,e){var n=this._defaults;for(var r in e){var i=r,a=this.options[t],c=e[i];"listeners"===i&&this.updatePerActionListeners(t,a.listeners,c),l.array(c)?a[i]=o.from(c):l.plainObject(c)?(a[i]=(0,s.default)(a[i]||{},(0,u.default)(c)),l.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(a[i].enabled=!1!==c.enabled)):l.bool(c)&&l.object(n.perAction[i])?a[i].enabled=c:a[i]=c}}},{key:"getRect",value:function(t){return t=t||(l.element(this.target)?this.target:null),l.string(this.target)&&(t=t||this._context.querySelector(this.target)),(0,H.getElementRect)(t)}},{key:"rectChecker",value:function(t){return l.func(t)?(this.getRect=t,this):null===t?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if((0,H.trySelector)(e)||l.object(e)){for(var n in this.options[t]=e,this._actions.map)this.options[n][t]=e;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||(0,H.nodeContains)(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}},{key:"testAllow",value:function(t,e,n){return!t||!!l.element(n)&&(l.string(t)?(0,H.matchesUpTo)(n,t,e):!!l.element(t)&&(0,H.nodeContains)(t,n))}},{key:"testIgnore",value:function(t,e,n){return!(!t||!l.element(n))&&(l.string(t)?(0,H.matchesUpTo)(n,t,e):!!l.element(t)&&(0,H.nodeContains)(t,n))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,n,r){l.object(e)&&!l.array(e)&&(r=n,n=null);var o="on"===t?"add":"remove",a=(0,c.default)(e,n);for(var u in a){"wheel"===u&&(u=i.default.wheelEvent);for(var s=0;s<a[u].length;s++){var f=a[u][s];(0,p.isNonNativeEvent)(u,this._actions)?this.events[t](u,f):l.string(this.target)?this._scopeEvents["".concat(o,"Delegate")](this.target,this._context,u,f,r):this._scopeEvents[o](this.target,u,f,r)}}return this}},{key:"on",value:function(t,e,n){return this._onOff("on",t,e,n)}},{key:"off",value:function(t,e,n){return this._onOff("off",t,e,n)}},{key:"set",value:function(t){var e=this._defaults;for(var n in l.object(t)||(t={}),this.options=(0,u.default)(e.base),this._actions.methodDict){var r=n,o=this._actions.methodDict[r];this.options[r]={},this.setPerAction(r,(0,s.default)((0,s.default)({},e.perAction),e.actions[r])),this[o](t[r])}for(var i in t)l.func(this[i])&&this[i](t[i]);return this}},{key:"unset",value:function(){if(l.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],n=e.length-1;0<=n;n--){var r=e[n],o=r.selector,i=r.context,a=r.listeners;o===this.target&&i===this._context&&e.splice(n,1);for(var u=a.length-1;0<=u;u--)this._scopeEvents.removeDelegate(this.target,this._context,t,a[u][0],a[u][1])}else this._scopeEvents.remove(this.target,"all")}}]),t}(),w=e.Interactable=O;e.default=w}),n=t(function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isNonNativeEvent=function(t,e){if(e.phaselessTypes[t])return!0;for(var n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1},n.initScope=k,n.Scope=n.default=void 0;var i=y(T),a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==h(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe),u=y(yt),s=y(Te),l=y(o({})),c=y(e({})),f=y(qe),p=y(ke),d=y(rn),v=y(r({}));function y(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=a.win,j=a.browser,S=a.raf,M=function(){function t(){var e=this;O(this,t),P(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),P(this,"isInitialized",!1),P(this,"listenerMaps",[]),P(this,"browser",j),P(this,"utils",a),P(this,"defaults",a.clone(p.default)),P(this,"Eventable",u.default),P(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),P(this,"interactStatic",new l.default(this)),P(this,"InteractEvent",s.default),P(this,"Interactable",void 0),P(this,"interactables",new f.default(this)),P(this,"_win",void 0),P(this,"document",void 0),P(this,"window",void 0),P(this,"documents",[]),P(this,"_plugins",{list:[],map:{}}),P(this,"onWindowUnload",function(t){return e.removeDocument(t.target)});var n=this;this.Interactable=function(){function t(){return O(this,t),function(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}(this,b(t).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(t,c.default),_(t,[{key:"set",value:function(e){return g(b(t.prototype),"set",this).call(this,e),n.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){g(b(t.prototype),"unset",this).call(this),n.interactables.list.splice(n.interactables.list.indexOf(this),1),n.fire("interactable:unset",{interactable:this})}},{key:"_defaults",get:function(){return n.defaults}}]),t}()}return _(t,[{key:"addListeners",value:function(t,e){this.listenerMaps.push({id:e,map:t})}},{key:"fire",value:function(t,e){for(var n=0;n<this.listenerMaps.length;n++){var r=this.listenerMaps[n].map[t];if(r&&!1===r(e,this,t))return!1}}},{key:"init",value:function(t){return this.isInitialized?this:k(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||-1!==this._plugins.list.indexOf(t)}},{key:"usePlugin",value:function(t,e){if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var n=0,r=this.listenerMaps.length,o=t.before.reduce(function(t,e){return t[e]=!0,t},{});n<r&&!o[this.listenerMaps[n].id];n++);this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,e){if(-1!==this.getDocIndex(t))return!1;var n=x.getWindow(t);e=e?a.extend({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:e})}},{key:"removeDocument",value:function(t){var e=this.getDocIndex(t),n=x.getWindow(t),r=this.documents[e].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function k(t,e){return t.isInitialized=!0,x.init(e),i.default.init(e),j.init(e),S.init(e),t.window=e,t.document=e.document,t.usePlugin(v.default),t.usePlugin(d.default),t}n.Scope=n.default=M}),r=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(z),o=l(T),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(Et),a=l(_n),u=l(Fn),s=l(qn);function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}l(n({}));var y=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function h(t,e){return function(n){var o=e.interactions.list,a=i.getPointerType(n),u=f(i.getEventTargets(n),2),s=u[0],l=u[1],c=[];if(/^touch/.test(n.type)){e.prevTouchTime=e.now();for(var p=0;p<n.changedTouches.length;p++){var d,v={pointer:d=n.changedTouches[p],pointerId:i.getPointerId(d),pointerType:a,eventType:n.type,eventTarget:s,curEventTarget:l,scope:e},y=g(v);c.push([v.pointer,v.eventTarget,v.curEventTarget,y])}}else{var h=!1;if(!r.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var b=0;b<o.length&&!h;b++)h="mouse"!==o[b].pointerType&&o[b].pointerIsDown;h=h||e.now()-e.prevTouchTime<500||0===n.timeStamp}if(!h){var m={pointer:n,pointerId:i.getPointerId(n),pointerType:a,eventType:n.type,curEventTarget:l,eventTarget:s,scope:e},O=g(m);c.push([m.pointer,m.eventTarget,m.curEventTarget,O])}}for(var w=0;w<c.length;w++){var _=f(c[w],4),P=_[0],x=_[1],j=_[2];_[3][t](P,n,x,j)}}}function g(t){var e=t.pointerType,n=t.scope,r={interaction:s.default.search(t),searchDetails:t};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:e})}function b(t,e){var n=t.doc,r=t.scope,o=t.options,i=r.interactions.docEvents,a=r.events,u=a[e];for(var s in r.browser.isIOS&&!o.events&&(o.events={passive:!1}),a.delegatedEvents)u(n,s,a.delegateListener),u(n,s,a.delegateUseCapture,!0);for(var l=o&&o.events,c=0;c<i.length;c++){var f;u(n,(f=i[c]).type,f.listener,l)}}var m={id:"core/interactions",install:function(t){for(var e={},n=0;n<y.length;n++){var i;e[i=y[n]]=h(i,t)}var s,l=r.default.pEventTypes;function f(){for(var e=0;e<t.interactions.list.length;e++){var n=t.interactions.list[e];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var r=function(){var e=n.pointers[o];t.documents.some(function(t){var n=t.doc;return(0,H.nodeContains)(n,e.downTarget)})||n.removePointer(e.pointer,e.event)},o=0;o<n.pointers.length;o++)r()}}(s=o.default.PointerEvent?[{type:l.down,listener:f},{type:l.down,listener:e.pointerDown},{type:l.move,listener:e.pointerMove},{type:l.up,listener:e.pointerUp},{type:l.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:f},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var n=0;n<t.interactions.list.length;n++)t.interactions.list[n].documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=function(){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}(this,d(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,a.default),n=e,(r=[{key:"_now",value:function(){return t.now()}},{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}}])&&p(n.prototype,r),e}(),t.interactions={list:[],new:function(e){e.scopeFire=function(e,n){return t.fire(e,n)};var n=new t.Interaction(e);return t.interactions.list.push(n),n},listeners:e,docEvents:s,pointerMoveTolerance:1},t.usePlugin(u.default)},listeners:{"scope:add-document":function(t){return b(t,"add")},"scope:remove-document":function(t){return b(t,"remove")},"interactable:unset":function(t,e){for(var n=t.interactable,r=e.interactions.list.length-1;0<=r;r--){var o=e.interactions.list[r];o.interactable===n&&(o.stop(),e.fire("interactions:destroy",{interaction:o}),o.destroy(),2<e.interactions.list.length&&e.interactions.list.splice(r,1))}}},onDocSignal:b,doOnInteractions:h,methodNames:y};e.default=m}),o=t(function(t,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.InteractStatic=void 0;var o,i=(o=z)&&o.__esModule?o:{default:o},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(oe),u=n({});function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){function t(e){var n=this;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.scope=e,l(this,"getPointerAverage",a.pointer.pointerAverage),l(this,"getTouchBBox",a.pointer.touchBBox),l(this,"getTouchDistance",a.pointer.touchDistance),l(this,"getTouchAngle",a.pointer.touchAngle),l(this,"getElementRect",a.dom.getElementRect),l(this,"getElementClientRect",a.dom.getElementClientRect),l(this,"matchesSelector",a.dom.matchesSelector),l(this,"closest",a.dom.closest),l(this,"globalEvents",{}),l(this,"dynamicDrop",void 0),l(this,"version","1.9.8"),l(this,"interact",void 0);for(var r=this.constructor.prototype,o=function(t,r){var o=e.interactables.get(t,r);return o||((o=e.interactables.new(t,r)).events.global=n.globalEvents),o},i=0;i<Object.getOwnPropertyNames(this.constructor.prototype).length;i++){var u;o[u=Object.getOwnPropertyNames(this.constructor.prototype)[i]]=r[u]}return a.extend(o,this),o.constructor=this.constructor,this.interact=o}var e,n;return e=t,(n=[{key:"use",value:function(t,e){return this.scope.usePlugin(t,e),this}},{key:"isSet",value:function(t,e){return!!this.scope.interactables.get(t,e&&e.context)}},{key:"on",value:function(t,e,n){if(a.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.is.array(t)){for(var r=0;r<t.length;r++){var o=t[r];this.on(o,e,n)}return this}if(a.is.object(t)){for(var i in t)this.on(i,t[i],e);return this}return(0,u.isNonNativeEvent)(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this}},{key:"off",value:function(t,e,n){if(a.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.is.array(t)){for(var r=0;r<t.length;r++){var o=t[r];this.off(o,e,n)}return this}if(a.is.object(t)){for(var i in t)this.off(i,t[i],e);return this}var s;return(0,u.isNonNativeEvent)(t,this.scope.actions)?t in this.globalEvents&&-1!==(s=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(s,1):this.scope.events.remove(this.scope.document,t,e,n),this}},{key:"debug",value:function(){return this.scope}},{key:"supportsTouch",value:function(){return i.default.supportsTouch}},{key:"supportsPointerEvent",value:function(){return i.default.supportsPointerEvent}},{key:"stop",value:function(){for(var t=0;t<this.scope.interactions.list.length;t++)this.scope.interactions.list[t].stop();return this}},{key:"pointerMoveTolerance",value:function(t){return a.is.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance}},{key:"addDocument",value:function(t,e){this.scope.addDocument(t,e)}},{key:"removeDocument",value:function(t){this.scope.removeDocument(t)}}])&&s(e.prototype,n),t}(),f=e.InteractStatic=c;e.default=f}),i={};Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t){return!(!t||!t.Window)&&t instanceof t.Window};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.init=c,a.getWindow=f,a.default=void 0;var u,s=(u=i)&&u.__esModule?u:{default:u},l={realWindow:void 0,window:void 0,getWindow:f,init:c};function c(t){var e=(l.realWindow=t).document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),l.window=t}function f(t){return(0,s.default)(t)?t:(t.ownerDocument||t).defaultView||l.window}"undefined"==typeof window?(l.window=void 0,l.realWindow=void 0):c(window),l.init=c;var p=l;a.default=p;var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.array=d.plainObject=d.element=d.string=d.bool=d.number=d.func=d.object=d.docFrag=d.window=void 0;var v=h(i),y=h(a);function h(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}d.window=function(t){return t===y.default.window||(0,v.default)(t)},d.docFrag=function(t){return b(t)&&11===t.nodeType};var b=function(t){return!!t&&"object"===g(t)};function m(t){return"function"==typeof t}d.object=b,d.func=m,d.number=function(t){return"number"==typeof t},d.bool=function(t){return"boolean"==typeof t},d.string=function(t){return"string"==typeof t},d.element=function(t){if(!t||"object"!==g(t))return!1;var e=y.default.getWindow(t)||y.default.window;return/object|function/.test(g(e.Element))?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},d.plainObject=function(t){return b(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},d.array=function(t){return b(t)&&void 0!==t.length&&m(t.splice)};var O={};function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var _=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==w(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d);function P(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function x(t){var e=t.iEvent,n=t.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var o="x"===r?"y":"x";e.page[o]=n.coords.start.page[o],e.client[o]=n.coords.start.client[o],e.delta[o]=0}}}var j={id:"actions/drag",install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.draggable=j.draggable,e.map.drag=j,e.methodDict.drag="draggable",r.actions.drag=j.defaults},listeners:{"interactions:before-action-move":P,"interactions:action-resume":P,"interactions:action-move":x,"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.buttons,o=n.options.drag;if(o&&o.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(r&n.options.drag.mouseButtons)))return!(t.action={name:"drag",axis:"start"===o.lockAxis?o.startAxis:o.lockAxis})}},draggable:function(t){return _.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):_.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:P,move:x,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},S=j;O.default=S;var M={};function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function E(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}Object.defineProperty(M,"__esModule",{value:!0}),M.find=M.findIndex=M.from=M.merge=M.remove=M.contains=void 0,M.contains=function(t,e){return-1!==t.indexOf(e)},M.remove=function(t,e){return t.splice(t.indexOf(e),1)},M.merge=k,M.from=function(t){return k([],t)},M.findIndex=E,M.find=function(t,e){return t[E(t,e)]};var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var D={init:function(t){var e=t;D.document=e.document,D.DocumentFragment=e.DocumentFragment||I,D.SVGElement=e.SVGElement||I,D.SVGSVGElement=e.SVGSVGElement||I,D.SVGElementInstance=e.SVGElementInstance||I,D.Element=e.Element||I,D.HTMLElement=e.HTMLElement||D.Element,D.Event=e.Event,D.Touch=e.Touch||I,D.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function I(){}var A=D;T.default=A;var z={};function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var W=X(T),R=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==C(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d),F=X(a);function X(t){return t&&t.__esModule?t:{default:t}}var Y={init:function(t){var e=W.default.Element,n=F.default.window.navigator;Y.supportsTouch="ontouchstart"in t||R.func(t.DocumentTouch)&&W.default.document instanceof t.DocumentTouch,Y.supportsPointerEvent=!1!==n.pointerEnabled&&!!W.default.PointerEvent,Y.isIOS=/iP(hone|od|ad)/.test(n.platform),Y.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),Y.isIe9=/MSIE 9/.test(n.userAgent),Y.isOperaMobile="Opera"===n.appName&&Y.supportsTouch&&/Presto/.test(n.userAgent),Y.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",Y.pEventTypes=Y.supportsPointerEvent?W.default.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,Y.wheelEvent="onmousewheel"in W.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},N=Y;z.default=N;var L={};function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(L,"__esModule",{value:!0}),L.default=function t(e){var n={};for(var r in e){var o=e[r];q.plainObject(o)?n[r]=t(o):q.array(o)?n[r]=V.from(o):n[r]=o}return n};var V=G(M),q=G(d);function U(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return U=function(){return t},t}function G(t){if(t&&t.__esModule)return t;if(null===t||"object"!==B(t)&&"function"!=typeof t)return{default:t};var e=U();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}var H={};function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(H,"__esModule",{value:!0}),H.nodeContains=function(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1},H.closest=function(t,e){for(;J.element(t);){if(ot(t,e))return t;t=rt(t)}return null},H.parentNode=rt,H.matchesSelector=ot,H.indexOfDeepestElement=function(t){var e,n,r=[],o=t[0],i=o?0:-1;for(e=1;e<t.length;e++){var a=t[e];if(a&&a!==o)if(o){if(a.parentNode!==a.ownerDocument)if(o.parentNode!==a.ownerDocument)if(a.parentNode!==o.parentNode){if(!r.length)for(var u=o,s=void 0;(s=it(u))&&s!==u.ownerDocument;)r.unshift(u),u=s;var l=void 0;if(o instanceof Z.default.HTMLElement&&a instanceof Z.default.SVGElement&&!(a instanceof Z.default.SVGSVGElement)){if(a===o.parentNode)continue;l=a.ownerSVGElement}else l=a;for(var c=[];l.parentNode!==l.ownerDocument;)c.unshift(l),l=it(l);for(n=0;c[n]&&c[n]===r[n];)n++;for(var f=[c[n-1],c[n],r[n]],p=f[0].lastChild;p;){if(p===f[1]){o=a,i=e,r=c;break}if(p===f[2])break;p=p.previousSibling}}else{(parseInt((0,Q.getWindow)(o).getComputedStyle(o).zIndex,10)||0)<=(parseInt((0,Q.getWindow)(a).getComputedStyle(a).zIndex,10)||0)&&(o=a,i=e)}else o=a,i=e}else o=a,i=e}return i},H.matchesUpTo=function(t,e,n){for(;J.element(t);){if(ot(t,e))return!0;if((t=rt(t))===n)return ot(t,e)}return!1},H.getActualElement=function(t){return t instanceof Z.default.SVGElementInstance?t.correspondingUseElement:t},H.getScrollXY=at,H.getElementClientRect=ut,H.getElementRect=function(t){var e=ut(t);if(!$.default.isIOS7&&e){var n=at(Q.default.getWindow(t));e.left+=n.x,e.right+=n.x,e.top+=n.y,e.bottom+=n.y}return e},H.getPath=function(t){for(var e=[];t;)e.push(t),t=rt(t);return e},H.trySelector=function(t){return!!J.string(t)&&(Z.default.document.querySelector(t),!0)};var $=nt(z),Z=nt(T),J=et(d),Q=et(a);function tt(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return tt=function(){return t},t}function et(t){if(t&&t.__esModule)return t;if(null===t||"object"!==K(t)&&"function"!=typeof t)return{default:t};var e=tt();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function nt(t){return t&&t.__esModule?t:{default:t}}function rt(t){var e=t.parentNode;if(J.docFrag(e)){for(;(e=e.host)&&J.docFrag(e););return e}return e}function ot(t,e){return Q.default.window!==Q.default.realWindow&&(e=e.replace(/\/deep\//g," ")),t[$.default.prefixedMatchesSelector](e)}var it=function(t){return t.parentNode?t.parentNode:t.host};function at(t){return{x:(t=t||Q.default.window).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function ut(t){var e=t instanceof Z.default.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var st={};Object.defineProperty(st,"__esModule",{value:!0}),st.default=function(t,e){for(var n in e)t[n]=e[n];return t};var lt={};function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=function t(e,n,r){if(r=r||{},dt.string(e)&&-1!==e.search(" ")&&(e=vt(e)),dt.array(e))return e.reduce(function(e,o){return(0,pt.default)(e,t(o,n,r))},r);if(dt.object(e)&&(n=e,e=""),dt.func(n))r[e]=r[e]||[],r[e].push(n);else if(dt.array(n))for(var o=0;o<n.length;o++){var i=n[o];t(e,i,r)}else if(dt.object(n))for(var a in n){var u=vt(a).map(function(t){return"".concat(e).concat(t)});t(u,n[a],r)}return r};var ft,pt=(ft=st)&&ft.__esModule?ft:{default:ft},dt=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ct(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d);function vt(t){return t.trim().split(/ +/)}var yt={};function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0;var gt=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ht(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(M),bt=Ot(st),mt=Ot(lt);function Ot(t){return t&&t.__esModule?t:{default:t}}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t.immediatePropagationStopped)break;r(t)}}var xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_t(this,"options",void 0),_t(this,"types",{}),_t(this,"propagationStopped",!1),_t(this,"immediatePropagationStopped",!1),_t(this,"global",void 0),this.options=(0,bt.default)({},e||{})}var e,n;return e=t,(n=[{key:"fire",value:function(t){var e,n=this.global;(e=this.types[t.type])&&Pt(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&Pt(t,e)}},{key:"on",value:function(t,e){var n=(0,mt.default)(t,e);for(t in n)this.types[t]=gt.merge(this.types[t]||[],n[t])}},{key:"off",value:function(t,e){var n=(0,mt.default)(t,e);for(t in n){var r=this.types[t];if(r&&r.length)for(var o=0;o<n[t].length;o++){var i=n[t][o],a=r.indexOf(i);-1!==a&&r.splice(a,1)}}}},{key:"getRect",value:function(){return null}}])&&wt(e.prototype,n),t}();yt.default=xt;var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0,jt.default=function(t,e){return Math.sqrt(t*t+e*e)};var St={};function Mt(t,e){for(var n in e){var r=Mt.prefixedPropREs,o=!1;for(var i in r)if(0===n.indexOf(i)&&r[i].test(n)){o=!0;break}o||"function"==typeof e[n]||(t[n]=e[n])}return t}Object.defineProperty(St,"__esModule",{value:!0}),St.default=void 0,Mt.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var kt=Mt;St.default=kt;var Et={};function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Et,"__esModule",{value:!0}),Et.copyCoords=function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},Et.setCoordDeltas=function(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=n.timeStamp-e.timeStamp},Et.setCoordVelocity=function(t,e){var n=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/n,t.page.y=e.page.y/n,t.client.x=e.client.x/n,t.client.y=e.client.y/n,t.timeStamp=n},Et.setZeroCoords=function(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0},Et.isNativePointer=Yt,Et.getXY=Nt,Et.getPageXY=Lt,Et.getClientXY=Bt,Et.getPointerId=function(t){return Ct.number(t.pointerId)?t.pointerId:t.identifier},Et.setCoords=function(t,e,n){var r=1<e.length?qt(e):e[0],o={};Lt(r,o),t.page.x=o.x,t.page.y=o.y,Bt(r,o),t.client.x=o.x,t.client.y=o.y,t.timeStamp=n},Et.getTouchPair=Vt,Et.pointerAverage=qt,Et.touchBBox=function(t){if(!(t.length||t.touches&&1<t.touches.length))return null;var e=Vt(t),n=Math.min(e[0].pageX,e[1].pageX),r=Math.min(e[0].pageY,e[1].pageY),o=Math.max(e[0].pageX,e[1].pageX),i=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:r,left:n,top:r,right:o,bottom:i,width:o-n,height:i-r}},Et.touchDistance=function(t,e){var n=e+"X",r=e+"Y",o=Vt(t),i=o[0][n]-o[1][n],a=o[0][r]-o[1][r];return(0,zt.default)(i,a)},Et.touchAngle=function(t,e){var n=e+"X",r=e+"Y",o=Vt(t),i=o[1][n]-o[0][n],a=o[1][r]-o[0][r];return 180*Math.atan2(a,i)/Math.PI},Et.getPointerType=function(t){return Ct.string(t.pointerType)?t.pointerType:Ct.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof It.default.Touch?"touch":"mouse"},Et.getEventTargets=function(t){var e=Ct.func(t.composedPath)?t.composedPath():t.path;return[At.getActualElement(e?e[0]:t.target),At.getActualElement(t.currentTarget)]},Et.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},Et.coordsToEvent=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(Et,"pointerExtend",{enumerable:!0,get:function(){return Wt.default}});var Dt=Xt(z),It=Xt(T),At=Ft(H),zt=Xt(jt),Ct=Ft(d),Wt=Xt(St);function Rt(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Rt=function(){return t},t}function Ft(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Tt(t)&&"function"!=typeof t)return{default:t};var e=Rt();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function Xt(t){return t&&t.__esModule?t:{default:t}}function Yt(t){return t instanceof It.default.Event||t instanceof It.default.Touch}function Nt(t,e,n){return(n=n||{}).x=e[(t=t||"page")+"X"],n.y=e[t+"Y"],n}function Lt(t,e){return e=e||{x:0,y:0},Dt.default.isOperaMobile&&Yt(t)?(Nt("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):Nt("page",t,e),e}function Bt(t,e){return e=e||{},Dt.default.isOperaMobile&&Yt(t)?Nt("screen",t,e):Nt("client",t,e),e}function Vt(t){var e=[];return Ct.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function qt(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var r=t[n];for(var o in e)e[o]+=r[o]}for(var i in e)e[i]/=t.length;return e}var Ut={};function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.getStringOptionResult=Zt,Ut.resolveRectLike=function(t,e,n,r){var o=t;return $t.string(o)?o=Zt(o,e,n):$t.func(o)&&(o=o.apply(void 0,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(r))),$t.element(o)&&(o=(0,H.getElementRect)(o)),o},Ut.rectToXY=function(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},Ut.xywhToTlbr=function(t){return!t||"left"in t&&"top"in t||((t=(0,Kt.default)({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t},Ut.tlbrToXywh=function(t){return!t||"x"in t&&"y"in t||((t=(0,Kt.default)({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||t.right||0-t.x,t.height=t.height||t.bottom||0-t.y),t},Ut.addEdges=function(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top};var Ht,Kt=(Ht=st)&&Ht.__esModule?Ht:{default:Ht},$t=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Gt(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d);function Zt(t,e,n){return"parent"===t?(0,H.parentNode)(n):"self"===t?e.getRect(n):(0,H.closest)(n,t)}var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.default=function(t,e,n){var r=t.options[n],o=r&&r.origin||t.options.origin,i=(0,Ut.resolveRectLike)(o,t,e,[t&&e]);return(0,Ut.rectToXY)(i)||{x:0,y:0}};var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.default=void 0;var te,ee,ne=0,re={request:function(t){return te(t)},cancel:function(t){return ee(t)},init:function(t){if(te=t.requestAnimationFrame,ee=t.cancelAnimationFrame,!te)for(var e=["ms","moz","webkit","o"],n=0;n<e.length;n++){var r=e[n];te=t["".concat(r,"RequestAnimationFrame")],ee=t["".concat(r,"CancelAnimationFrame")]||t["".concat(r,"CancelRequestAnimationFrame")]}te||(te=function(t){var e=Date.now(),n=Math.max(0,16-(e-ne)),r=setTimeout(function(){t(e+n)},n);return ne=e+n,r},ee=function(t){return clearTimeout(t)})}};Qt.default=re;var oe={};function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(oe,"__esModule",{value:!0}),oe.warnOnce=function(t,e){var n=!1;return function(){return n||(fe.default.window.console.warn(e),n=!0),t.apply(this,arguments)}},oe.copyAction=function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t},Object.defineProperty(oe,"win",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(oe,"browser",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(oe,"clone",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(oe,"extend",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(oe,"getOriginXY",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(oe,"hypot",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(oe,"normalizeListeners",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(oe,"raf",{enumerable:!0,get:function(){return be.default}}),oe.rect=oe.pointer=oe.is=oe.dom=oe.arr=void 0;var ae=we(M);oe.arr=ae;var ue=we(H);oe.dom=ue;var se=we(d);oe.is=se;var le=we(Et);oe.pointer=le;var ce=we(Ut);oe.rect=ce;var fe=me(a),pe=me(z),de=me(L),ve=me(st),ye=me(Jt),he=me(jt),ge=me(lt),be=me(Qt);function me(t){return t&&t.__esModule?t:{default:t}}function Oe(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Oe=function(){return t},t}function we(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ie(t)&&"function"!=typeof t)return{default:t};var e=Oe();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}var _e={};function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e,n){return e&&Pe(t.prototype,e),n&&Pe(t,n),t}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=_e.BaseEvent=void 0;var Se=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,"type",void 0),je(this,"target",void 0),je(this,"currentTarget",void 0),je(this,"interactable",void 0),je(this,"_interaction",void 0),je(this,"timeStamp",void 0),je(this,"immediatePropagationStopped",!1),je(this,"propagationStopped",!1),this._interaction=e}return xe(t,[{key:"interaction",get:function(){return this._interaction._proxy}}]),xe(t,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),t}(),Me=_e.BaseEvent=Se;_e.default=Me;var ke={};Object.defineProperty(ke,"__esModule",{value:!0}),ke.default=ke.defaults=void 0;var Ee=ke.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};ke.default=Ee;var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=Te.InteractEvent=void 0;var De=We(st),Ie=We(Jt),Ae=We(jt),ze=We(_e),Ce=We(ke);function We(t){return t&&t.__esModule?t:{default:t}}function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Be=function(){function t(e,n,r,o,i,a,u){var s,l;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),s=!(l=Xe(t).call(this,e))||"object"!==Re(l)&&"function"!=typeof l?Ye(this):l,Le(Ye(s),"target",void 0),Le(Ye(s),"currentTarget",void 0),Le(Ye(s),"relatedTarget",null),Le(Ye(s),"screenX",void 0),Le(Ye(s),"screenY",void 0),Le(Ye(s),"button",void 0),Le(Ye(s),"buttons",void 0),Le(Ye(s),"ctrlKey",void 0),Le(Ye(s),"shiftKey",void 0),Le(Ye(s),"altKey",void 0),Le(Ye(s),"metaKey",void 0),Le(Ye(s),"page",void 0),Le(Ye(s),"client",void 0),Le(Ye(s),"delta",void 0),Le(Ye(s),"rect",void 0),Le(Ye(s),"x0",void 0),Le(Ye(s),"y0",void 0),Le(Ye(s),"t0",void 0),Le(Ye(s),"dt",void 0),Le(Ye(s),"duration",void 0),Le(Ye(s),"clientX0",void 0),Le(Ye(s),"clientY0",void 0),Le(Ye(s),"velocity",void 0),Le(Ye(s),"speed",void 0),Le(Ye(s),"swipe",void 0),Le(Ye(s),"timeStamp",void 0),Le(Ye(s),"dragEnter",void 0),Le(Ye(s),"dragLeave",void 0),Le(Ye(s),"axes",void 0),Le(Ye(s),"preEnd",void 0),i=i||e.element;var c=e.interactable,f=(c&&c.options||Ce.default).deltaSource,p=(0,Ie.default)(c,i,r),d="start"===o,v="end"===o,y=d?Ye(s):e.prevEvent,h=d?e.coords.start:v?{page:y.page,client:y.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return s.page=(0,De.default)({},h.page),s.client=(0,De.default)({},h.client),s.rect=(0,De.default)({},e.rect),s.timeStamp=h.timeStamp,v||(s.page.x-=p.x,s.page.y-=p.y,s.client.x-=p.x,s.client.y-=p.y),s.ctrlKey=n.ctrlKey,s.altKey=n.altKey,s.shiftKey=n.shiftKey,s.metaKey=n.metaKey,s.button=n.button,s.buttons=n.buttons,s.target=i,s.currentTarget=i,s.preEnd=a,s.type=u||r+(o||""),s.interactable=c,s.t0=d?e.pointers[e.pointers.length-1].downTime:y.t0,s.x0=e.coords.start.page.x-p.x,s.y0=e.coords.start.page.y-p.y,s.clientX0=e.coords.start.client.x-p.x,s.clientY0=e.coords.start.client.y-p.y,s.delta=d||v?{x:0,y:0}:{x:s[f].x-y[f].x,y:s[f].y-y[f].y},s.dt=e.coords.delta.timeStamp,s.duration=s.timeStamp-s.t0,s.velocity=(0,De.default)({},e.coords.velocity[f]),s.speed=(0,Ae.default)(s.velocity.x,s.velocity.y),s.swipe=v||"inertiastart"===o?s.getSwipe():null,s}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(t,ze.default),e=t,(n=[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||150<this.timeStamp-t.prevEvent.timeStamp)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,r=202.5<=e&&e<337.5;return{up:r,down:!r&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"pageX",get:function(){return this.page.x},set:function(t){this.page.x=t}},{key:"pageY",get:function(){return this.page.y},set:function(t){this.page.y=t}},{key:"clientX",get:function(){return this.client.x},set:function(t){this.client.x=t}},{key:"clientY",get:function(){return this.client.y},set:function(t){this.client.y=t}},{key:"dx",get:function(){return this.delta.x},set:function(t){this.delta.x=t}},{key:"dy",get:function(){return this.delta.y},set:function(t){this.delta.y=t}},{key:"velocityX",get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},{key:"velocityY",get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}])&&Fe(e.prototype,n),t}(),Ve=Te.InteractEvent=Be;Te.default=Ve;var qe={};function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=void 0;var Ge,He=Qe(M),Ke=Qe(H),$e=(Ge=st)&&Ge.__esModule?Ge:{default:Ge},Ze=Qe(d);function Je(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Je=function(){return t},t}function Qe(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Ue(t)&&"function"!=typeof t)return{default:t};var e=Je();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nn=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scope=e,en(this,"list",[]),en(this,"selectorMap",{}),e.addListeners({"interactable:unset":function(t){var e=t.interactable,r=e.target,o=e._context,i=Ze.string(r)?n.selectorMap[r]:r[n.scope.id],a=i.findIndex(function(t){return t.context===o});i[a]&&(i[a].context=null,i[a].interactable=null),i.splice(a,1)}})}var e,n;return e=t,(n=[{key:"new",value:function(t,e){e=(0,$e.default)(e||{},{actions:this.scope.actions});var n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events),r={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),Ze.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(r)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(r)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(t,e){var n=e&&e.context||this.scope.document,r=Ze.string(t),o=r?this.selectorMap[t]:t[this.scope.id];if(!o)return null;var i=He.find(o,function(e){return e.context===n&&(r||e.interactable.inContext(t))});return i&&i.interactable}},{key:"forEachMatch",value:function(t,e){for(var n=0;n<this.list.length;n++){var r=this.list[n],o=void 0;if((Ze.string(r.target)?Ze.element(t)&&Ke.matchesSelector(t,r.target):t===r.target)&&r.inContext(t)&&(o=e(r)),void 0!==o)return o}}}])&&tn(e.prototype,n),t}();qe.default=nn;var rn={};function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(rn,"__esModule",{value:!0}),rn.default=rn.FakeEvent=void 0;var an=vn(M),un=vn(H),sn=pn(st),ln=vn(d),cn=pn(St),fn=vn(Et);function pn(t){return t&&t.__esModule?t:{default:t}}function dn(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return dn=function(){return t},t}function vn(t){if(t&&t.__esModule)return t;if(null===t||"object"!==on(t)&&"function"!=typeof t)return{default:t};var e=dn();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gn=function(){function t(e){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.originalEvent=e,r=void 0,(n="currentTarget")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,(0,cn.default)(this,e)}var e,n;return e=t,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&yn(e.prototype,n),t}();function bn(t){if(!ln.object(t))return{capture:!!t,passive:!1};var e=(0,sn.default)({},t);return e.capture=!!t.capture,e.passive=!!t.passive,e}rn.FakeEvent=gn;var mn={id:"events",install:function(t){var e=[],n={},r=[],o={add:i,remove:a,addDelegate:function(t,e,o,a,l){var c=bn(l);if(!n[o]){n[o]=[];for(var f=0;f<r.length;f++){var p=r[f];i(p,o,u),i(p,o,s,!0)}}var d=n[o],v=an.find(d,function(n){return n.selector===t&&n.context===e});v||(v={selector:t,context:e,listeners:[]},d.push(v)),v.listeners.push([a,c])},removeDelegate:function(t,e,r,o,i){var l,c=bn(i),f=n[r],p=!1;if(f)for(l=f.length-1;0<=l;l--){var d=f[l];if(d.selector===t&&d.context===e){for(var v=d.listeners,y=v.length-1;0<=y;y--){var h=hn(v[y],2),g=h[0],b=h[1],m=b.capture,O=b.passive;if(g===o&&m===c.capture&&O===c.passive){v.splice(y,1),v.length||(f.splice(l,1),a(e,r,u),a(e,r,s,!0)),p=!0;break}}if(p)break}}},delegateListener:u,delegateUseCapture:s,delegatedEvents:n,documents:r,targets:e,supportsOptions:!1,supportsPassive:!1};function i(t,n,r,i){var a=bn(i),u=an.find(e,function(e){return e.eventTarget===t});u||(u={eventTarget:t,events:{}},e.push(u)),u.events[n]||(u.events[n]=[]),t.addEventListener&&!an.contains(u.events[n],r)&&(t.addEventListener(n,r,o.supportsOptions?a:a.capture),u.events[n].push(r))}function a(t,n,r,i){var u=bn(i),s=an.findIndex(e,function(e){return e.eventTarget===t}),l=e[s];if(l&&l.events)if("all"!==n){var c=!1,f=l.events[n];if(f){if("all"===r){for(var p=f.length-1;0<=p;p--)a(t,n,f[p],u);return}for(var d=0;d<f.length;d++)if(f[d]===r){t.removeEventListener(n,r,o.supportsOptions?u:u.capture),f.splice(d,1),0===f.length&&(delete l.events[n],c=!0);break}}c&&!Object.keys(l.events).length&&e.splice(s,1)}else for(n in l.events)l.events.hasOwnProperty(n)&&a(t,n,"all")}function u(t,e){for(var r=bn(e),o=new gn(t),i=n[t.type],a=hn(fn.getEventTargets(t),1)[0],u=a;ln.element(u);){for(var s=0;s<i.length;s++){var l=i[s],c=l.selector,f=l.context;if(un.matchesSelector(u,c)&&un.nodeContains(f,a)&&un.nodeContains(f,u)){var p=l.listeners;o.currentTarget=u;for(var d=0;d<p.length;d++){var v=hn(p[d],2),y=v[0],h=v[1],g=h.capture,b=h.passive;g===r.capture&&b===r.passive&&y(o)}}}u=un.parentNode(u)}}function s(t){return u.call(this,t,!0)}return t.document.createElement("div").addEventListener("test",null,{get capture(){return o.supportsOptions=!0},get passive(){return o.supportsPassive=!0}}),t.events=o}};rn.default=mn;var On={};Object.defineProperty(On,"__esModule",{value:!0}),On.default=On.PointerInfo=void 0;var wn=On.PointerInfo=function t(e,n,r,o,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.id=e,this.pointer=n,this.event=r,this.downTime=o,this.downTarget=i};On.default=wn;var _n={};function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_n,"__esModule",{value:!0}),Object.defineProperty(_n,"PointerInfo",{enumerable:!0,get:function(){return Tn.default}}),_n.default=_n.Interaction=_n._ProxyMethods=_n._ProxyValues=void 0;var xn,jn,Sn,Mn,kn=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Pn(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe),En=Dn(Te),Tn=Dn(On);function Dn(t){return t&&t.__esModule?t:{default:t}}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e,n){return e&&In(t.prototype,e),n&&In(t,n),t}function zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}_n._ProxyValues=xn,(jn=xn||(_n._ProxyValues=xn={})).interactable="",jn.element="",jn.prepared="",jn.pointerIsDown="",jn.pointerWasMoved="",jn._proxy="",_n._ProxyMethods=Sn,(Mn=Sn||(_n._ProxyMethods=Sn={})).start="",Mn.move="",Mn.end="",Mn.stop="",Mn.interacting="";var Cn=0,Wn=function(){function t(e){var n=this,r=e.pointerType,o=e.scopeFire;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),zn(this,"interactable",null),zn(this,"element",null),zn(this,"rect",void 0),zn(this,"_rects",void 0),zn(this,"edges",void 0),zn(this,"_scopeFire",void 0),zn(this,"prepared",{name:null,axis:null,edges:null}),zn(this,"pointerType",void 0),zn(this,"pointers",[]),zn(this,"downEvent",null),zn(this,"downPointer",{}),zn(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),zn(this,"prevEvent",null),zn(this,"pointerIsDown",!1),zn(this,"pointerWasMoved",!1),zn(this,"_interacting",!1),zn(this,"_ending",!1),zn(this,"_stopped",!0),zn(this,"_proxy",null),zn(this,"simulation",null),zn(this,"doMove",kn.warnOnce(function(t){this.move(t)},"The interaction.doMove() method has been renamed to interaction.move()")),zn(this,"coords",{start:kn.pointer.newCoords(),prev:kn.pointer.newCoords(),cur:kn.pointer.newCoords(),delta:kn.pointer.newCoords(),velocity:kn.pointer.newCoords()}),zn(this,"_id",Cn++),this._scopeFire=o,this.pointerType=r;var i=this;function a(t){Object.defineProperty(n._proxy,t,{get:function(){return i[t]}})}for(var u in this._proxy={},xn)a(u);function s(t){Object.defineProperty(n._proxy,t,{value:function(){return i[t].apply(i,arguments)}})}for(var l in Sn)s(l);this._scopeFire("interactions:new",{interaction:this})}return An(t,[{key:"pointerMoveTolerance",get:function(){return 1}}]),An(t,[{key:"pointerDown",value:function(t,e,n){var r=this.updatePointer(t,e,n,!0),o=this.pointers[r];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:r,pointerInfo:o,type:"down",interaction:this})}},{key:"start",value:function(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&(kn.copyAction(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?kn.extend({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);var r,o,i=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,o=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=kn.hypot(r,o)>this.pointerMoveTolerance);var a=this.getPointerIndex(t),u={pointer:t,pointerIndex:a,pointerInfo:this.pointers[a],event:e,type:"move",eventTarget:n,dx:r,dy:o,duplicate:i,interaction:this};i||kn.pointer.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",u),i||this.simulation||(this.interacting()&&(u.type=null,this.move(u)),this.pointerWasMoved&&kn.pointer.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||kn.pointer.setZeroCoords(this.coords.delta),(t=kn.extend({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,e,n,r){var o=this.getPointerIndex(t);-1===o&&(o=this.updatePointer(t,e,n,!1));var i=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:".concat(i),{pointer:t,pointerIndex:o,pointerInfo:this.pointers[o],event:e,eventTarget:n,type:i,curEventTarget:r,interaction:this}),this.simulation||this.end(e),this.pointerIsDown=!1,this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),!(this._ending=!1)===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=kn.pointer.getPointerId(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:kn.arr.findIndex(this.pointers,function(t){return t.id===e})}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,n,r){var o=kn.pointer.getPointerId(t),i=this.getPointerIndex(t),a=this.pointers[i];return r=!1!==r&&(r||/(down|start)$/i.test(e.type)),a?a.pointer=t:(a=new Tn.default(o,t,e,null,null),i=this.pointers.length,this.pointers.push(a)),kn.pointer.setCoords(this.coords.cur,this.pointers.map(function(t){return t.pointer}),this._now()),kn.pointer.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),r&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,kn.pointer.pointerExtend(this.downPointer,t),this.interacting()||(kn.pointer.copyCoords(this.coords.start,this.coords.cur),kn.pointer.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:r,pointerInfo:a,pointerIndex:i,interaction:this}),i}},{key:"removePointer",value:function(t,e){var n=this.getPointerIndex(t);if(-1!==n){var r=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1)}}},{key:"_updateLatestPointer",value:function(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,n,r){return new En.default(this,t,this.prepared.name,e,this.element,n,r)}},{key:"_fireEvent",value:function(t){this.interactable.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,n=t.phase,r=t.preEnd,o=t.type,i=this.rect;if(i&&"move"===n&&(kn.rect.addEdges(this.edges,i,this.coords.delta[this.interactable.options.deltaSource]),i.width=i.right-i.left,i.height=i.bottom-i.top),!1===this._scopeFire("interactions:before-action-".concat(n),t))return!1;var a=t.iEvent=this._createPreparedEvent(e,n,r,o);return this._scopeFire("interactions:action-".concat(n),t),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),t),!0}},{key:"_now",value:function(){return Date.now()}}]),t}(),Rn=_n.Interaction=Wn;_n.default=Rn;var Fn={};function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.install=Bn,Fn.default=void 0;var Yn=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Xn(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d);function Nn(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):Yn.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function Ln(t){var e=t.interaction,n=t.event;e.interactable&&e.interactable.checkAndPreventDefault(n)}function Bn(t){var e=t.Interactable;e.prototype.preventDefault=Nn,e.prototype.checkAndPreventDefault=function(e){return function(t,e,n){var r=t.options.preventDefault;if("never"!==r)if("always"!==r){if(e.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var o=(0,a.getWindow)(n.target).document,i=e.getDocOptions(o);if(!i||!i.events||!1!==i.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||Yn.element(n.target)&&(0,H.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,e)},t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var n=0;n<t.interactions.list.length;n++){var r=t.interactions.list[n];if(r.element&&(r.element===e.target||(0,H.nodeContains)(r.element,e.target)))return void r.interactable.checkAndPreventDefault(e)}}})}var Vn={id:"core/interactablePreventDefault",install:Bn,listeners:["down","move","up","cancel"].reduce(function(t,e){return t["interactions:".concat(e)]=Ln,t},{})};Fn.default=Vn;var qn={};function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0;var Gn=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Un(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(H);var Hn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0;e<Hn.methodOrder.length;e++){var n;n=Hn.methodOrder[e];var r=Hn[n](t);if(r)return r}return null},simulationResume:function(t){var e=t.pointerType,n=t.eventType,r=t.eventTarget,o=t.scope;if(!/down|start/i.test(n))return null;for(var i=0;i<o.interactions.list.length;i++){var a=o.interactions.list[i],u=r;if(a.simulation&&a.simulation.allowResume&&a.pointerType===e)for(;u;){if(u===a.element)return a;u=Gn.parentNode(u)}}return null},mouseOrPen:function(t){var e,n=t.pointerId,r=t.pointerType,o=t.eventType,i=t.scope;if("mouse"!==r&&"pen"!==r)return null;for(var a=0;a<i.interactions.list.length;a++){var u=i.interactions.list[a];if(u.pointerType===r){if(u.simulation&&!Kn(u,n))continue;if(u.interacting())return u;e=e||u}}if(e)return e;for(var s=0;s<i.interactions.list.length;s++){var l=i.interactions.list[s];if(!(l.pointerType!==r||/down/i.test(o)&&l.simulation))return l}return null},hasPointer:function(t){for(var e=t.pointerId,n=t.scope,r=0;r<n.interactions.list.length;r++){var o=n.interactions.list[r];if(Kn(o,e))return o}return null},idle:function(t){for(var e=t.pointerType,n=t.scope,r=0;r<n.interactions.list.length;r++){var o=n.interactions.list[r];if(1===o.pointers.length){var i=o.interactable;if(i&&(!i.options.gesture||!i.options.gesture.enabled))continue}else if(2<=o.pointers.length)continue;if(!o.interacting()&&e===o.pointerType)return o}return null}};function Kn(t,e){return t.pointers.some(function(t){return t.id===e})}var $n=Hn;qn.default=$n;var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.default=void 0;var Jn,Qn=(Jn=_e)&&Jn.__esModule?Jn:{default:Jn},tr=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==er(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(M);function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ar(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ur=function(){function t(e,n,r){var o,i;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),o=!(i=rr(t).call(this,n._interaction))||"object"!==er(i)&&"function"!=typeof i?or(this):i,ar(or(o),"target",void 0),ar(or(o),"dropzone",void 0),ar(or(o),"dragEvent",void 0),ar(or(o),"relatedTarget",void 0),ar(or(o),"draggable",void 0),ar(or(o),"timeStamp",void 0),ar(or(o),"propagationStopped",!1),ar(or(o),"immediatePropagationStopped",!1);var a="dragleave"===r?e.prev:e.cur,u=a.element,s=a.dropzone;return o.type=r,o.target=u,o.currentTarget=u,o.dropzone=s,o.dragEvent=n,o.relatedTarget=n.target,o.draggable=n.interactable,o.timeStamp=n.timeStamp,o}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ir(t,e)}(t,Qn.default),e=t,(n=[{key:"reject",value:function(){var e=this,n=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&n.cur.dropzone===this.dropzone&&n.cur.element===this.target)if(n.prev.dropzone=this.dropzone,n.prev.element=this.target,n.rejected=!0,n.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=n.activeDrops,o=tr.findIndex(r,function(t){var n=t.dropzone,r=t.element;return n===e.dropzone&&r===e.target});n.activeDrops.splice(o,1);var i=new t(n,this.dragEvent,"dropdeactivate");i.dropzone=this.dropzone,i.target=this.target,this.dropzone.fire(i)}else this.dropzone.fire(new t(n,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&nr(e.prototype,n),t}();Zn.default=ur;var sr={};function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(sr,"__esModule",{value:!0}),sr.default=void 0,dr(e({})),dr(n({}));var cr=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==lr(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe),fr=dr(O),pr=dr(Zn);function dr(t){return t&&t.__esModule?t:{default:t}}function vr(t,e){for(var n=0;n<t.slice().length;n++){var r,o=(r=t.slice()[n]).dropzone,i=r.element;e.dropzone=o,e.target=i,o.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function yr(t,e){for(var n=function(t,e){for(var n=t.interactables,r=[],o=0;o<n.list.length;o++){var i=n.list[o];if(i.options.drop.enabled){var a=i.options.drop.accept;if(!(cr.is.element(a)&&a!==e||cr.is.string(a)&&!cr.dom.matchesSelector(e,a)||cr.is.func(a)&&!a({dropzone:i,draggableElement:e})))for(var u=cr.is.string(i.target)?i._context.querySelectorAll(i.target):cr.is.array(i.target)?i.target:[i.target],s=0;s<u.length;s++){var l;(l=u[s])!==e&&r.push({dropzone:i,element:l})}}}return r}(t,e),r=0;r<n.length;r++){var o;(o=n[r]).rect=o.dropzone.getRect(o.element)}return n}function hr(t,e,n){for(var r=t.dropState,o=t.interactable,i=t.element,a=[],u=0;u<r.activeDrops.length;u++){var s,l=(s=r.activeDrops[u]).dropzone,c=s.element,f=s.rect;a.push(l.dropCheck(e,n,o,i,c,f)?c:null)}var p=cr.dom.indexOfDeepestElement(a);return r.activeDrops[p]||null}function gr(t,e,n){var r=t.dropState,o={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(o.activate=new pr.default(r,n,"dropactivate"),o.activate.target=null,o.activate.dropzone=null),"dragend"===n.type&&(o.deactivate=new pr.default(r,n,"dropdeactivate"),o.deactivate.target=null,o.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(o.leave=new pr.default(r,n,"dragleave"),n.dragLeave=o.leave.target=r.prev.element,n.prevDropzone=o.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(o.enter=new pr.default(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(o.drop=new pr.default(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(o.move=new pr.default(r,n,"dropmove"),(o.move.dragmove=n).dropzone=r.cur.dropzone)),o}function br(t,e){var n=t.dropState,r=n.activeDrops,o=n.cur,i=n.prev;e.leave&&i.dropzone.fire(e.leave),e.move&&o.dropzone.fire(e.move),e.enter&&o.dropzone.fire(e.enter),e.drop&&o.dropzone.fire(e.drop),e.deactivate&&vr(r,e.deactivate),n.prev.dropzone=o.dropzone,n.prev.element=o.element}function mr(t,e){var n=t.interaction,r=t.iEvent,o=t.event;if("dragmove"===r.type||"dragend"===r.type){var i=n.dropState;e.dynamicDrop&&(i.activeDrops=yr(e,n.element));var a=r,u=hr(n,a,o);i.rejected=i.rejected&&!!u&&u.dropzone===i.cur.dropzone&&u.element===i.cur.element,i.cur.dropzone=u&&u.dropzone,i.cur.element=u&&u.element,i.events=gr(n,0,a)}}var Or={id:"actions/drop",install:function(t){var e=t.actions,n=t.interactStatic,r=t.Interactable,o=t.defaults;t.usePlugin(fr.default),r.prototype.dropzone=function(t){return function(t,e){if(cr.is.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var n=cr.normalizeListeners(e.listeners),r=Object.keys(n).reduce(function(t,e){return t[/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e]=n[e],t},{});t.off(t.options.drop.listeners),t.on(r),t.options.drop.listeners=r}return cr.is.func(e.ondrop)&&t.on("drop",e.ondrop),cr.is.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),cr.is.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),cr.is.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),cr.is.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),cr.is.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:cr.is.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return cr.is.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},r.prototype.dropCheck=function(t,e,n,r,o,i){return function(t,e,n,r,o,i,a){var u=!1;if(!(a=a||t.getRect(i)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,u,t,i,r,o);var s=t.options.drop.overlap;if("pointer"===s){var l=cr.getOriginXY(r,o,"drag"),c=cr.pointer.getPageXY(e);c.x+=l.x,c.y+=l.y;var f=c.x>a.left&&c.x<a.right,p=c.y>a.top&&c.y<a.bottom;u=f&&p}var d=r.getRect(o);if(d&&"center"===s){var v=d.left+d.width/2,y=d.top+d.height/2;u=v>=a.left&&v<=a.right&&y>=a.top&&y<=a.bottom}d&&cr.is.number(s)&&(u=s<=Math.max(0,Math.min(a.right,d.right)-Math.max(a.left,d.left))*Math.max(0,Math.min(a.bottom,d.bottom)-Math.max(a.top,d.top))/(d.width*d.height));return t.options.drop.checker&&(u=t.options.drop.checker(e,n,u,t,i,r,o)),u}(this,t,e,n,r,o,i)},n.dynamicDrop=function(e){return cr.is.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},cr.extend(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,o.actions.drop=Or.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var n=t.interaction,r=(t.event,t.iEvent);if("drag"===n.prepared.name){var o=n.dropState;o.activeDrops=null,o.events=null,o.activeDrops=yr(e,n.element),o.events=gr(n,0,r),o.events.activate&&(vr(o.activeDrops,o.events.activate),e.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":mr,"interactions:action-end":mr,"interactions:after-action-move":function(t,e){var n=t.interaction,r=t.iEvent;"drag"===n.prepared.name&&(br(n,n.dropState.events),e.fire("actions/drop:move",{interaction:n,dragEvent:r}),n.dropState.events={})},"interactions:after-action-end":function(t,e){var n=t.interaction,r=t.iEvent;"drag"===n.prepared.name&&(br(n,n.dropState.events),e.fire("actions/drop:end",{interaction:n,dragEvent:r}))},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:yr,getDrop:hr,getDropEvents:gr,fireDropEvents:br,defaults:{enabled:!1,accept:null,overlap:"pointer"}},wr=Or;sr.default=wr;var _r={};function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_r,"__esModule",{value:!0}),_r.default=void 0;var xr=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Pr(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe);function jr(t){var e=t.interaction,n=t.iEvent,r=t.phase;if("gesture"===e.prepared.name){var o=e.pointers.map(function(t){return t.pointer}),i="start"===r,a="end"===r,u=e.interactable.options.deltaSource;if(n.touches=[o[0],o[1]],i)n.distance=xr.pointer.touchDistance(o,u),n.box=xr.pointer.touchBBox(o),n.scale=1,n.ds=0,n.angle=xr.pointer.touchAngle(o,u),n.da=0,e.gesture.startDistance=n.distance,e.gesture.startAngle=n.angle;else if(a){var s=e.prevEvent;n.distance=s.distance,n.box=s.box,n.scale=s.scale,n.ds=0,n.angle=s.angle,n.da=0}else n.distance=xr.pointer.touchDistance(o,u),n.box=xr.pointer.touchBBox(o),n.scale=n.distance/e.gesture.startDistance,n.angle=xr.pointer.touchAngle(o,u),n.ds=n.scale-e.gesture.scale,n.da=n.angle-e.gesture.angle;e.gesture.distance=n.distance,e.gesture.angle=n.angle,xr.is.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(e.gesture.scale=n.scale)}}var Sr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.gesturable=function(t){return xr.is.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):xr.is.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=Sr,e.methodDict.gesture="gesturable",r.actions.gesture=Sr.defaults},listeners:{"interactions:action-start":jr,"interactions:action-move":jr,"interactions:action-end":jr,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return!(t.action={name:"gesture"})}}},defaults:{},getCursor:function(){return""}},Mr=Sr;_r.default=Mr;var kr={};function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(kr,"__esModule",{value:!0}),kr.default=void 0;var Tr,Dr=Cr(H),Ir=(Tr=st)&&Tr.__esModule?Tr:{default:Tr},Ar=Cr(d);function zr(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return zr=function(){return t},t}function Cr(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Er(t)&&"function"!=typeof t)return{default:t};var e=zr();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function Wr(t,e,n,r,o,i,a){if(!e)return!1;if(!0===e){var u=Ar.number(i.width)?i.width:i.right-i.left,s=Ar.number(i.height)?i.height:i.bottom-i.top;if(a=Math.min(a,("left"===t||"right"===t?u:s)/2),u<0&&("left"===t?t="right":"right"===t&&(t="left")),s<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return n.x<(0<=u?i.left:i.right)+a;if("top"===t)return n.y<(0<=s?i.top:i.bottom)+a;if("right"===t)return n.x>(0<=u?i.right:i.left)-a;if("bottom"===t)return n.y>(0<=s?i.bottom:i.top)-a}return!!Ar.element(r)&&(Ar.element(e)?e===r:Dr.matchesUpTo(r,e,o))}function Rr(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var r=e;n.interactable.options.resize.square?("y"===n.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,"x"===n.resizeAxes?r.delta.y=0:"y"===n.resizeAxes&&(r.delta.x=0))}}var Fr={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,n=t.browser,r=t.Interactable,o=t.defaults;Fr.cursors=n.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},Fr.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(e){return function(t,e,n){return Ar.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),Ar.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),Ar.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:Ar.bool(e.square)&&(t.options.resize.square=e.square),t):Ar.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e.map.resize=Fr,e.methodDict.resize="resizable",o.actions.resize=Fr.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,o=n.rect;n._rects={start:(0,Ir.default)({},o),corrected:(0,Ir.default)({},o),previous:(0,Ir.default)({},o),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}}(t),Rr(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,o=n.interactable.options.resize.invert,i="reposition"===o||"negate"===o,a=n.rect,u=n._rects,s=u.start,l=u.corrected,c=u.delta,f=u.previous;if((0,Ir.default)(f,l),i){if((0,Ir.default)(l,a),"reposition"===o){if(l.top>l.bottom){var p=l.top;l.top=l.bottom,l.bottom=p}if(l.left>l.right){var d=l.left;l.left=l.right,l.right=d}}}else l.top=Math.min(a.top,s.bottom),l.bottom=Math.max(a.bottom,s.top),l.left=Math.min(a.left,s.right),l.right=Math.max(a.right,s.left);for(var v in l.width=l.right-l.left,l.height=l.bottom-l.top,l)c[v]=l[v]-f[v];r.edges=n.prepared.edges,r.rect=l,r.deltaRect=c}}(t),Rr(t)},"interactions:action-end":function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.element,o=t.rect,i=t.buttons;if(o){var a=(0,Ir.default)({},e.coords.cur.page),u=n.options.resize;if(u&&u.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(i&u.mouseButtons))){if(Ar.object(u.edges)){var s={left:!1,right:!1,top:!1,bottom:!1};for(var l in s)s[l]=Wr(l,u.edges[l],a,e._latestPointer.eventTarget,r,o,u.margin||Fr.defaultMargin);s.left=s.left&&!s.right,s.top=s.top&&!s.bottom,(s.left||s.right||s.top||s.bottom)&&(t.action={name:"resize",edges:s})}else{var c="y"!==u.axis&&a.x>o.right-Fr.defaultMargin,f="x"!==u.axis&&a.y>o.bottom-Fr.defaultMargin;(c||f)&&(t.action={name:"resize",axes:(c?"x":"")+(f?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,n=t.axis,r=t.name,o=Fr.cursors,i=null;if(n)i=o[r+n];else if(e){for(var a="",u=["top","bottom","left","right"],s=0;s<u.length;s++){var l=u[s];e[l]&&(a+=l)}i=o[a]}return i},defaultMargin:null},Xr=Fr;kr.default=Xr;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0}),Object.defineProperty(Yr,"drag",{enumerable:!0,get:function(){return Nr.default}}),Object.defineProperty(Yr,"drop",{enumerable:!0,get:function(){return Lr.default}}),Object.defineProperty(Yr,"gesture",{enumerable:!0,get:function(){return Br.default}}),Object.defineProperty(Yr,"resize",{enumerable:!0,get:function(){return Vr.default}}),Yr.default=void 0;var Nr=qr(O),Lr=qr(sr),Br=qr(_r),Vr=qr(kr);function qr(t){return t&&t.__esModule?t:{default:t}}var Ur={id:"actions",install:function(t){t.usePlugin(Br.default),t.usePlugin(Vr.default),t.usePlugin(Nr.default),t.usePlugin(Lr.default)}};Yr.default=Ur;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.default=void 0,Gr.default={};var Hr={};function Kr(t){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.getContainer=ro,Hr.getScroll=oo,Hr.getScrollSize=function(t){return Jr.window(t)&&(t=window.document.body),{x:t.scrollWidth,y:t.scrollHeight}},Hr.getScrollSizeDelta=function(t,e){var n=t.interaction,r=t.element,o=n&&n.interactable.options[n.prepared.name].autoScroll;if(!o||!o.enabled)return e(),{x:0,y:0};var i=ro(o.container,n.interactable,r),a=oo(i);e();var u=oo(i);return{x:u.x-a.x,y:u.y-a.y}},Hr.default=void 0;var $r,Zr=eo(H),Jr=eo(d),Qr=($r=Qt)&&$r.__esModule?$r:{default:$r};function to(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return to=function(){return t},t}function eo(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Kr(t)&&"function"!=typeof t)return{default:t};var e=to();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}var no={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){no.isScrolling=!0,Qr.default.cancel(no.i),(t.autoScroll=no).interaction=t,no.prevTime=no.now(),no.i=Qr.default.request(no.scroll)},stop:function(){no.isScrolling=!1,no.interaction&&(no.interaction.autoScroll=null),Qr.default.cancel(no.i)},scroll:function(){var t=no.interaction,e=t.interactable,n=t.element,r=t.prepared.name,o=e.options[r].autoScroll,i=ro(o.container,e,n),a=no.now(),u=(a-no.prevTime)/1e3,s=o.speed*u;if(1<=s){var l={x:no.x*s,y:no.y*s};if(l.x||l.y){var c=oo(i);Jr.window(i)?i.scrollBy(l.x,l.y):i&&(i.scrollLeft+=l.x,i.scrollTop+=l.y);var f=oo(i),p={x:f.x-c.x,y:f.y-c.y};(p.x||p.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:p,interaction:t,container:i})}no.prevTime=a}no.isScrolling&&(Qr.default.cancel(no.i),no.i=Qr.default.request(no.scroll))},check:function(t,e){var n=t.options;return n[e].autoScroll&&n[e].autoScroll.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&no.check(e.interactable,e.prepared.name))if(e.simulation)no.x=no.y=0;else{var r,o,i,a,u=e.interactable,s=e.element,l=e.prepared.name,c=u.options[l].autoScroll,f=ro(c.container,u,s);if(Jr.window(f))a=n.clientX<no.margin,r=n.clientY<no.margin,o=n.clientX>f.innerWidth-no.margin,i=n.clientY>f.innerHeight-no.margin;else{var p=Zr.getElementClientRect(f);a=n.clientX<p.left+no.margin,r=n.clientY<p.top+no.margin,o=n.clientX>p.right-no.margin,i=n.clientY>p.bottom-no.margin}no.x=o?1:a?-1:0,no.y=i?1:r?-1:0,no.isScrolling||(no.margin=c.margin,no.speed=c.speed,no.start(e))}}};function ro(t,e,n){return(Jr.string(t)?(0,Ut.getStringOptionResult)(t,e,n):t)||(0,a.getWindow)(n)}function oo(t){return Jr.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var io={id:"auto-scroll",install:function(t){var e=t.defaults,n=t.actions;(t.autoScroll=no).now=function(){return t.now()},n.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=no.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,no.stop(),no.interaction&&(no.interaction=null)},"interactions:stop":no.stop,"interactions:action-move":function(t){return no.onInteractionMove(t)}}};Hr.default=io;var ao={};function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(ao,"__esModule",{value:!0}),ao.default=void 0;var so=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==uo(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d);function lo(t){return so.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function co(t){return so.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}var fo={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable;e.prototype.getAction=function(e,n,r,o){var i,a,u,s,l,c,f,p=(a=n,u=r,s=o,l=t,c=(i=this).getRect(s),f={action:null,interactable:i,interaction:u,element:s,rect:c,buttons:a.buttons||{0:1,1:4,3:8,4:16}[a.button]},l.fire("auto-start:check",f),f.action);return this.options.actionChecker?this.options.actionChecker(e,n,p,this,o,r):p},e.prototype.ignoreFrom=(0,oe.warnOnce)(function(t){return this._backCompatOption("ignoreFrom",t)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,oe.warnOnce)(function(t){return this._backCompatOption("allowFrom",t)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=co,e.prototype.styleCursor=lo}};ao.default=fo;var po={};function vo(t){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(po,"__esModule",{value:!0}),po.default=void 0;var yo,ho=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==vo(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe),go=(yo=ao)&&yo.__esModule?yo:{default:yo};function bo(t,e,n,r,o){return e.testIgnoreAllow(e.options[t.name],n,r)&&e.options[t.name].enabled&&_o(e,n,t,o)?t:null}function mo(t,e,n,r,o,i,a){for(var u=0,s=r.length;u<s;u++){var l=r[u],c=o[u],f=l.getAction(e,n,t,c);if(f){var p=bo(f,l,c,i,a);if(p)return{action:p,interactable:l,element:c}}}return{action:null,interactable:null,element:null}}function Oo(t,e,n,r,o){var i=[],a=[],u=r;function s(t){i.push(t),a.push(u)}for(;ho.is.element(u);){i=[],a=[],o.interactables.forEachMatch(u,s);var l=mo(t,e,n,i,a,r,o);if(l.action&&!l.interactable.options[l.action.name].manualStart)return l;u=ho.dom.parentNode(u)}return{action:null,interactable:null,element:null}}function wo(t,e,n){var r=e.action,o=e.interactable,i=e.element;r=r||{name:null},t.interactable=o,t.element=i,ho.copyAction(t.prepared,r),t.rect=o&&r.name?o.getRect(i):null,jo(t,n),n.fire("autoStart:prepared",{interaction:t})}function _o(t,e,n,r){var o=t.options,i=o[n.name].max,a=o[n.name].maxPerElement,u=r.autoStart.maxInteractions,s=0,l=0,c=0;if(!(i&&a&&u))return!1;for(var f=0;f<r.interactions.list.length;f++){var p=r.interactions.list[f],d=p.prepared.name;if(p.interacting()){if(u<=++s)return!1;if(p.interactable===t){if(i<=(l+=d===n.name?1:0))return!1;if(p.element===e&&(c++,d===n.name&&a<=c))return!1}}}return 0<u}function Po(t,e){return ho.is.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function xo(t,e,n){var r=n.autoStart.cursorElement;r&&r!==t&&(r.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function jo(t,e){var n=t.interactable,r=t.element,o=t.prepared;if("mouse"===t.pointerType&&n&&n.options.styleCursor){var i="";if(o.name){var a=n.options[o.name].cursorChecker;i=ho.is.func(a)?a(o,n,r,t._interacting):e.actions.map[o.name].getCursor(o)}xo(t.element,i||"",e)}else e.autoStart.cursorElement&&xo(e.autoStart.cursorElement,"",e)}var So={id:"auto-start/base",before:["actions","actions/drag","actions/resize","actions/gesture"],install:function(t){var e=t.interactStatic,n=t.defaults;t.usePlugin(go.default),n.base.actionChecker=null,n.base.styleCursor=!0,ho.extend(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return Po(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:_o,cursorElement:null}},listeners:{"interactions:down":function(t,e){var n=t.interaction,r=t.pointer,o=t.event,i=t.eventTarget;n.interacting()||wo(n,Oo(n,r,o,i,e),e)},"interactions:move":function(t,e){var n,r,o,i,a,u;r=e,o=(n=t).interaction,i=n.pointer,a=n.event,u=n.eventTarget,"mouse"!==o.pointerType||o.pointerIsDown||o.interacting()||wo(o,Oo(o,i,a,u,r),r),function(t,e){var n=t.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){e.fire("autoStart:before-start",t);var r=n.interactable,o=n.prepared.name;o&&r&&(r.options[o].manualStart||!_o(r,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,r,n.element),jo(n,e)))}}(t,e)},"interactions:stop":function(t,e){var n=t.interaction,r=n.interactable;r&&r.options.styleCursor&&xo(n.element,"",e)}},maxInteractions:Po,withinInteractionLimit:_o,validateAction:bo};po.default=So;var Mo={};function ko(t){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.default=void 0;var Eo,To=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ko(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d),Do=(Eo=po)&&Eo.__esModule?Eo:{default:Eo};var Io={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){var n=t.interaction,r=t.eventTarget,o=t.dx,i=t.dy;if("drag"===n.prepared.name){var a=Math.abs(o),u=Math.abs(i),s=n.interactable.options.drag,l=s.startAxis,c=u<a?"x":a<u?"y":"xy";if(n.prepared.axis="start"===s.lockAxis?c[0]:s.lockAxis,"xy"!=c&&"xy"!==l&&l!==c){function f(t){if(t!==n.interactable){var o=n.interactable.options.drag;if(!o.manualStart&&t.testIgnoreAllow(o,p,r)){var i=t.getAction(n.downPointer,n.downEvent,n,p);if(i&&"drag"===i.name&&function(t,e){if(e){var n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}}(c,t)&&Do.default.validateAction(i,t,p,r,e))return t}}}n.prepared.name=null;for(var p=r;To.element(p);){var d=e.interactables.forEachMatch(p,f);if(d){n.prepared.name="drag",n.interactable=d,n.element=p;break}p=(0,H.parentNode)(p)}}}}}};Mo.default=Io;var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var zo,Co=(zo=po)&&zo.__esModule?zo:{default:zo};function Wo(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.interactable.options;return n[e].hold||n[e].delay}var Ro={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(Co.default),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,n=Wo(e);0<n&&(e.autoStartHoldTimer=setTimeout(function(){e.start(e.prepared,e.interactable,e.element)},n))},"interactions:move":function(t){var e=t.interaction,n=t.duplicate;e.pointerWasMoved&&!n&&clearTimeout(e.autoStartHoldTimer)},"autoStart:before-start":function(t){var e=t.interaction;0<Wo(e)&&(e.prepared.name=null)}},getHoldDuration:Wo};Ao.default=Ro;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0}),Object.defineProperty(Fo,"autoStart",{enumerable:!0,get:function(){return Xo.default}}),Object.defineProperty(Fo,"dragAxis",{enumerable:!0,get:function(){return Yo.default}}),Object.defineProperty(Fo,"hold",{enumerable:!0,get:function(){return No.default}}),Fo.default=void 0;var Xo=Lo(po),Yo=Lo(Mo),No=Lo(Ao);function Lo(t){return t&&t.__esModule?t:{default:t}}var Bo={id:"auto-start",install:function(t){t.usePlugin(Xo.default),t.usePlugin(No.default),t.usePlugin(Yo.default)}};Fo.default=Bo;var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.default=void 0,Vo.default={};var qo={};Object.defineProperty(qo,"__esModule",{value:!0}),qo.default=void 0,qo.default={};var Uo={};function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.default=void 0;var Ho,Ko;$o(T),$o(st),function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Go(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n)}(d),$o(a);function $o(t){return t&&t.__esModule?t:{default:t}}(Ko=Ho=Ho||{}).touchAction="touchAction",Ko.boxSizing="boxSizing",Ko.noListeners="noListeners";Ho.touchAction,Ho.boxSizing,Ho.noListeners;var Zo={id:"dev-tools",install:function(){}};Uo.default=Zo;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.default=void 0,Jo.default={};var Qo={};function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.getRectOffset=ci,Qo.default=void 0;var ei=oi(L),ni=oi(st),ri=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ti(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(Ut);function oi(t){return t&&t.__esModule?t:{default:t}}function ii(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var si=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.interaction=e,ui(this,"states",[]),ui(this,"startOffset",{left:0,right:0,top:0,bottom:0}),ui(this,"startDelta",null),ui(this,"result",null),ui(this,"endResult",null),ui(this,"edges",void 0),this.result=li()}var e,n;return e=t,(n=[{key:"start",value:function(t,e){var n=t.phase,r=this.interaction,o=function(t){var e=t.interactable.options[t.prepared.name],n=e.modifiers;return n&&n.length?n.filter(function(t){return!t.options||!1!==t.options.enabled}):["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(t){var n=e[t];return n&&n.enabled&&{options:n,methods:n._methods}}).filter(function(t){return!!t})}(r);this.prepareStates(o),this.edges=(0,ni.default)({},r.edges),this.startOffset=ci(r.rect,e);var i={phase:n,pageCoords:e,preEnd:!(this.startDelta={x:0,y:0})};return this.result=li(),this.startAll(i),this.result=this.setAll(i)}},{key:"fillArg",value:function(t){var e=this.interaction;t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect=t.rect||e.rect,t.edges=this.edges,t.startOffset=this.startOffset}},{key:"startAll",value:function(t){this.fillArg(t);for(var e=0;e<this.states.length;e++){var n=this.states[e];n.methods.start&&(t.state=n).methods.start(t)}}},{key:"setAll",value:function(t){this.fillArg(t);var e=t.phase,n=t.preEnd,r=t.skipModifiers,o=t.rect;t.coords=(0,ni.default)({},t.pageCoords),t.rect=(0,ni.default)({},o);for(var i=r?this.states.slice(r):this.states,a=li(t.coords,t.rect),u=0;u<i.length;u++){var s=i[u],l=s.options,c=(0,ni.default)({},t.coords),f=null;s.methods.set&&this.shouldDo(l,n,e)&&(f=(t.state=s).methods.set(t),ri.addEdges(this.interaction.edges,t.rect,{x:t.coords.x-c.x,y:t.coords.y-c.y})),a.eventProps.push(f)}a.delta.x=t.coords.x-t.pageCoords.x,a.delta.y=t.coords.y-t.pageCoords.y,a.rectDelta.left=t.rect.left-o.left,a.rectDelta.right=t.rect.right-o.right,a.rectDelta.top=t.rect.top-o.top,a.rectDelta.bottom=t.rect.bottom-o.bottom;var p=this.result.coords,d=this.result.rect;if(p&&d){var v=a.rect.left!==d.left||a.rect.right!==d.right||a.rect.top!==d.top||a.rect.bottom!==d.bottom;a.changed=v||p.x!==a.coords.x||p.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(t){var e=this.interaction,n=t.phase,r=e.coords.cur,o=e.coords.start,i=this.result,a=this.startDelta,u=i.delta;"start"===n&&(0,ni.default)(this.startDelta,i.delta);for(var s=0;s<[[o,a],[r,u]].length;s++){var l=ii([[o,a],[r,u]][s],2),c=l[0],f=l[1];c.page.x+=f.x,c.page.y+=f.y,c.client.x+=f.x,c.client.y+=f.y}var p=this.result.rectDelta,d=t.rect||e.rect;d.left+=p.left,d.right+=p.right,d.top+=p.top,d.bottom+=p.bottom,d.width=d.right-d.left,d.height=d.bottom-d.top}},{key:"setAndApply",value:function(t){var e=this.interaction,n=t.phase,r=t.preEnd,o=t.skipModifiers,i=this.setAll({preEnd:r,phase:n,pageCoords:t.modifiedCoords||e.coords.cur.page});if(!(this.result=i).changed&&(!o||o<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var a=e.coords.cur.page,u=t.modifiedCoords.x-a.x,s=t.modifiedCoords.y-a.y;i.coords.x+=u,i.coords.y+=s,i.delta.x+=u,i.delta.y+=s}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var e=t.interaction,n=t.event,r=this.states;if(r&&r.length){for(var o=!1,i=0;i<r.length;i++){var a=r[i],u=(t.state=a).options,s=a.methods,l=s.beforeEnd&&s.beforeEnd(t);if(l)return this.endResult=l,!1;o=o||!o&&this.shouldDo(u,!0,t.phase,!0)}o&&e.move({event:n,preEnd:!0})}}},{key:"stop",value:function(t){var e=t.interaction;if(this.states&&this.states.length){var n=(0,ni.default)({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(n);for(var r=0;r<this.states.length;r++){var o=this.states[r];(n.state=o).methods.stop&&o.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var e=0;e<t.length;e++){var n=t[e],r=n.options,o=n.methods,i=n.name;r&&!1===r.enabled||this.states.push({options:r,methods:o,index:e,name:i})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var e=t.interaction,n=e.coords,r=e.rect,o=e.modification;if(o.result){for(var i=o.startDelta,a=o.result,u=a.delta,s=a.rectDelta,l=[[n.start,i],[n.cur,u]],c=0;c<l.length;c++){var f=ii(l[c],2),p=f[0],d=f[1];p.page.x-=d.x,p.page.y-=d.y,p.client.x-=d.x,p.client.y-=d.y}r.left-=s.left,r.right-=s.right,r.top-=s.top,r.bottom-=s.bottom}}},{key:"shouldDo",value:function(t,e,n,r){return!(!t||!1===t.enabled||r&&!t.endOnly||t.endOnly&&!e||"start"===n&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.edges=t.edges,this.states=t.states.map(function(t){return(0,ei.default)(t)}),this.result=li((0,ni.default)({},t.result.coords),(0,ni.default)({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}])&&ai(e.prototype,n),t}();function li(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function ci(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}Qo.default=si;var fi={};Object.defineProperty(fi,"__esModule",{value:!0}),fi.makeModifier=function(t,e){function n(t){var n=t||{};for(var i in n.enabled=!1!==n.enabled,r)i in n||(n[i]=r[i]);return{options:n,methods:o,name:e}}var r=t.defaults,o={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop};return e&&"string"==typeof e&&(n._defaults=r,n._methods=o),n},fi.addEventModifiers=vi,fi.default=void 0;var pi,di=(pi=Qo)&&pi.__esModule?pi:{default:pi};function vi(t){var e=t.iEvent,n=t.interaction.modification.result;n&&(e.modifiers=n.eventProps)}var yi={id:"modifiers/base",install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new di.default(e)},"interactions:before-action-start":function(t){var e=t.interaction.modification;e.start(t,t.interaction.coords.start.page),t.interaction.edges=e.edges,e.applyToInteraction(t)},"interactions:before-action-move":function(t){return t.interaction.modification.setAndApply(t)},"interactions:before-action-end":function(t){return t.interaction.modification.beforeEnd(t)},"interactions:action-start":vi,"interactions:action-move":vi,"interactions:action-end":vi,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}},before:["actions","action/drag","actions/resize","actions/gesture"]};fi.default=yi;var hi={};function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(hi,"__esModule",{value:!0}),hi.addTotal=mi,hi.applyPending=wi,hi.default=void 0;var bi=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==gi(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(Ut);function mi(t){t.pointerIsDown&&(Pi(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}function Oi(t){wi(t.interaction)}function wi(t){if(!(e=t).offset.pending.x&&!e.offset.pending.y)return!1;var e,n=t.offset.pending;return Pi(t.coords.cur,n),Pi(t.coords.delta,n),bi.addEdges(t.edges,t.rect,n),n.x=0,!(n.y=0)}function _i(t){var e=t.x,n=t.y;this.offset.pending.x+=e,this.offset.pending.y+=n,this.offset.total.x+=e,this.offset.total.y+=n}function Pi(t,e){var n=t.page,r=t.client,o=e.x,i=e.y;n.x+=o,n.y+=i,r.x+=o,r.y+=i}_n._ProxyMethods.offsetBy="";var xi={id:"offset",install:function(t){t.Interaction.prototype.offsetBy=_i},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return mi(t.interaction)},"interactions:before-action-start":Oi,"interactions:before-action-move":Oi,"interactions:before-action-end":function(t){var e=t.interaction;if(wi(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}};hi.default=xi;var ji={};function Si(t){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=ji.InertiaState=void 0;var Mi=Wi(Qo),ki=Ci(fi),Ei=Wi(hi),Ti=Ci(H),Di=Wi(jt),Ii=Ci(d),Ai=Wi(Qt);function zi(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return zi=function(){return t},t}function Ci(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Si(t)&&"function"!=typeof t)return{default:t};var e=zi();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function Wi(t){return t&&t.__esModule?t:{default:t}}function Ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.interaction=e,Fi(this,"active",!1),Fi(this,"isModified",!1),Fi(this,"smoothEnd",!1),Fi(this,"allowResume",!1),Fi(this,"modification",null),Fi(this,"modifierCount",0),Fi(this,"modifierArg",null),Fi(this,"startCoords",null),Fi(this,"t0",0),Fi(this,"v0",0),Fi(this,"te",0),Fi(this,"targetOffset",null),Fi(this,"modifiedOffset",null),Fi(this,"currentOffset",null),Fi(this,"lambda_v0",0),Fi(this,"one_ve_v0",0),Fi(this,"timeout",null)}var e,n;return e=t,(n=[{key:"start",value:function(t){var e=this.interaction,n=Yi(e);if(!n||!n.enabled)return!1;var r=e.coords.velocity.client,o=(0,Di.default)(r.x,r.y),i=this.modification||(this.modification=new Mi.default(e));if(i.copyFrom(e.modification),this.t0=e._now(),this.allowResume=n.allowResume,this.v0=o,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg={interaction:e,interactable:e.interactable,element:e.element,rect:e.rect,edges:e.edges,pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"},this.t0-e.coords.cur.timeStamp<50&&o>n.minSpeed&&o>n.endSpeed)this.startInertia();else{if(i.result=i.setAll(this.modifierArg),!i.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,e=this.interaction.coords.velocity.client,n=Yi(this.interaction),r=n.resistance,o=-Math.log(n.endSpeed/this.v0)/r;this.targetOffset={x:(e.x-o)/r,y:(e.y-o)/r},this.te=o,this.lambda_v0=r/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var i=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},i.result=i.setAll(a),i.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+i.result.delta.x,y:this.targetOffset.y+i.result.delta.y}),this.timeout=Ai.default.request(function(){return t.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.timeout=Ai.default.request(function(){return t.smoothEndTick()})}},{key:"inertiaTick",value:function(){var t,e,n,r,o,i,a=this,u=this.interaction,s=Yi(u).resistance,l=(u._now()-this.t0)/1e3;if(l<this.te){var c,f=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0,p={x:(c=this.isModified?(t=0,e=this.targetOffset.x,n=this.targetOffset.y,r=this.modifiedOffset.x,o=this.modifiedOffset.y,{x:Ni(i=f,0,e,r),y:Ni(i,t,n,o)}):{x:this.targetOffset.x*f,y:this.targetOffset.y*f}).x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=p.x,this.currentOffset.y+=p.y,u.offsetBy(p),u.move(),this.timeout=Ai.default.request(function(){return a.inertiaTick()})}else u.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,e=this.interaction,n=e._now()-this.t0,r=Yi(e).smoothEndDuration;if(n<r){var o=Li(n,0,this.targetOffset.x,r),i=Li(n,0,this.targetOffset.y,r),a={x:o-this.currentOffset.x,y:i-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,e.offsetBy(a),e.move({skipModifiers:this.modifierCount}),this.timeout=Ai.default.request(function(){return t.smoothEndTick()})}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var e=t.pointer,n=t.event,r=t.eventTarget,o=this.interaction;o.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),o.updatePointer(e,n,r,!0),o._doPhase({interaction:o,event:n,phase:"resume"}),(0,Et.copyCoords)(o.coords.prev,o.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ai.default.cancel(this.timeout)}}])&&Ri(e.prototype,n),t}();function Yi(t){var e=t.interactable,n=t.prepared;return e&&e.options&&n.name&&e.options[n.name].inertia}function Ni(t,e,n,r){var o=1-t;return o*o*e+2*o*t*n+t*t*r}function Li(t,e,n,r){return-n*(t/=r)*(t-2)+e}ji.InertiaState=Xi;var Bi={id:"inertia",before:["modifiers/base"],install:function(t){var e=t.defaults;t.usePlugin(Ei.default),t.usePlugin(ki.default),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new Xi(e)},"interactions:before-action-end":function(t){var e=t.interaction,n=t.event;return(!e._interacting||e.simulation||!e.inertia.start(n))&&null},"interactions:down":function(t){var e=t.interaction,n=t.eventTarget,r=e.inertia;if(r.active)for(var o=n;Ii.element(o);){if(o===e.element){r.resume(t);break}o=Ti.parentNode(o)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":ki.addEventModifiers,"interactions:action-inertiastart":ki.addEventModifiers,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};ji.default=Bi;var Vi,qi={};function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(qi,"__esModule",{value:!0}),qi.init=qi.default=void 0;var Gi=new(((Vi=n({}))&&Vi.__esModule?Vi:{default:Vi}).default),Hi=Gi.interactStatic;function Ki(t){return Gi.init(t)}qi.default=Hi,qi.init=Ki,"object"===("undefined"==typeof window?"undefined":Ui(window))&&window&&Ki(window);var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.default=void 0,$i.default={};var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.default=void 0,Zi.default={};var Ji={};function Qi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.default=void 0,Ji.default=function(t){function e(e,r){for(var o=t.range,i=t.limits,a=void 0===i?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:i,u=t.offset,s=void 0===u?{x:0,y:0}:u,l={range:o,grid:t,x:null,y:null},c=0;c<n.length;c++){var f=Qi(n[c],2),p=f[0],d=f[1],v=Math.round((e-s.x)/t[p]),y=Math.round((r-s.y)/t[d]);l[p]=Math.max(a.left,Math.min(a.right,v*t[p]+s.x)),l[d]=Math.max(a.top,Math.min(a.bottom,y*t[d]+s.y))}return l}var n=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(e){var n=Qi(e,2),r=n[0],o=n[1];return r in t||o in t});return e.grid=t,e.coordFields=n,e};var ta={};Object.defineProperty(ta,"__esModule",{value:!0}),Object.defineProperty(ta,"edgeTarget",{enumerable:!0,get:function(){return ea.default}}),Object.defineProperty(ta,"elements",{enumerable:!0,get:function(){return na.default}}),Object.defineProperty(ta,"grid",{enumerable:!0,get:function(){return ra.default}});var ea=oa($i),na=oa(Zi),ra=oa(Ji);function oa(t){return t&&t.__esModule?t:{default:t}}var ia={};function aa(t){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(ia,"__esModule",{value:!0}),ia.default=void 0;var ua,sa=(ua=st)&&ua.__esModule?ua:{default:ua},la=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==aa(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(ta);var ca={id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=(0,sa.default)(e.snappers||{},la),e.createSnapGrid=e.snappers.grid}};ia.default=ca;var fa={};Object.defineProperty(fa,"__esModule",{value:!0}),fa.aspectRatio=fa.default=void 0;var pa=va(st),da=va(Qo);function va(t){return t&&t.__esModule?t:{default:t}}function ya(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ha(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(n),!0).forEach(function(e){ga(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ga(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ba={start:function(t){var e=t.state,n=t.rect,r=t.edges,o=t.pageCoords,i=e.options.ratio,a=e.options,u=a.equalDelta,s=a.modifiers;"preserve"===i&&(i=n.width/n.height),e.startCoords=(0,pa.default)({},o),e.startRect=(0,pa.default)({},n),e.ratio=i,e.equalDelta=u;var l=e.linkedEdges={top:r.top||r.left&&!r.bottom,left:r.left||r.top&&!r.right,bottom:r.bottom||r.right&&!r.top,right:r.right||r.bottom&&!r.left};if(e.xIsPrimaryAxis=!(!r.left&&!r.right),e.equalDelta)e.edgeSign=(l.left?1:-1)*(l.top?1:-1);else{var c=e.xIsPrimaryAxis?l.top:l.left;e.edgeSign=c?-1:1}if((0,pa.default)(t.edges,l),s&&s.length){var f=new da.default(t.interaction);f.copyFrom(t.interaction.modification),f.prepareStates(s),(e.subModification=f).startAll(ha({},t))}},set:function(t){var e=t.state,n=t.rect,r=t.coords,o=(0,pa.default)({},r),i=e.equalDelta?ma:Oa;if(i(e,e.xIsPrimaryAxis,r,n),!e.subModification)return null;var a=(0,pa.default)({},n);(0,Ut.addEdges)(e.linkedEdges,a,{x:r.x-o.x,y:r.y-o.y});var u=e.subModification.setAll(ha({},t,{rect:a,edges:e.linkedEdges,pageCoords:r,prevCoords:r,prevRect:a})),s=u.delta;return u.changed&&(i(e,Math.abs(s.x)>Math.abs(s.y),u.coords,u.rect),(0,pa.default)(r,u.coords)),u.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function ma(t,e,n){var r=t.startCoords,o=t.edgeSign;e?n.y=r.y+(n.x-r.x)*o:n.x=r.x+(n.y-r.y)*o}function Oa(t,e,n,r){var o=t.startRect,i=t.startCoords,a=t.ratio,u=t.edgeSign;if(e){var s=r.width/a;n.y=i.y+(s-o.height)*u}else{var l=r.height*a;n.x=i.x+(l-o.width)*u}}fa.aspectRatio=ba;var wa=(0,fi.makeModifier)(ba,"aspectRatio");fa.default=wa;var _a={};function Pa(){}Object.defineProperty(_a,"__esModule",{value:!0}),_a.default=void 0,Pa._defaults={};var xa=Pa;_a.default=xa;var ja={};function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(ja,"__esModule",{value:!0}),ja.getRestrictionRect=Aa,ja.restrict=ja.default=void 0;var Ma,ka=(Ma=st)&&Ma.__esModule?Ma:{default:Ma},Ea=Ia(d),Ta=Ia(Ut);function Da(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Da=function(){return t},t}function Ia(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Sa(t)&&"function"!=typeof t)return{default:t};var e=Da();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function Aa(t,e,n){return Ea.func(t)?Ta.resolveRectLike(t,e.interactable,e.element,[n.x,n.y,e]):Ta.resolveRectLike(t,e.interactable,e.element)}var za={start:function(t){var e=t.rect,n=t.startOffset,r=t.state,o=t.interaction,i=t.pageCoords,a=r.options,u=a.elementRect,s=(0,ka.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(e&&u){var l=Aa(a.restriction,o,i);if(l){var c=l.right-l.left-e.width,f=l.bottom-l.top-e.height;c<0&&(s.left+=c,s.right+=c),f<0&&(s.top+=f,s.bottom+=f)}s.left+=n.left-e.width*u.left,s.top+=n.top-e.height*u.top,s.right+=n.right-e.width*(1-u.right),s.bottom+=n.bottom-e.height*(1-u.bottom)}r.offset=s},set:function(t){var e=t.coords,n=t.interaction,r=t.state,o=r.options,i=r.offset,a=Aa(o.restriction,n,e);if(a){var u=Ta.xywhToTlbr(a);e.x=Math.max(Math.min(u.right-i.right,e.x),u.left+i.left),e.y=Math.max(Math.min(u.bottom-i.bottom,e.y),u.top+i.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};ja.restrict=za;var Ca=(0,fi.makeModifier)(za,"restrict");ja.default=Ca;var Wa={};function Ra(t){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.restrictEdges=Wa.default=void 0;var Fa,Xa=(Fa=st)&&Fa.__esModule?Fa:{default:Fa},Ya=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Ra(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(Ut);var Na={top:1/0,left:1/0,bottom:-1/0,right:-1/0},La={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ba(t,e){for(var n=["top","left","bottom","right"],r=0;r<n.length;r++){var o=n[r];o in t||(t[o]=e[o])}return t}var Va={noInner:Na,noOuter:La,start:function(t){var e,n=t.interaction,r=t.startOffset,o=t.state,i=o.options;if(i){var a=(0,ja.getRestrictionRect)(i.offset,n,n.coords.start.page);e=Ya.rectToXY(a)}e=e||{x:0,y:0},o.offset={top:e.y+r.top,left:e.x+r.left,bottom:e.y-r.bottom,right:e.x-r.right}},set:function(t){var e=t.coords,n=t.edges,r=t.interaction,o=t.state,i=o.offset,a=o.options;if(n){var u=(0,Xa.default)({},e),s=(0,ja.getRestrictionRect)(a.inner,r,u)||{},l=(0,ja.getRestrictionRect)(a.outer,r,u)||{};Ba(s,Na),Ba(l,La),n.top?e.y=Math.min(Math.max(l.top+i.top,u.y),s.top+i.top):n.bottom&&(e.y=Math.max(Math.min(l.bottom+i.bottom,u.y),s.bottom+i.bottom)),n.left?e.x=Math.min(Math.max(l.left+i.left,u.x),s.left+i.left):n.right&&(e.x=Math.max(Math.min(l.right+i.right,u.x),s.right+i.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Wa.restrictEdges=Va;var qa=(0,fi.makeModifier)(Va,"restrictEdges");Wa.default=qa;var Ua,Ga={};Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.restrictRect=Ga.default=void 0;var Ha=(0,((Ua=st)&&Ua.__esModule?Ua:{default:Ua}).default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},ja.restrict.defaults),Ka={start:ja.restrict.start,set:ja.restrict.set,defaults:Ha};Ga.restrictRect=Ka;var $a=(0,fi.makeModifier)(Ka,"restrictRect");Ga.default=$a;var Za={};function Ja(t){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Za,"__esModule",{value:!0}),Za.restrictSize=Za.default=void 0;var Qa,tu=(Qa=st)&&Qa.__esModule?Qa:{default:Qa},eu=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Ja(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(Ut);var nu={width:-1/0,height:-1/0},ru={width:1/0,height:1/0},ou={start:function(t){return Wa.restrictEdges.start(t)},set:function(t){var e=t.interaction,n=t.state,r=t.rect,o=t.edges,i=n.options;if(o){var a=eu.tlbrToXywh((0,ja.getRestrictionRect)(i.min,e,t.coords))||nu,u=eu.tlbrToXywh((0,ja.getRestrictionRect)(i.max,e,t.coords))||ru;n.options={endOnly:i.endOnly,inner:(0,tu.default)({},Wa.restrictEdges.noInner),outer:(0,tu.default)({},Wa.restrictEdges.noOuter)},o.top?(n.options.inner.top=r.bottom-a.height,n.options.outer.top=r.bottom-u.height):o.bottom&&(n.options.inner.bottom=r.top+a.height,n.options.outer.bottom=r.top+u.height),o.left?(n.options.inner.left=r.right-a.width,n.options.outer.left=r.right-u.width):o.right&&(n.options.inner.right=r.left+a.width,n.options.outer.right=r.left+u.width),Wa.restrictEdges.set(t),n.options=i}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Za.restrictSize=ou;var iu=(0,fi.makeModifier)(ou,"restrictSize");Za.default=iu;var au={};function uu(){}Object.defineProperty(au,"__esModule",{value:!0}),au.default=void 0,uu._defaults={};var su=uu;au.default=su;var lu={};function cu(t){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(lu,"__esModule",{value:!0}),lu.snap=lu.default=void 0;var fu=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==cu(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe);var pu={start:function(t){var e,n,r,o=t.interaction,i=t.interactable,a=t.element,u=t.rect,s=t.state,l=t.startOffset,c=s.options,f=c.offsetWithOrigin?(n=(e=t).interaction.element,fu.rect.rectToXY(fu.rect.resolveRectLike(e.state.options.origin,null,null,[n]))||fu.getOriginXY(e.interactable,n,e.interaction.prepared.name)):{x:0,y:0};if("startCoords"===c.offset)r={x:o.coords.start.page.x,y:o.coords.start.page.y};else{var p=fu.rect.resolveRectLike(c.offset,i,a,[o]);(r=fu.rect.rectToXY(p)||{x:0,y:0}).x+=f.x,r.y+=f.y}var d=c.relativePoints;s.offsets=u&&d&&d.length?d.map(function(t,e){return{index:e,relativePoint:t,x:l.left-u.width*t.x+r.x,y:l.top-u.height*t.y+r.y}}):[fu.extend({index:0,relativePoint:null},r)]},set:function(t){var e=t.interaction,n=t.coords,r=t.state,o=r.options,i=r.offsets,a=fu.getOriginXY(e.interactable,e.element,e.prepared.name),u=fu.extend({},n),s=[];o.offsetWithOrigin||(u.x-=a.x,u.y-=a.y);for(var l=0;l<i.length;l++)for(var c=i[l],f=u.x-c.x,p=u.y-c.y,d=0,v=o.targets.length;d<v;d++){var y,h=o.targets[d];(y=fu.is.func(h)?h(f,p,e,c,d):h)&&s.push({x:(fu.is.number(y.x)?y.x:f)+c.x,y:(fu.is.number(y.y)?y.y:p)+c.y,range:fu.is.number(y.range)?y.range:o.range,source:h,index:d,offset:c})}for(var g={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},b=0;b<s.length;b++){var m=s[b],O=m.range,w=m.x-u.x,_=m.y-u.y,P=fu.hypot(w,_),x=P<=O;O===1/0&&g.inRange&&g.range!==1/0&&(x=!1),g.target&&!(x?g.inRange&&O!==1/0?P/O<g.distance/g.range:O===1/0&&g.range!==1/0||P<g.distance:!g.inRange&&P<g.distance)||(g.target=m,g.distance=P,g.range=O,g.inRange=x,g.delta.x=w,g.delta.y=_)}return g.inRange&&(n.x=g.target.x,n.y=g.target.y),r.closest=g},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};lu.snap=pu;var du=(0,fi.makeModifier)(pu,"snap");lu.default=du;var vu={};function yu(t){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(vu,"__esModule",{value:!0}),vu.snapSize=vu.default=void 0;var hu,gu=(hu=st)&&hu.__esModule?hu:{default:hu},bu=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==yu(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(d);function mu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ou={start:function(t){var e=t.state,n=t.edges,r=e.options;if(!n)return null;t.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],lu.snap.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e=t.interaction,n=t.state,r=t.coords,o=n.options,i=n.offsets,a={x:r.x-i[0].x,y:r.y-i[0].y};n.options=(0,gu.default)({},o),n.options.targets=[];for(var u=0;u<(o.targets||[]).length;u++){var s=(o.targets||[])[u],l=void 0;if(l=bu.func(s)?s(a.x,a.y,e):s){for(var c=0;c<n.targetFields.length;c++){var f=mu(n.targetFields[c],2),p=f[0],d=f[1];if(p in l||d in l){l.x=l[p],l.y=l[d];break}}n.options.targets.push(l)}}var v=lu.snap.set(t);return n.options=o,v},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};vu.snapSize=Ou;var wu=(0,fi.makeModifier)(Ou,"snapSize");vu.default=wu;var _u={};Object.defineProperty(_u,"__esModule",{value:!0}),_u.snapEdges=_u.default=void 0;var Pu=ju(L),xu=ju(st);function ju(t){return t&&t.__esModule?t:{default:t}}var Su={start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],vu.snapSize.start(t)):null},set:vu.snapSize.set,defaults:(0,xu.default)((0,Pu.default)(vu.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};_u.snapEdges=Su;var Mu=(0,fi.makeModifier)(Su,"snapEdges");_u.default=Mu;var ku={};function Eu(){}Object.defineProperty(ku,"__esModule",{value:!0}),ku.default=void 0,Eu._defaults={};var Tu=Eu;ku.default=Tu;var Du={};function Iu(){}Object.defineProperty(Du,"__esModule",{value:!0}),Du.default=void 0,Iu._defaults={};var Au=Iu;Du.default=Au;var zu={};Object.defineProperty(zu,"__esModule",{value:!0}),zu.default=void 0;var Cu=Gu(fa),Wu=Gu(_a),Ru=Gu(Wa),Fu=Gu(ja),Xu=Gu(Ga),Yu=Gu(Za),Nu=Gu(au),Lu=Gu(_u),Bu=Gu(lu),Vu=Gu(vu),qu=Gu(ku),Uu=Gu(Du);function Gu(t){return t&&t.__esModule?t:{default:t}}var Hu={aspectRatio:Cu.default,restrictEdges:Ru.default,restrict:Fu.default,restrictRect:Xu.default,restrictSize:Yu.default,snapEdges:Lu.default,snap:Bu.default,snapSize:Vu.default,spring:qu.default,avoid:Wu.default,transform:Uu.default,rubberband:Nu.default};zu.default=Hu;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.default=void 0;var $u=Qu(ia),Zu=Qu(zu),Ju=Qu(fi);function Qu(t){return t&&t.__esModule?t:{default:t}}var ts={id:"modifiers",install:function(t){var e=t.interactStatic;for(var n in t.usePlugin(Ju.default),t.usePlugin($u.default),e.modifiers=Zu.default,Zu.default){var r=Zu.default[n],o=r._defaults,i=r._methods;o._methods=i,t.defaults.perAction[n]=o}}};Ku.default=ts;var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.default=void 0,es.default={};var ns={};Object.defineProperty(ns,"__esModule",{value:!0}),ns.PointerEvent=ns.default=void 0;var rs,os=(rs=_e)&&rs.__esModule?rs:{default:rs},is=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==as(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(Et);function as(t){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ss(t){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ls(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cs(t,e){return(cs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ps=function(){function t(e,n,r,o,i,a){var u,s;if(function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this,u=!(s=ss(t).call(this,i))||"object"!==as(s)&&"function"!=typeof s?ls(this):s,fs(ls(u),"type",void 0),fs(ls(u),"originalEvent",void 0),fs(ls(u),"pointerId",void 0),fs(ls(u),"pointerType",void 0),fs(ls(u),"double",void 0),fs(ls(u),"pageX",void 0),fs(ls(u),"pageY",void 0),fs(ls(u),"clientX",void 0),fs(ls(u),"clientY",void 0),fs(ls(u),"dt",void 0),fs(ls(u),"eventable",void 0),is.pointerExtend(ls(u),r),r!==n&&is.pointerExtend(ls(u),n),u.timeStamp=a,u.originalEvent=r,u.type=e,u.pointerId=is.getPointerId(n),u.pointerType=is.getPointerType(n),u.target=o,u.currentTarget=null,"tap"===e){var l=i.getPointerIndex(n);u.dt=u.timeStamp-i.pointers[l].downTime;var c=u.timeStamp-i.tapTime;u.double=!!(i.prevTap&&"doubletap"!==i.prevTap.type&&i.prevTap.target===u.target&&c<500)}else"doubletap"===e&&(u.dt=n.timeStamp-i.tapTime);return u}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cs(t,e)}(t,os.default),e=t,(n=[{key:"_subtractOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this}},{key:"_addOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&us(e.prototype,n),t}();ns.PointerEvent=ns.default=ps;var ds={};function vs(t){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(ds,"__esModule",{value:!0}),ds.default=void 0,gs(_n),gs(n({}));var ys=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==vs(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(oe),hs=gs(ns);function gs(t){return t&&t.__esModule?t:{default:t}}var bs={id:"pointer-events/base",install:function(t){t.pointerEvents=bs,t.defaults.actions.pointerEvents=bs.defaults,ys.extend(t.actions.phaselessTypes,bs.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,n=t.pointerInfo;!e&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var n=t.interaction,r=t.pointer,o=t.event,i=t.eventTarget,a=t.duplicate,u=n.getPointerIndex(r);a||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&clearTimeout(n.pointers[u].hold.timeout),ms({interaction:n,pointer:r,event:o,eventTarget:i,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var n=t.interaction,r=t.pointer,o=t.event,i=t.eventTarget,a=t.pointerIndex,u=n.pointers[a].hold,s=ys.dom.getPath(i),l={interaction:n,pointer:r,event:o,eventTarget:i,type:"hold",targets:[],path:s,node:null},c=0;c<s.length;c++){var f=s[c];l.node=f,e.fire("pointerEvents:collect-targets",l)}if(l.targets.length){for(var p=1/0,d=0;d<l.targets.length;d++){var v=l.targets[d].eventable.options.holdDuration;v<p&&(p=v)}u.duration=p,u.timeout=setTimeout(function(){ms({interaction:n,eventTarget:i,pointer:r,event:o,type:"hold"},e)},p)}}(t,e),ms(t,e)},"interactions:up":function(t,e){var n,r,o,i,a,u;ws(t),ms(t,e),r=e,o=(n=t).interaction,i=n.pointer,a=n.event,u=n.eventTarget,o.pointerWasMoved||ms({interaction:o,eventTarget:u,pointer:i,event:a,type:"tap"},r)},"interactions:cancel":function(t,e){ws(t),ms(t,e)}},PointerEvent:hs.default,fire:ms,collectEventTargets:Os,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function ms(t,e){var n=t.interaction,r=t.pointer,o=t.event,i=t.eventTarget,a=t.type,u=t.targets,s=void 0===u?Os(t,e):u,l=new hs.default(a,r,o,i,n,e.now());e.fire("pointerEvents:new",{pointerEvent:l});for(var c={interaction:n,pointer:r,event:o,eventTarget:i,targets:s,type:a,pointerEvent:l},f=0;f<s.length;f++){var p=s[f];for(var d in p.props||{})l[d]=p.props[d];var v=ys.getOriginXY(p.eventable,p.node);if(l._subtractOrigin(v),l.eventable=p.eventable,l.currentTarget=p.node,p.eventable.fire(l),l._addOrigin(v),l.immediatePropagationStopped||l.propagationStopped&&f+1<s.length&&s[f+1].node!==l.currentTarget)break}if(e.fire("pointerEvents:fired",c),"tap"===a){var y=l.double?ms({interaction:n,pointer:r,event:o,eventTarget:i,type:"doubletap"},e):l;n.prevTap=y,n.tapTime=y.timeStamp}return l}function Os(t,e){var n=t.interaction,r=t.pointer,o=t.event,i=t.eventTarget,a=t.type,u=n.getPointerIndex(r),s=n.pointers[u];if("tap"===a&&(n.pointerWasMoved||!s||s.downTarget!==i))return[];for(var l=ys.dom.getPath(i),c={interaction:n,pointer:r,event:o,eventTarget:i,type:a,path:l,targets:[],node:null},f=0;f<l.length;f++){var p=l[f];c.node=p,e.fire("pointerEvents:collect-targets",c)}return"hold"===a&&(c.targets=c.targets.filter(function(t){return t.eventable.options.holdDuration===n.pointers[u].hold.duration})),c.targets}function ws(t){var e=t.interaction,n=t.pointerIndex;e.pointers[n].hold&&clearTimeout(e.pointers[n].hold.timeout)}var _s=bs;ds.default=_s;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.default=void 0,js(ns);var xs=js(ds);function js(t){return t&&t.__esModule?t:{default:t}}function Ss(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}var Ms={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(xs.default);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(t,e){return t["pointerEvents:".concat(e)]=Ss,t},{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var n=t.interaction,r=t.pointerEvent,o=t.eventTarget,i=t.targets;if("hold"===r.type&&i.length){var a=i[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout(function(){e.pointerEvents.fire({interaction:n,eventTarget:o,type:"hold",pointer:r,event:r},e)},a))}}})};Ps.default=Ms;var ks={};Object.defineProperty(ks,"__esModule",{value:!0}),ks.default=void 0;var Es,Ts=(Es=st)&&Es.__esModule?Es:{default:Es};function Ds(t){return(0,Ts.default)(this.events.options,t),this}var Is={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=Ds;var n=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var r=n.call(this,t,e);return r===this&&(this.events.options[t]=e),r}},listeners:{"pointerEvents:collect-targets":function(t,e){var n=t.targets,r=t.node,o=t.type,i=t.eventTarget;e.interactables.forEachMatch(r,function(t){var e=t.events,a=e.options;e.types[o]&&e.types[o].length&&t.testIgnoreAllow(a,r,i)&&n.push({node:r,eventable:e,props:{interactable:t}})})},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var n=t.interactable,r=t.options;(0,Ts.default)(n.events.options,e.pointerEvents.defaults),(0,Ts.default)(n.events.options,r.pointerEvents||{})}}};ks.default=Is;var As={};function zs(t){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(As,"__esModule",{value:!0}),Object.defineProperty(As,"holdRepeat",{enumerable:!0,get:function(){return Ws.default}}),Object.defineProperty(As,"interactableTargets",{enumerable:!0,get:function(){return Rs.default}}),As.pointerEvents=As.default=void 0;var Cs=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==zs(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(ds);As.pointerEvents=Cs;var Ws=Fs(Ps),Rs=Fs(ks);function Fs(t){return t&&t.__esModule?t:{default:t}}var Xs={id:"pointer-events",install:function(t){t.usePlugin(Cs),t.usePlugin(Ws.default),t.usePlugin(Rs.default)}};As.default=Xs;var Ys,Ns={};function Ls(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,n){function r(){var r=o[u],s=t.getRect(r);if(!s)return"break";var l=oe.arr.find(n.interactions.list,function(n){return n.interacting()&&n.interactable===t&&n.element===r&&n.prepared.name===e.name}),c=void 0;if(l)l.move(),a&&(c=l._reflowPromise||new i(function(t){l._reflowResolve=t}));else{var f=oe.rect.tlbrToXywh(s),p={page:{x:f.x,y:f.y},client:{x:f.x,y:f.y},timeStamp:n.now()},d=oe.pointer.coordsToEvent(p);c=function(t,e,r,o,i){var a=n.interactions.new({pointerType:"reflow"}),u={interaction:a,event:i,pointer:i,eventTarget:r,phase:"reflow"};a.interactable=e,a.element=r,a.prepared=(0,oe.extend)({},o),a.prevEvent=i,a.updatePointer(i,i,r,!0),a._doPhase(u);var s=oe.win.window.Promise?new oe.win.window.Promise(function(t){a._reflowResolve=t}):null;return a._reflowPromise=s,a.start(o,e,r),a._interacting?(a.move(u),a.end(i)):a.stop(),a.removePointer(i,i),a.pointerIsDown=!1,s}(0,t,r,e,d)}a&&a.push(c)}for(var o=oe.is.string(t.target)?oe.arr.from(t._context.querySelectorAll(t.target)):[t.target],i=oe.win.window.Promise,a=i?[]:null,u=0;u<o.length&&"break"!==r();u++);return a&&i.all(a).then(function(){return t})}(this,e,t)}}Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.install=Ls,Ns.default=void 0,(Ys=e({}))&&Ys.__esModule;var Bs={id:"reflow",install:Ls,listeners:{"interactions:stop":function(t,e){var n=t.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),oe.arr.remove(e.interactions.list,n))}}};Ns.default=Bs;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.default=void 0,Vs.default={};var qs={};Object.defineProperty(qs,"__esModule",{value:!0}),qs.exchange=void 0,qs.exchange={};var Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.default=void 0,Us.default={};var Gs={};function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.default=void 0;var Ks=yl(Yr),$s=yl(Gr),Zs=yl(Hr),Js=yl(Fo),Qs=yl(Vo),tl=yl(qo),el=yl(Fn),nl=(yl(Uo),vl(Jo)),rl=yl(ji),ol=yl(qi),il=yl(Ku),al=yl(es),ul=yl(hi),sl=yl(As),ll=yl(Ns),cl=vl(Vs),fl=vl(Et),pl=vl(Us);function dl(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return dl=function(){return t},t}function vl(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Hs(t)&&"function"!=typeof t)return{default:t};var e=dl();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function yl(t){return t&&t.__esModule?t:{default:t}}ol.default.use(al.default),ol.default.use(el.default),ol.default.use(ul.default),ol.default.use(Qs.default),ol.default.use($s.default),ol.default.use(sl.default),ol.default.use(rl.default),ol.default.use(il.default),ol.default.use(Js.default),ol.default.use(Ks.default),ol.default.use(Zs.default),ol.default.use(ll.default),ol.default.feedback=nl,ol.default.use(tl.default),ol.default.vue={components:pl},ol.default.__utils={exchange:qs.exchange,displace:cl,pointer:fl};var hl=ol.default;Gs.default=hl;var gl={exports:{}};Object.defineProperty(gl.exports,"__esModule",{value:!0}),gl.exports.default=void 0;var bl,ml=(bl=Gs)&&bl.__esModule?bl:{default:bl};function Ol(t){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if("object"===Ol(gl)&&gl)try{gl.exports=ml.default}catch(t){}ml.default.default=ml.default;var wl=ml.default;return gl.exports.default=wl,gl.exports});
},{}],"FZle":[function(require,module,exports) {
"use strict";var t=e(require("interactjs"));function e(t){return t&&t.__esModule?t:{default:t}}const a={x:0,y:0,width:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)};function r(t){const e=t.target;window.header=e;const a=e.parentNode,r=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy;a.style.webkitTransform=a.style.transform="translate("+r+"px, "+i+"px)",a.setAttribute("data-x",r),a.setAttribute("data-y",i)}function i(t){const e=t.target,a=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,r=(parseFloat(e.getAttribute("data-y"))||0)+t.dy;e.style.webkitTransform=e.style.transform="translate("+a+"px, "+r+"px)",e.setAttribute("data-x",a),e.setAttribute("data-y",r)}(0,t.default)("tileos-icon").draggable({inertia:!1,modifiers:[t.default.modifiers.restrictRect({endOnly:!0}),t.default.modifiers.snap({targets:[t.default.createSnapGrid({x:64,y:64})],range:1/0,relativePoints:[{x:0,y:0}]})],autoScroll:!1,listeners:{move:i}}),(0,t.default)("tileos-app-header").draggable({inertia:!1,modifiers:[t.default.modifiers.restrictRect({endOnly:!0})],autoScroll:!0,listeners:{move:r}}),(0,t.default)("tileos-app").resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(t){var e=t.target,a=parseFloat(e.getAttribute("data-x"))||0,r=parseFloat(e.getAttribute("data-y"))||0;e.style.width=t.rect.width+"px",e.style.height=t.rect.height+"px",a+=t.deltaRect.left,r+=t.deltaRect.top,e.style.webkitTransform=e.style.transform="translate("+a+"px,"+r+"px)",e.setAttribute("data-x",a),e.setAttribute("data-y",r)}},modifiers:[t.default.modifiers.restrictEdges({outer:a}),t.default.modifiers.restrictSize({min:{width:100,height:50}})],inertia:!1});
},{"interactjs":"sYlF"}],"zbzq":[function(require,module,exports) {

},{"./fonts/pixel/ms_sans_serif.woff":[["ms_sans_serif.c37fa38b.woff","UcfO"],"UcfO"],"./fonts/pixel/ms_sans_serif.woff2":[["ms_sans_serif.d945fb9a.woff2","BFc9"],"BFc9"],"./fonts/pixel/ms_sans_serif_bold.woff":[["ms_sans_serif_bold.391a2f5e.woff","HJx0"],"HJx0"],"./fonts/pixel/ms_sans_serif_bold.woff2":[["ms_sans_serif_bold.2ec96650.woff2","yqot"],"yqot"],"./imgs/ninety-five.png":[["ninety-five.4f8ad732.png","P1DQ"],"P1DQ"],"./icons/95/close.svg":[["close.ea2a4517.svg","sYu5"],"sYu5"],"./icons/95/minimize.svg":[["minimize.ee387b96.svg","mreu"],"mreu"],"./imgs/xp.png":[["xp.0a341095.png","KHXp"],"KHXp"],"./icons/xp/minimize.svg":[["minimize.43fd158e.svg","Wpyt"],"Wpyt"],"./icons/xp/minimize-hover.svg":[["minimize-hover.73b125ac.svg","r069"],"r069"],"./icons/xp/minimize-active.svg":[["minimize-active.dc71593b.svg","GSvb"],"GSvb"],"./icons/xp/maximize.svg":[["maximize.d15edff6.svg","D0wt"],"D0wt"],"./icons/xp/maximize-hover.svg":[["maximize-hover.a9a025af.svg","ZQUi"],"ZQUi"],"./icons/xp/maximize-active.svg":[["maximize-active.ac53cd7c.svg","EjVD"],"EjVD"],"./icons/xp/close.svg":[["close.c736a309.svg","Zxpb"],"Zxpb"],"./icons/xp/close-hover.svg":[["close-hover.31da7cda.svg","L7NT"],"L7NT"],"./icons/xp/close-active.svg":[["close-active.69ffaecb.svg","DFHZ"],"DFHZ"],"./imgs/vista.jpeg":[["vista.e4adafb9.jpeg","OIJP"],"OIJP"],"./icons/seven/close.png":[["close.ccd8ff88.png","mwD1"],"mwD1"],"./icons/seven/close-hover.png":[["close-hover.0aa2d5b7.png","f7el"],"f7el"],"./icons/seven/minimize.png":[["minimize.49d79794.png","abOI"],"abOI"],"./icons/seven/minimize-hover.png":[["minimize-hover.ce4c10c5.png","awfV"],"awfV"],"./imgs/hehe.png":[["hehe.e4ebc71a.png","OZcq"],"OZcq"],"./imgs/ten-bg.jpeg":[["ten-bg.78612058.jpeg","d5pH"],"d5pH"],"./icons/ten/close.png":[["close.11879592.png","s158"],"s158"],"./icons/ten/minimize.png":[["minimize.ec862630.png","FM7t"],"FM7t"],"./imgs/ten.png":[["ten.82d1ce15.png","XWKh"],"XWKh"]}],"Focm":[function(require,module,exports) {
"use strict";require("./src/tileos"),require("./src/superfluent/dock"),require("./src/superfluent/start"),require("./src/superfluent/desktop"),require("./src/superfluent/icon"),require("./src/superfluent/app"),require("./src/superfluent/header"),require("./src/apps/ferb/index"),require("./src/apps/loveHandle"),require("./src/apps/doofpad"),require("./src/apps/photoviewer"),require("./src/apps/candaceMenace"),require("./src/result"),require("./src/interact"),require("./style.scss");var e=require("./src/state");e.state[0]();
},{"./src/tileos":"tZuy","./src/superfluent/dock":"g7ZD","./src/superfluent/start":"qgyj","./src/superfluent/desktop":"H8wq","./src/superfluent/icon":"kWw4","./src/superfluent/app":"xgLn","./src/superfluent/header":"bDT4","./src/apps/ferb/index":"WKyi","./src/apps/loveHandle":"vsQR","./src/apps/doofpad":"HltL","./src/apps/photoviewer":"J4IM","./src/apps/candaceMenace":"WieB","./src/result":"nwFB","./src/interact":"FZle","./style.scss":"zbzq","./src/state":"IwFA"}]},{},["Focm"], null)